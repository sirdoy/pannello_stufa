# Milestone v3.1: Design System Compliance

**Status:** SHIPPED 2026-02-02
**Phases:** 19-24
**Total Plans:** 13

## Overview

Achieve 100% design system compliance across all device cards and pages. Every raw HTML element (buttons, inputs) replaced with design system components. All styling uses CVA variants instead of inline/hard-coded values.

## Phases

### Phase 19: StoveCard Compliance

**Goal**: Replace all raw HTML elements in StoveCard with design system components
**Depends on**: Phase 18
**Plans**: 2 plans

Plans:
- [x] 19-01: Button migration for mode action buttons (Torna in Automatico, Configura Pianificazione)
- [x] 19-02: Status display CVA refactor with Badge and HealthIndicator

**Details:**
- Mode buttons migrated to Button.Group with variant="ember"
- CVA-based getStatusDisplay() helper function added
- Badge and HealthIndicator in header for at-a-glance status
- Data attributes added for CSS hooks

### Phase 20: ThermostatCard Compliance

**Goal**: Replace all raw HTML elements in ThermostatCard with design system components
**Depends on**: Phase 19
**Plans**: 2 plans

Plans:
- [x] 20-01: Button migration for mode grid (4 buttons) and calibrate action
- [x] 20-02: Temperature display verification and data-component standardization

**Details:**
- Mode grid raw buttons replaced with Button component (variant="subtle")
- Calibrate action button replaced with Button (loading state support)
- Temperature display verified as already compliant (Text component patterns)
- data-component attributes added for debugging

### Phase 21: LightsCard Compliance

**Goal**: Replace all raw HTML elements in LightsCard with design system components
**Depends on**: Phase 20
**Plans**: 2 plans

Plans:
- [x] 21-01: Slider migration (replace raw input range with design system Slider)
- [x] 21-02: Scene Button migration (replace raw buttons with Button component)

**Details:**
- Raw `<input type="range">` replaced with Slider (variant="ember")
- Scene buttons migrated to Button (variant="subtle")
- Adaptive styling preserved via adaptiveClasses object
- Vertical button layout with flex-col and !h-auto

### Phase 22: CameraCard Compliance

**Goal**: Replace all raw HTML elements in camera components with design system components
**Depends on**: Phase 21
**Plans**: 2 plans

Plans:
- [x] 22-01: CameraCard refresh + EventPreviewModal close/play Button migration
- [x] 22-02: HlsPlayer fullscreen toggle Button.Icon migration

**Details:**
- CameraCard refresh button → Button.Icon with RefreshCw
- EventPreviewModal close → Button.Icon, play → Button
- HlsPlayer fullscreen toggle → Button.Icon with Maximize/Minimize
- All using lucide-react icons with proper aria-labels

### Phase 23: Thermostat Page Compliance

**Goal**: Replace all raw HTML elements on thermostat page with design system components
**Depends on**: Phase 22
**Plans**: 2 plans

Plans:
- [x] 23-01: Button colorScheme prop + thermostat page mode button migration
- [x] 23-02: InfoBox variant prop + PageLayout wrapper migration

**Details:**
- Button component extended with colorScheme prop for mode-specific coloring
- InfoBox valueColor renamed to variant for API consistency with Badge
- Thermostat page wrapped in PageLayout with Header sub-component
- Stat boxes migrated to InfoBox components with icons

### Phase 24: Verification & Polish

**Goal**: Verify complete design system compliance across all device components
**Depends on**: Phase 23
**Plans**: 3 plans

Plans:
- [x] 24-01: ESLint verification for device components (VERIFY-01)
- [x] 24-02: Raw element elimination verification (VERIFY-02, VERIFY-03)
- [x] 24-03: Visual consistency checkpoint and final report (VERIFY-04)

**Details:**
- ESLint verification: 0 hard-coded color violations
- Raw element verification: 0 raw `<button>`, 0 raw `<input>` in device components
- Visual consistency: 10 badges migrated to Badge component during checkpoint
- All 4 verification requirements satisfied

---

## Milestone Summary

**Decimal Phases:** None

**Key Decisions:**
- Preserve elaborate gradient designs while adding CVA variants (additive approach)
- Button colorScheme compound variant for mode-specific styling
- InfoBox variant prop rename for Badge API consistency
- Badge migration during visual checkpoint for 100% compliance

**Issues Resolved:**
- StoveCard mode buttons used raw HTML (fixed in 19-01)
- ThermostatCard mode grid used raw buttons (fixed in 20-01)
- LightsCard used raw `<input type="range">` (fixed in 21-01)
- Camera components used inline SVG buttons (fixed in 22-01, 22-02)
- Thermostat page used raw divs for stats (fixed in 23-02)
- 10 badges in device components used raw HTML (fixed in 24-03)

**Issues Deferred:** None

**Technical Debt Incurred:** None

---

_For current project status, see .planning/ROADMAP.md_
