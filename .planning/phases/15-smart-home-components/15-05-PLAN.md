---
phase: 15-smart-home-components
plan: 05
type: execute
wave: 2
depends_on: ["15-02", "15-03", "15-04"]
files_modified:
  - app/components/ui/StatusCard.js
  - app/components/ui/__tests__/StatusCard.test.js
  - app/components/ui/index.js
autonomous: true

must_haves:
  truths:
    - "StatusCard displays device status with badge and connection state"
    - "StatusCard extends SmartHomeCard with read-only status display"
    - "StatusCard supports both compact and default sizes"
  artifacts:
    - path: "app/components/ui/StatusCard.js"
      provides: "Status display card for read-only device information"
      exports: ["StatusCard"]
  key_links:
    - from: "app/components/ui/StatusCard.js"
      to: "app/components/ui/SmartHomeCard.js"
      via: "extends SmartHomeCard base"
      pattern: "SmartHomeCard"
    - from: "app/components/ui/StatusCard.js"
      to: "app/components/ui/Badge.js"
      via: "status badge display"
      pattern: "import Badge"
    - from: "app/components/ui/StatusCard.js"
      to: "app/components/ui/ConnectionStatus.js"
      via: "connection state display"
      pattern: "ConnectionStatus"
---

<objective>
Create StatusCard component that extends SmartHomeCard for read-only device status display.

Purpose: Provide a specialized card for displaying device status information (not controls) with Badge for status and ConnectionStatus for connection state.
Output: StatusCard.js component that uses SmartHomeCard, Badge, and ConnectionStatus.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/15-smart-home-components/15-CONTEXT.md
@.planning/phases/15-smart-home-components/15-RESEARCH.md
@.planning/phases/15-smart-home-components/15-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create StatusCard component extending SmartHomeCard</name>
  <files>
    app/components/ui/StatusCard.js
    app/components/ui/__tests__/StatusCard.test.js
  </files>
  <action>
Create `app/components/ui/StatusCard.js`:

1. Props (passed to SmartHomeCard + StatusCard-specific):
   - SmartHomeCard props: icon, title, size, colorTheme, isLoading, error, errorMessage, disabled, className
   - StatusCard-specific:
     - `status`: Status text to display in Badge
     - `statusVariant`: Badge color variant (default: 'neutral')
     - `connectionStatus`: 'online' | 'offline' | 'connecting' | 'unknown' (optional)
     - `children`: Additional custom content

2. Component structure:
   ```jsx
   <SmartHomeCard
     icon={icon}
     title={title}
     size={size}
     colorTheme={colorTheme}
     isLoading={isLoading}
     error={error}
     errorMessage={errorMessage}
     disabled={disabled}
     className={className}
     {...props}
   >
     <SmartHomeCard.Status>
       {/* Status Badge with pulse for active states */}
       {status && (
         <Badge
           variant={statusVariant}
           pulse={statusVariant === 'ember' || statusVariant === 'sage'}
         >
           {status}
         </Badge>
       )}

       {/* Connection Status */}
       {connectionStatus && (
         <ConnectionStatus
           status={connectionStatus}
           size={size === 'compact' ? 'sm' : 'md'}
           className="ml-3"
         />
       )}
     </SmartHomeCard.Status>

     {/* Custom content via children */}
     {children}
   </SmartHomeCard>
   ```

3. Implementation notes:
   - Pulse animation enabled for ember and sage variants (active/online states per CONTEXT)
   - ConnectionStatus size matches card size
   - Forward ref to SmartHomeCard

4. Export:
   - Named and default: `StatusCard`

Create `app/components/ui/__tests__/StatusCard.test.js`:
- Accessibility: no a11y violations
- Renders status Badge with correct text
- Applies pulse animation for ember variant
- Applies pulse animation for sage variant
- Does not pulse for neutral/warning/danger variants
- Renders ConnectionStatus when connectionStatus provided
- Hides ConnectionStatus when not provided
- Passes size to ConnectionStatus (compact -> sm)
- Renders children content
- Forwards props to SmartHomeCard (isLoading, error, disabled)
  </action>
  <verify>npm test -- --testPathPattern="StatusCard" --passWithNoTests</verify>
  <done>StatusCard component created extending SmartHomeCard with Badge and ConnectionStatus integration</done>
</task>

<task type="auto">
  <name>Task 2: Export StatusCard from UI index</name>
  <files>
    app/components/ui/index.js
  </files>
  <action>
Update `app/components/ui/index.js` to export StatusCard:

1. Add import:
   ```javascript
   import StatusCard from './StatusCard';
   ```

2. Add to exports object:
   ```javascript
   StatusCard,
   ```

This makes StatusCard available via `@/app/components/ui` imports.
  </action>
  <verify>grep -q "StatusCard" app/components/ui/index.js && echo "StatusCard exported"</verify>
  <done>StatusCard exported from index.js</done>
</task>

</tasks>

<verification>
1. Run tests: `npm test -- --testPathPattern="StatusCard"`
2. Verify integration: StatusCard imports and uses SmartHomeCard, Badge, ConnectionStatus
3. Verify index export: Check StatusCard in index.js
</verification>

<success_criteria>
- StatusCard extends SmartHomeCard base component
- Integrates Badge with automatic pulse for ember/sage variants
- Integrates ConnectionStatus with size matching
- Supports children for custom content
- All tests pass including accessibility
- Exported from index.js
</success_criteria>

<output>
After completion, create `.planning/phases/15-smart-home-components/15-05-SUMMARY.md`
</output>
