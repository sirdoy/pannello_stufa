---
phase: 16-page-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/stove/page.js
autonomous: true

must_haves:
  truths:
    - "Stove page renders with design system components"
    - "Dynamic theme gradients preserved for status-based coloring"
    - "All controls use Button, ControlButton components"
  artifacts:
    - path: "app/stove/page.js"
      provides: "Stove control page with design system"
      contains: "Card variant"
  key_links:
    - from: "app/stove/page.js"
      to: "app/components/ui"
      via: "imports"
      pattern: "from.*components/ui"
---

<objective>
Complete Stove page migration to design system

Purpose: Ensure stove control page uses consistent design system patterns while preserving unique volcanic theming
Output: Stove page using Card, Button, Banner, Heading, Text, ControlButton with status-based theme variations
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-page-migration/16-CONTEXT.md
@.planning/phases/16-page-migration/16-RESEARCH.md
@app/stove/page.js
@app/components/ui/index.js
@app/components/ui/Badge.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit Stove page and identify remaining migrations</name>
  <files>app/stove/page.js</files>
  <action>
Review current Stove page (app/stove/page.js) - already 80% migrated:

**Already using design system:**
- Card variant="glass"
- Button variant="ember", variant="subtle", variant="ghost"
- ControlButton for fan/power controls
- Banner for warnings/info
- Heading, Text components
- LoadingOverlay, Skeleton
- Toast component

**PRESERVE (functional variations per CONTEXT.md):**
- Dynamic theme colors based on stove status (themeColors object)
- Gradient backgrounds (from-ember-950/80, etc.)
- Ambient glow effects
- Status-specific styling (pulse animations, color accents)

**Identify and fix:**
1. Any inline button styling that should use Button variants
2. Any manual Card-like divs that should use Card component
3. Any Text that doesn't use Text component (span with classes)
4. Quick Navigation cards - verify using Card component correctly
5. Mode indicator section - may have manual styling

**Specifically check:**
- Lines 793-807: Mode action buttons - should these use Button?
- Lines 909-996: Quick Navigation cards - verify Card usage
- Status display badges - check for Badge component usage

DO NOT change themeColors or gradient logic - this is intentional page-specific theming.
  </action>
  <verify>Manually review localhost:3000/stove in different states (off, working, error)</verify>
  <done>Audit complete, migration items identified</done>
</task>

<task type="auto">
  <name>Task 2: Complete Stove page component migration</name>
  <files>app/stove/page.js</files>
  <action>
Based on audit, complete these specific migrations:

1. **Mode action buttons (lines ~793-807):**
   Convert custom buttons to Button component:
   ```javascript
   // BEFORE
   <button className="px-4 py-2 rounded-xl text-xs sm:text-sm font-semibold...">
     Torna Automatico
   </button>

   // AFTER
   <Button variant="warning" size="sm" onClick={handleClearSemiManual}>
     Torna Automatico
   </Button>
   ```

2. **Quick Navigation cards:**
   Verify Card hover states use design system patterns:
   - hover:shadow-sage-glow (already correct)
   - Heading level={3} (already correct)
   - Text variant="tertiary" (already correct)

3. **Status badges - MIGRATE TO Badge COMPONENT:**
   Badge API confirmed: supports variant="sage"|"ocean"|"warning"|"ember"|"danger"|"neutral", size="sm"|"md"|"lg"

   ```javascript
   // BEFORE - inline badge styling
   <span className="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-sage-500/20 text-sage-400">
     Attivo
   </span>

   // AFTER - use Badge component
   import { Badge } from '@/app/components/ui';

   <Badge variant="sage" size="sm">Attivo</Badge>
   ```

   Migrate ALL inline badge patterns to Badge component:
   - Scheduler active indicator -> Badge variant="sage"
   - Mode indicators -> Badge variant="ocean" or "warning"
   - Status indicators -> Badge with appropriate variant

4. **Verify imports:**
   Ensure Badge added to imports from centralized index.js:
   ```javascript
   import { Badge, Button, Card, ... } from '@/app/components/ui';
   ```

**IMPORTANT:** Preserve all dynamic theming (themeColors, gradients, glow effects).
  </action>
  <verify>
- npm test -- --testPathPattern="stove" --passWithNoTests
- Manually test all stove states (off, starting, working, error)
- Verify theme transitions work smoothly
- Verify all badges render with correct Badge component styling
  </verify>
  <done>Stove page uses Button for all interactive elements, Badge for all status indicators, consistent with design system while preserving volcanic theming</done>
</task>

</tasks>

<verification>
1. Stove page loads at localhost:3000/stove
2. Status-based theme colors work (ember for working, slate for off, etc.)
3. All buttons use Button component with appropriate variants
4. All status badges use Badge component
5. ControlButton works for fan/power adjustment
6. Banner shows for warnings/errors
7. Quick navigation cards have proper hover states
8. No console errors
</verification>

<success_criteria>
- All interactive buttons use Button component
- All status badges use Badge component
- Card, Banner, Heading, Text used consistently
- Dynamic theme gradients preserved (functional variation)
- No inline button or badge styling (all use design system components)
- Proper heading hierarchy (h1 for status, h2 for sections)
</success_criteria>

<output>
After completion, create `.planning/phases/16-page-migration/16-02-SUMMARY.md`
</output>
