---
phase: 16-page-migration
plan: 05
type: execute
wave: 3
depends_on: ["16-03"]
files_modified:
  - app/monitoring/page.js
autonomous: true

must_haves:
  truths:
    - "Monitoring page uses PageLayout or Section for structure"
    - "Grid component used for status cards layout"
    - "Consistent Heading and Text usage"
  artifacts:
    - path: "app/monitoring/page.js"
      provides: "Monitoring dashboard with design system"
      contains: "Grid"
  key_links:
    - from: "app/monitoring/page.js"
      to: "app/components/ui"
      via: "imports"
      pattern: "from.*components/ui"
---

<objective>
Migrate Monitoring page layout to design system

Purpose: Apply consistent layout patterns to monitoring dashboard
Output: Monitoring page using Section/Grid for layout with proper heading hierarchy
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-page-migration/16-CONTEXT.md
@app/monitoring/page.js
@app/components/ui/Section.js
@app/components/ui/Grid.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Monitoring page layout</name>
  <files>app/monitoring/page.js</files>
  <action>
Update Monitoring page to use design system layout components:

**Current structure (lines ~56-93):**
```javascript
<div className="space-y-6 p-4">
  {/* Header with back button */}
  <div className="flex items-center gap-4">
    <Button variant="ghost" ...>Home</Button>
    <div className="flex items-center gap-3">
      <Activity className="text-ember-400" size={32} />
      <Heading level={1} variant="ember">Health Monitoring</Heading>
    </div>
  </div>

  {/* Status cards grid */}
  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
    <ConnectionStatusCard stats={stats} />
    <DeadManSwitchPanel status={dmsStatus} />
  </div>

  {/* Event timeline */}
  <section>
    <Heading level={2} variant="subtle">...</Heading>
    ...
  </section>
</div>
```

**New structure:**
```javascript
import { Section, Grid, Heading, Text, Button } from '@/app/components/ui';

// Option 1: Use Section for page structure
<div className="p-4 space-y-6">
  {/* Header */}
  <div className="flex items-center gap-4">
    <Button variant="ghost" size="sm" onClick={() => router.push('/')} icon={<ArrowLeft size={16} />}>
      Home
    </Button>
  </div>

  <Section
    title="Health Monitoring"
    icon={<Activity className="text-ember-400" size={28} />}
    spacing="md"
  >
    {/* Status cards */}
    <Grid cols={2} gap="md">
      <ConnectionStatusCard stats={stats} />
      <DeadManSwitchPanel status={dmsStatus} />
    </Grid>
  </Section>

  <Section
    title="Cronologia Eventi (7 giorni)"
    level={2}
    spacing="md"
  >
    <div id="monitoring-scroll-container" className="max-h-[600px] overflow-y-auto">
      <MonitoringTimeline />
    </div>
  </Section>
</div>
```

**Key changes:**
1. Replace manual grid classes with `<Grid cols={2} gap="md">`
2. Wrap sections in `<Section>` component for consistent headings
3. Keep external component imports (ConnectionStatusCard, DeadManSwitchPanel, MonitoringTimeline) unchanged

**Note:** The external monitoring components (ConnectionStatusCard, DeadManSwitchPanel) are in `/components/monitoring/` - do NOT migrate them in this plan. They may need separate migration if they have internal styling issues.
  </action>
  <verify>
- Monitoring page loads at localhost:3000/monitoring
- Grid displays cards side-by-side on desktop, stacked on mobile
- Heading hierarchy is correct (h1 for page, h2 for sections)
  </verify>
  <done>Monitoring page uses Section and Grid for consistent layout</done>
</task>

<task type="auto">
  <name>Task 2: Verify heading hierarchy and accessibility</name>
  <files>app/monitoring/page.js</files>
  <action>
Ensure proper heading hierarchy:

1. **Page title should be h1:**
   - "Health Monitoring" as Heading level={1}

2. **Section titles should be h2:**
   - "Cronologia Eventi (7 giorni)" as Heading level={2}

3. **External components:**
   - ConnectionStatusCard and DeadManSwitchPanel should use level={3} or lower internally
   - Do not modify these components in this plan

4. **Verify Button usage:**
   - Back button uses Button variant="ghost"
   - Any other interactive elements use Button

5. **Check Text usage:**
   - Ensure any descriptive text uses Text component
   - No raw `<p>` or `<span>` with manual styling

**Add aria-label to scroll container if needed:**
```javascript
<div
  id="monitoring-scroll-container"
  className="max-h-[600px] overflow-y-auto"
  role="region"
  aria-label="Cronologia eventi"
  tabIndex={0}
>
```
  </action>
  <verify>
- Use browser dev tools to check heading hierarchy
- Test keyboard navigation (Tab to scroll container)
  </verify>
  <done>Monitoring page has proper heading hierarchy and accessibility attributes</done>
</task>

</tasks>

<verification>
1. Monitoring page loads at localhost:3000/monitoring
2. Status cards grid responsive (2 cols on desktop, 1 on mobile)
3. Heading hierarchy: h1 > h2 (no skipped levels)
4. Timeline scrolls correctly
5. Back button works
6. No console errors
</verification>

<success_criteria>
- Grid component used for status cards layout
- Section component used for content organization
- Proper heading hierarchy (h1, h2)
- External monitoring components unchanged (separate concern)
</success_criteria>

<output>
After completion, create `.planning/phases/16-page-migration/16-05-SUMMARY.md`
</output>
