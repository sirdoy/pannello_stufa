---
phase: 19-stove-card-compliance
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/devices/stove/StoveCard.js
autonomous: true

must_haves:
  truths:
    - "User sees 'Torna in Automatico' rendered using Button component with ember variant"
    - "User sees 'Configura Pianificazione' rendered using Button component with consistent styling"
    - "Mode action buttons have proper focus states and accessibility attributes"
  artifacts:
    - path: "app/components/devices/stove/StoveCard.js"
      provides: "Button component usage for mode action buttons"
      contains: "<Button"
  key_links:
    - from: "StoveCard.js"
      to: "Button component"
      via: "import Button from '../../ui/Button'"
      pattern: "import.*Button.*from.*ui/Button"
---

<objective>
Migrate raw HTML button elements in StoveCard mode action section to design system Button component.

Purpose: Replace raw `<button>` elements with Button component for consistent styling, accessibility (focus ring, disabled states), and design system compliance per STOVE-01 and STOVE-02 requirements.

Output: StoveCard with Button component for "Torna in Automatico" (ember variant) and "Configura Pianificazione" (subtle/ghost variant) actions.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/19-stove-card-compliance/19-CONTEXT.md
@.planning/phases/19-stove-card-compliance/19-RESEARCH.md
@app/components/devices/stove/StoveCard.js
@app/components/ui/Button.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace raw button elements with Button component</name>
  <files>app/components/devices/stove/StoveCard.js</files>
  <action>
In StoveCard.js, locate the mode indicator section (around lines 1050-1066) containing two raw `<button>` elements:

1. **"Torna in Automatico" button** (lines 1052-1057):
   Current: raw `<button>` with inline Tailwind classes (warning color scheme)
   Replace with:
   ```jsx
   <Button
     variant="ember"
     size="sm"
     onClick={handleClearSemiManual}
   >
     Torna in Automatico
   </Button>
   ```
   Per CONTEXT.md decision: uses `ember` variant (primary action)
   Remove the arrow emoji prefix - Button styling makes it clear it's an action

2. **"Configura Pianificazione" button** (lines 1059-1064):
   Current: raw `<button>` with inline Tailwind classes (ocean color scheme)
   Replace with:
   ```jsx
   <Button
     variant="subtle"
     size="sm"
     onClick={() => router.push('/stove/scheduler')}
   >
     Configura Pianificazione
   </Button>
   ```
   Use `subtle` variant (secondary action, less prominent than ember)

3. **Verify Button import exists** - Button is already imported at line 17:
   `import Button from '../../ui/Button';`

4. **Container styling** - Keep the existing flex container `<div className="flex flex-col sm:flex-row gap-2 sm:gap-3">` unchanged.

**DO NOT modify:**
- Primary action buttons (ACCENDI/SPEGNI) - already use Button component
- ControlButton usage for fan/power controls
- Any other UI elements
  </action>
  <verify>
1. Run `npm test -- --testPathPattern=StoveCard --passWithNoTests` to verify no regressions
2. Grep to confirm no raw button elements remain in mode section:
   `grep -n "<button" app/components/devices/stove/StoveCard.js` should return 0 results
3. Grep to confirm Button usage:
   `grep -n "variant=\"ember\"" app/components/devices/stove/StoveCard.js` should show the Torna in Automatico button
  </verify>
  <done>
- "Torna in Automatico" uses Button with variant="ember" and size="sm"
- "Configura Pianificazione" uses Button with variant="subtle" and size="sm"
- No raw `<button>` elements remain in StoveCard.js
- All existing tests pass
  </done>
</task>

<task type="auto">
  <name>Task 2: Add accessibility attributes to mode buttons</name>
  <files>app/components/devices/stove/StoveCard.js</files>
  <action>
Enhance the Button components with accessibility attributes per CONTEXT.md decisions:

1. **"Torna in Automatico" button** - Add descriptive aria-label:
   ```jsx
   <Button
     variant="ember"
     size="sm"
     onClick={handleClearSemiManual}
     aria-label="Torna alla modalita automatica"
   >
     Torna in Automatico
   </Button>
   ```

2. **"Configura Pianificazione" button** - Add aria-label for clarity:
   ```jsx
   <Button
     variant="subtle"
     size="sm"
     onClick={() => router.push('/stove/scheduler')}
     aria-label="Vai alle impostazioni di pianificazione"
   >
     Configura Pianificazione
   </Button>
   ```

**Note:** The Button component already provides:
- `focus-visible:ring-2 focus-visible:ring-ember-500/50` focus states
- `disabled:opacity-50 disabled:cursor-not-allowed` disabled handling
- Proper button semantics

No need to add `type="button"` - React Button component handles this.
  </action>
  <verify>
1. Grep for aria-label attributes:
   `grep -n 'aria-label=' app/components/devices/stove/StoveCard.js | grep -E "(Torna|Pianificazione)"` should return 2 lines
2. Dev server check: `npm run dev` should start without errors
  </verify>
  <done>
- Both mode action buttons have descriptive aria-label attributes
- Button component's built-in accessibility features are utilized
- No accessibility warnings in dev console
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm test` - All existing tests pass
2. Visual check in dev server: Mode indicator section shows properly styled buttons
3. Keyboard navigation: Tab to buttons shows ember glow focus ring
4. No raw `<button>` elements in StoveCard.js (grep confirms)
</verification>

<success_criteria>
- Zero raw `<button>` elements in StoveCard.js
- "Torna in Automatico" uses Button variant="ember"
- "Configura Pianificazione" uses Button variant="subtle"
- All buttons have aria-label for accessibility
- All existing tests pass
- Visual styling matches design system (ember glow focus, proper hover states)
</success_criteria>

<output>
After completion, create `.planning/phases/19-stove-card-compliance/19-01-SUMMARY.md`
</output>
