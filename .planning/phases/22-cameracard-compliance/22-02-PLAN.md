---
phase: 22-cameracard-compliance
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/devices/camera/HlsPlayer.js
autonomous: true

must_haves:
  truths:
    - "HlsPlayer fullscreen toggle button uses Button.Icon instead of raw button element"
    - "Fullscreen button has proper aria-label that updates based on fullscreen state"
    - "Button preserves absolute positioning, backdrop blur, and z-index"
  artifacts:
    - path: "app/components/devices/camera/HlsPlayer.js"
      provides: "Design system compliant fullscreen button"
      contains: "Button.Icon"
  key_links:
    - from: "HlsPlayer.js"
      to: "Button component"
      via: "import from ui barrel"
      pattern: "import.*Button.*from.*ui"
---

<objective>
Replace the raw fullscreen toggle button in HlsPlayer with design system Button.Icon component.

Purpose: Complete design system compliance for camera video player - the final raw button in camera components.

Output: HlsPlayer.js using Button.Icon for fullscreen toggle with conditional icon based on fullscreen state and proper accessibility.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-cameracard-compliance/22-RESEARCH.md
@app/components/devices/camera/HlsPlayer.js
@app/components/ui/Button.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Button and lucide-react imports to HlsPlayer</name>
  <files>app/components/devices/camera/HlsPlayer.js</files>
  <action>
1. Add lucide-react import for Maximize and Minimize icons:
   ```javascript
   import { Maximize, Minimize } from 'lucide-react';
   ```

2. Update the ui import to include Button (currently only imports Text on line 4):
   ```javascript
   import { Text, Button } from '../../ui';
   ```
  </action>
  <verify>
- lucide-react import includes Maximize, Minimize
- Button imported from ../../ui
  </verify>
  <done>HlsPlayer has all required imports for Button.Icon migration</done>
</task>

<task type="auto">
  <name>Task 2: Replace fullscreen toggle button with Button.Icon</name>
  <files>app/components/devices/camera/HlsPlayer.js</files>
  <action>
Replace the fullscreen button (lines 264-280) with Button.Icon:

```jsx
<Button.Icon
  icon={isFullscreen ? <Minimize className="w-5 h-5 text-white" /> : <Maximize className="w-5 h-5 text-white" />}
  onClick={toggleFullscreen}
  variant="ghost"
  size="sm"
  aria-label={isFullscreen ? 'Esci da schermo intero' : 'Schermo intero'}
  className="absolute bottom-2 right-2 bg-slate-900/70 backdrop-blur-sm hover:bg-slate-800/90 z-20"
/>
```

Key requirements:
- Use Maximize/Minimize icons from lucide-react (replaces inline SVGs)
- Conditional icon based on isFullscreen state
- Conditional aria-label in Italian for screen readers
- Preserve all positioning classes: absolute bottom-2 right-2 z-20
- Preserve backdrop styling: bg-slate-900/70 backdrop-blur-sm
- Preserve hover state: hover:bg-slate-800/90
- Use ghost variant (transparent by default, matches overlay style)
- Use size="sm" to match original icon size (w-5 h-5)
  </action>
  <verify>
- No raw `<button>` element for fullscreen toggle
- Button.Icon used with conditional icon prop
- aria-label updates based on isFullscreen state
- Icon classes include text-white for visibility
- z-20 preserved for proper stacking in fullscreen mode
  </verify>
  <done>HlsPlayer fullscreen button uses Button.Icon with dynamic icon/label and proper overlay styling</done>
</task>

</tasks>

<verification>
Run these checks after all tasks complete:

```bash
# Verify no raw buttons remain in HlsPlayer
grep -n "<button" app/components/devices/camera/HlsPlayer.js

# Verify lucide-react icons imported
grep -n "lucide-react" app/components/devices/camera/HlsPlayer.js

# Verify Button imported
grep -n "Button" app/components/devices/camera/HlsPlayer.js

# Verify Button.Icon usage
grep -n "Button.Icon" app/components/devices/camera/HlsPlayer.js

# Verify aria-label present
grep -n "aria-label" app/components/devices/camera/HlsPlayer.js
```

Expected results:
- grep for `<button` returns NO matches
- lucide-react imports Maximize, Minimize
- Button imported from ui
- Button.Icon used for fullscreen toggle
- aria-label with conditional value found
</verification>

<success_criteria>
1. Zero raw `<button>` elements in HlsPlayer.js
2. Button.Icon used for fullscreen toggle with proper aria-label
3. Icon switches between Maximize/Minimize based on fullscreen state
4. aria-label in Italian changes based on fullscreen state
5. Visual appearance unchanged (absolute positioning, backdrop blur, z-index preserved)
6. Fullscreen functionality still works correctly
</success_criteria>

<output>
After completion, create `.planning/phases/22-cameracard-compliance/22-02-SUMMARY.md`
</output>
