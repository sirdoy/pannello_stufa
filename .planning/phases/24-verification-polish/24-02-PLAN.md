---
phase: 24-verification-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md
autonomous: true

must_haves:
  truths:
    - "grep verification confirms zero raw <button> elements in device components"
    - "grep verification confirms zero raw <input> elements in device components"
    - "Verification report documents element detection with evidence"
  artifacts:
    - path: ".planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md"
      provides: "Raw element elimination evidence"
      contains: "## VERIFY-02"
  key_links:
    - from: "device components"
      to: "Button component"
      via: "import"
      pattern: "import.*Button"
---

<objective>
Verify complete elimination of raw HTML elements (<button>, <input>) from device components using grep pattern matching and document results.

Purpose: Satisfy VERIFY-02 (zero raw button elements) and VERIFY-03 (zero raw input elements) with objective evidence.
Output: Updated verification report with grep execution results documenting element elimination.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-verification-polish/24-RESEARCH.md
</context>

<scope>
**Target directories (device components from Phases 19-23):**
- `app/components/devices/` - All device card components
- `app/thermostat/page.js` - Thermostat page only (NOT schedule subcomponents)

**Exclusions:**
- `**/__tests__/**` - Test files may contain raw elements for testing purposes
- `app/thermostat/schedule/` - Schedule UI is v2.0 scope, not v3.1 compliance scope
- `app/components/ui/` - UI primitives legitimately contain raw elements (Button.js wraps <button>)
</scope>

<tasks>

<task type="auto">
  <name>Task 1: Verify zero raw button elements in device components</name>
  <files>.planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md</files>
  <action>
Run grep to detect raw `<button` elements in device components directory:

```bash
grep -r "<button" app/components/devices/ --include="*.js" | grep -v "__tests__" | grep -v ".test.js"
```

Also check thermostat page specifically:
```bash
grep "<button" app/thermostat/page.js
```

**Expected result:** No matches (empty output) for device components.

If matches found, document each occurrence with:
- File path
- Line number
- Code snippet
- Assessment (legitimate use vs needs migration)

Update verification report with VERIFY-02 section:

```markdown
## VERIFY-02: Raw Button Element Verification

### Grep Command
\`\`\`bash
grep -r "<button" app/components/devices/ --include="*.js" | grep -v "__tests__"
\`\`\`

### Results

**Device Components Directory:**
- StoveCard.js: No raw buttons
- ThermostatCard.js: No raw buttons
- LightsCard.js: No raw buttons
- CameraCard.js: No raw buttons
- EventPreviewModal.js: No raw buttons
- HlsPlayer.js: No raw buttons

**Thermostat Page:**
- page.js: No raw buttons

### Evidence
\`\`\`
[grep output or "No matches found"]
\`\`\`

### Status: VERIFIED / FAILED
- Total raw <button> elements found: 0
- All interactive buttons use Button component from design system
```
  </action>
  <verify>Verification report contains "VERIFY-02" section</verify>
  <done>Raw button verification documented with grep evidence</done>
</task>

<task type="auto">
  <name>Task 2: Verify zero raw input elements in device components</name>
  <files>.planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md</files>
  <action>
Run grep to detect raw `<input` elements in device components:

```bash
grep -r "<input" app/components/devices/ --include="*.js" | grep -v "__tests__" | grep -v ".test.js"
```

Also check thermostat page:
```bash
grep "<input" app/thermostat/page.js
```

**Expected result:** No matches (empty output).

Note: Raw `<input type="range">` should be replaced by Slider component.
Raw `<input type="text">` should be replaced by Input component.

Update verification report with VERIFY-03 section:

```markdown
## VERIFY-03: Raw Input Element Verification

### Grep Command
\`\`\`bash
grep -r "<input" app/components/devices/ --include="*.js" | grep -v "__tests__"
\`\`\`

### Results

**Device Components Directory:**
- StoveCard.js: No raw inputs
- ThermostatCard.js: No raw inputs
- LightsCard.js: No raw inputs (uses Slider component)
- CameraCard.js: No raw inputs
- EventPreviewModal.js: No raw inputs
- HlsPlayer.js: No raw inputs

**Thermostat Page:**
- page.js: No raw inputs

### Evidence
\`\`\`
[grep output or "No matches found"]
\`\`\`

### Status: VERIFIED / FAILED
- Total raw <input> elements found: 0
- All form inputs use Input/Slider components from design system
```
  </action>
  <verify>Verification report contains "VERIFY-03" section</verify>
  <done>Raw input verification documented with grep evidence</done>
</task>

<task type="auto">
  <name>Task 3: Create component inventory matrix</name>
  <files>.planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md</files>
  <action>
Create comprehensive component inventory documenting compliance status for each migrated component.

Run comprehensive check on each file:

```bash
for file in app/components/devices/stove/StoveCard.js \
            app/components/devices/thermostat/ThermostatCard.js \
            app/components/devices/lights/LightsCard.js \
            app/components/devices/camera/CameraCard.js \
            app/components/devices/camera/EventPreviewModal.js \
            app/components/devices/camera/HlsPlayer.js \
            app/thermostat/page.js; do
  echo "=== $file ==="
  echo "Buttons: $(grep -c '<button' $file 2>/dev/null || echo 0)"
  echo "Inputs: $(grep -c '<input' $file 2>/dev/null || echo 0)"
  echo "Uses Button: $(grep -c 'import.*Button' $file 2>/dev/null || echo 0)"
  echo "Uses Slider: $(grep -c 'import.*Slider' $file 2>/dev/null || echo 0)"
done
```

Add inventory matrix to verification report:

```markdown
## Component Inventory Matrix

| Component | Phase | Raw Buttons | Raw Inputs | Uses Button | Uses Slider | Status |
|-----------|-------|-------------|------------|-------------|-------------|--------|
| StoveCard.js | 19 | 0 | 0 | Yes | No | COMPLIANT |
| ThermostatCard.js | 20 | 0 | 0 | Yes | Yes | COMPLIANT |
| LightsCard.js | 21 | 0 | 0 | Yes | Yes | COMPLIANT |
| CameraCard.js | 22 | 0 | 0 | Yes | No | COMPLIANT |
| EventPreviewModal.js | 22 | 0 | 0 | Yes | No | COMPLIANT |
| HlsPlayer.js | 22 | 0 | 0 | Yes | No | COMPLIANT |
| page.js (thermostat) | 23 | 0 | 0 | Yes | No | COMPLIANT |

### Summary
- **Total components verified:** 7
- **Compliant:** 7
- **Non-compliant:** 0
- **Compliance rate:** 100%
```

Update Requirements Summary table with VERIFY-02 and VERIFY-03 status.
  </action>
  <verify>Verification report contains "Component Inventory Matrix" section</verify>
  <done>Component inventory matrix created with compliance status for all migrated components</done>
</task>

</tasks>

<verification>
1. Verification report contains VERIFY-02 section with grep evidence
2. Verification report contains VERIFY-03 section with grep evidence
3. Component inventory matrix documents all 7 target files
4. Requirements Summary updated with VERIFY-02 and VERIFY-03 status
</verification>

<success_criteria>
- grep executed against device components for <button> patterns
- grep executed against device components for <input> patterns
- All 7 target files documented in inventory matrix
- VERIFY-02 and VERIFY-03 requirements marked VERIFIED or FAILED with evidence
- Zero non-compliant components found (expected based on Phases 19-23 work)
</success_criteria>

<output>
After completion, create `.planning/phases/24-verification-polish/24-02-SUMMARY.md`
</output>
