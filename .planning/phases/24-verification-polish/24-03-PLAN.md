---
phase: 24-verification-polish
plan: 03
type: execute
wave: 2
depends_on: ["24-01", "24-02"]
files_modified:
  - .planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md
  - .planning/ROADMAP.md
autonomous: false

must_haves:
  truths:
    - "Visual consistency verified across all device cards"
    - "Final verification report complete with all 4 requirements documented"
    - "Phase 24 marked complete in roadmap"
  artifacts:
    - path: ".planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md"
      provides: "Complete verification report with all requirements"
      contains: "## VERIFY-04"
  key_links:
    - from: "24-01-SUMMARY.md"
      to: "verification report"
      via: "ESLint results"
    - from: "24-02-SUMMARY.md"
      to: "verification report"
      via: "grep results"
---

<objective>
Complete visual consistency verification with human checkpoint, run all component tests, and finalize the verification report.

Purpose: Satisfy VERIFY-04 (visual consistency confirmed) and complete the v3.1 Design System Compliance milestone.
Output: Final verification report with all 4 requirements verified, phase marked complete.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-verification-polish/24-RESEARCH.md
@.planning/phases/24-verification-polish/24-01-SUMMARY.md
@.planning/phases/24-verification-polish/24-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run component test suite</name>
  <files>.planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md</files>
  <action>
Run the full test suite to verify no regressions from the design system compliance work:

```bash
npm test -- --passWithNoTests --testPathPattern="components/devices|thermostat/page" 2>&1
```

Also run accessibility tests for device components:

```bash
npm test -- --passWithNoTests --testPathPattern="devices.*test" 2>&1
```

Update verification report with test results:

```markdown
## Test Suite Verification

### Device Component Tests

\`\`\`bash
npm test -- --testPathPattern="components/devices|thermostat/page"
\`\`\`

**Results:**
\`\`\`
[paste test output]
\`\`\`

### Summary
- Tests passed: [X]
- Tests failed: [Y]
- Test suites: [Z]
- Status: PASS / FAIL

### Accessibility Tests
- jest-axe violations: 0
- All device components accessible
```

If any tests fail, document the failure and assess if it's related to compliance work or pre-existing.
  </action>
  <verify>Verification report contains "Test Suite Verification" section</verify>
  <done>Test results documented in verification report</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete design system compliance verification across all device components:
- Phase 19: StoveCard migrated to Button, Badge, HealthIndicator
- Phase 20: ThermostatCard migrated to Button, Slider, Badge
- Phase 21: LightsCard migrated to Button, Slider, Badge
- Phase 22: CameraCard, EventPreviewModal, HlsPlayer migrated to Button
- Phase 23: Thermostat page migrated to PageLayout, InfoBox, Button
- Plans 24-01 and 24-02 verified ESLint and grep compliance
  </what-built>
  <how-to-verify>
**Start the dev server:**
```bash
npm run dev
```

**Visual Inspection Checklist:**

1. **Dashboard (http://localhost:3000)**
   - [ ] All device cards render correctly
   - [ ] Buttons have consistent ember glow focus rings
   - [ ] Badges use consistent colors (ember/sage/ocean/warning/danger/neutral)
   - [ ] Cards have consistent spacing and borders
   - [ ] No visual regressions from previous versions

2. **Stove Card (expand on dashboard or /stove)**
   - [ ] "Torna in Automatico" button uses Button component styling
   - [ ] "Configura Pianificazione" button uses Button component styling
   - [ ] Status badge uses CVA variants (ember/sage/danger)
   - [ ] Health indicator displays correctly
   - [ ] Mode buttons (Manuale/Automatico/Semi) have consistent styling

3. **Thermostat Card (expand on dashboard)**
   - [ ] Temperature controls use Button component
   - [ ] Mode grid buttons use consistent variants
   - [ ] Slider (if present) uses design system Slider component
   - [ ] Badge colors consistent with other cards

4. **Lights Card (expand on dashboard or /lights)**
   - [ ] Brightness slider uses design system Slider
   - [ ] Scene buttons use Button component
   - [ ] Toggle button uses consistent styling
   - [ ] No raw HTML input elements visible

5. **Camera Card (expand on dashboard or /camera)**
   - [ ] Refresh button uses Button.Icon
   - [ ] Event preview modal uses Button components
   - [ ] HlsPlayer controls use Button.Icon
   - [ ] Consistent styling with other cards

6. **Thermostat Page (http://localhost:3000/thermostat)**
   - [ ] Page uses PageLayout wrapper
   - [ ] Mode buttons use colorScheme variants
   - [ ] Info boxes use InfoBox component
   - [ ] Consistent typography and spacing

**Cross-Component Consistency:**
- [ ] All ember glow focus rings identical
- [ ] All card borders use rounded-2xl
- [ ] All badges use same pulse animation
- [ ] Color palette consistent (ember, sage, ocean colors)
- [ ] Spacing consistent (p-5 sm:p-6 for card content)
  </how-to-verify>
  <resume-signal>Type "approved" with notes on visual consistency, or describe any issues found</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Complete verification report</name>
  <files>.planning/phases/24-verification-polish/24-VERIFICATION-REPORT.md</files>
  <action>
Based on visual inspection results, complete the verification report:

```markdown
## VERIFY-04: Visual Consistency Verification

### Inspection Date
[date]

### Inspection Method
Manual browser-based visual inspection of all device components

### Results

| Component | Visual Check | Consistency | Status |
|-----------|-------------|-------------|--------|
| StoveCard | PASS | Matches design system | VERIFIED |
| ThermostatCard | PASS | Matches design system | VERIFIED |
| LightsCard | PASS | Matches design system | VERIFIED |
| CameraCard | PASS | Matches design system | VERIFIED |
| Thermostat Page | PASS | Uses PageLayout correctly | VERIFIED |

### Visual Consistency Observations
- [Note any observations from human verification]
- [Document any minor inconsistencies that don't block completion]

### Status: VERIFIED
Human inspection confirms visual consistency across all device cards.
```

Then add final summary section:

```markdown
---

## Final Verification Summary

### Requirements Status

| ID | Requirement | Status | Evidence |
|----|-------------|--------|----------|
| VERIFY-01 | All device cards pass ESLint | VERIFIED | Plan 24-01: 0 arbitrary value warnings |
| VERIFY-02 | Zero raw <button> elements | VERIFIED | Plan 24-02: grep returns 0 matches |
| VERIFY-03 | Zero raw <input> elements | VERIFIED | Plan 24-02: grep returns 0 matches |
| VERIFY-04 | Visual consistency confirmed | VERIFIED | Plan 24-03: Human inspection approved |

### Milestone Completion

**v3.1 Design System Compliance: COMPLETE**

- Phases completed: 6 (19-24)
- Total plans: 13
- All device components now use design system components
- Zero raw HTML elements in target scope
- Visual consistency verified

### Verification Date
[date]

### Verified By
Claude (automated checks) + Human (visual inspection)
```
  </action>
  <verify>Verification report contains "Final Verification Summary" section with all 4 requirements VERIFIED</verify>
  <done>Complete verification report documenting full compliance</done>
</task>

<task type="auto">
  <name>Task 4: Update roadmap to mark Phase 24 complete</name>
  <files>.planning/ROADMAP.md</files>
  <action>
Update ROADMAP.md to mark Phase 24 complete:

1. Change the Phase 24 plans from `- [ ]` to `- [x]`
2. Update the Progress table row for Phase 24:
   - Plans Complete: `3/3`
   - Status: `Complete`
   - Completed: `[today's date]`
3. Update the Phase 24 section's "Plans: TBD" to "Plans: 3 plans (complete)"

The milestone section should now show all 6 phases (19-24) complete.
  </action>
  <verify>`grep -c "24-0[1-3]-PLAN.md" .planning/ROADMAP.md` returns 3 with all marked [x]</verify>
  <done>Roadmap updated with Phase 24 completion status</done>
</task>

</tasks>

<verification>
1. Test suite executed with results documented
2. Human visual inspection completed and approved
3. VERIFY-04 documented in verification report
4. Final verification summary with all 4 requirements VERIFIED
5. Roadmap updated with Phase 24 complete
</verification>

<success_criteria>
- All component tests pass (no regressions)
- Human verifies visual consistency across all device cards
- Complete verification report with 4/4 requirements VERIFIED
- Phase 24 marked complete in roadmap
- v3.1 milestone ready for completion
</success_criteria>

<output>
After completion, create `.planning/phases/24-verification-polish/24-03-SUMMARY.md`
</output>
