---
phase: 31-expandable-components
plan: 03
type: execute
wave: 2
depends_on: ["31-01", "31-02"]
files_modified:
  - app/(dashboard)/debug/design-system/page.js
autonomous: false

must_haves:
  truths:
    - "Accordion is demonstrated in design system debug page"
    - "Sheet is demonstrated in design system debug page"
    - "Both components work correctly with Ember Noir styling"
  artifacts:
    - path: "app/(dashboard)/debug/design-system/page.js"
      provides: "Accordion and Sheet demo sections"
      contains: "Accordion"
  key_links:
    - from: "app/(dashboard)/debug/design-system/page.js"
      to: "app/components/ui/Accordion.js"
      via: "import from barrel"
      pattern: "import.*Accordion.*from"
    - from: "app/(dashboard)/debug/design-system/page.js"
      to: "app/components/ui/Sheet.js"
      via: "import from barrel"
      pattern: "import.*Sheet.*from"
---

<objective>
Apply Accordion and Sheet components to the design system debug page for demonstration and visual verification.

Purpose: Provide real usage examples and enable visual testing of the new expandable components.
Output: Design system page updated with Accordion and Sheet sections.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/31-expandable-components/31-01-SUMMARY.md
@.planning/phases/31-expandable-components/31-02-SUMMARY.md
@app/(dashboard)/debug/design-system/page.js
@app/components/ui/Accordion.js
@app/components/ui/Sheet.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Accordion section to design system page</name>
  <files>app/(dashboard)/debug/design-system/page.js</files>
  <action>
1. Import Accordion from the UI barrel:
   ```javascript
   import { Accordion } from '@/app/components/ui';
   ```

2. Add an "Accordion" section following the existing section pattern in the design system page:
   - Section heading using existing Heading component
   - Two demo groups: Single Mode and Multiple Mode

3. **Single Mode Demo:**
   ```jsx
   <div className="space-y-4">
     <Text variant="body-sm" className="text-slate-400">
       type="single" - Only one item open at a time
     </Text>
     <Accordion type="single" collapsible defaultValue="faq-1">
       <Accordion.Item value="faq-1">
         <Accordion.Trigger>Come posso programmare la stufa?</Accordion.Trigger>
         <Accordion.Content>
           Puoi programmare la stufa usando la sezione Schedule nel pannello di
           controllo. Imposta orari e temperature per ogni giorno della settimana.
         </Accordion.Content>
       </Accordion.Item>
       <Accordion.Item value="faq-2">
         <Accordion.Trigger>Cosa significa "needsCleaning"?</Accordion.Trigger>
         <Accordion.Content>
           La stufa richiede manutenzione quando ha funzionato per il numero
           di ore configurato. L'accensione automatica viene bloccata fino
           alla pulizia.
         </Accordion.Content>
       </Accordion.Item>
       <Accordion.Item value="faq-3">
         <Accordion.Trigger>Come funziona il termostato?</Accordion.Trigger>
         <Accordion.Content>
           Il termostato Netatmo si collega via WiFi e permette di controllare
           la temperatura ambiente. Supporta modalità manuale, programmata e
           assente.
         </Accordion.Content>
       </Accordion.Item>
     </Accordion>
   </div>
   ```

4. **Multiple Mode Demo:**
   ```jsx
   <div className="space-y-4">
     <Text variant="body-sm" className="text-slate-400">
       type="multiple" - Multiple items can be open
     </Text>
     <Accordion type="multiple" defaultValue={['info-1', 'info-2']}>
       <Accordion.Item value="info-1">
         <Accordion.Trigger>Informazioni dispositivo</Accordion.Trigger>
         <Accordion.Content>
           Modello: Thermorossi 1000<br/>
           Firmware: v2.4.1<br/>
           Ultima connessione: Oggi, 10:30
         </Accordion.Content>
       </Accordion.Item>
       <Accordion.Item value="info-2">
         <Accordion.Trigger>Statistiche di utilizzo</Accordion.Trigger>
         <Accordion.Content>
           Ore totali: 1,234h<br/>
           Consumo pellet: ~500kg/stagione<br/>
           Efficienza: 92%
         </Accordion.Content>
       </Accordion.Item>
       <Accordion.Item value="info-3">
         <Accordion.Trigger>Manutenzione programmata</Accordion.Trigger>
         <Accordion.Content>
           Prossima pulizia: tra 48 ore<br/>
           Ultimo servizio: 2026-01-15
         </Accordion.Content>
       </Accordion.Item>
     </Accordion>
   </div>
   ```
  </action>
  <verify>
- `grep -n "Accordion" app/\\(dashboard\\)/debug/design-system/page.js` shows import and usage
- Dev server shows Accordion section on /debug/design-system
  </verify>
  <done>
- Accordion section added to design system page
- Single mode demo with FAQ content
- Multiple mode demo with device info
- Both demos working correctly
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Sheet section to design system page</name>
  <files>app/(dashboard)/debug/design-system/page.js</files>
  <action>
1. Import Sheet from the UI barrel (add to existing import):
   ```javascript
   import { Accordion, Sheet, Button } from '@/app/components/ui';
   ```

2. Add a "Sheet" section after Accordion section:
   - Section heading
   - Four demo buttons for each side

3. **Sheet demos using useState for controlled open state:**

   Add state at component level:
   ```javascript
   const [bottomSheetOpen, setBottomSheetOpen] = useState(false);
   const [rightSheetOpen, setRightSheetOpen] = useState(false);
   const [leftSheetOpen, setLeftSheetOpen] = useState(false);
   const [topSheetOpen, setTopSheetOpen] = useState(false);
   ```

4. **Demo buttons grid:**
   ```jsx
   <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
     <Button variant="subtle" onClick={() => setBottomSheetOpen(true)}>
       Bottom Sheet
     </Button>
     <Button variant="subtle" onClick={() => setRightSheetOpen(true)}>
       Right Sheet
     </Button>
     <Button variant="subtle" onClick={() => setLeftSheetOpen(true)}>
       Left Sheet
     </Button>
     <Button variant="subtle" onClick={() => setTopSheetOpen(true)}>
       Top Sheet
     </Button>
   </div>
   ```

5. **Sheet components (outside the button grid):**

   **Bottom Sheet (settings form pattern):**
   ```jsx
   <Sheet open={bottomSheetOpen} onOpenChange={setBottomSheetOpen}>
     <Sheet.Content side="bottom" size="md">
       <Sheet.Header>
         <Sheet.Title>Impostazioni Stufa</Sheet.Title>
         <Sheet.Description>
           Configura i parametri della tua stufa
         </Sheet.Description>
       </Sheet.Header>
       <div className="space-y-4 py-4">
         <div className="flex items-center justify-between">
           <Text>Temperatura target</Text>
           <Text className="text-ember-400">22°C</Text>
         </div>
         <div className="flex items-center justify-between">
           <Text>Modalità</Text>
           <Text className="text-ember-400">Automatica</Text>
         </div>
       </div>
       <Sheet.Footer>
         <Button variant="subtle" onClick={() => setBottomSheetOpen(false)}>
           Annulla
         </Button>
         <Button variant="ember" onClick={() => setBottomSheetOpen(false)}>
           Salva
         </Button>
       </Sheet.Footer>
     </Sheet.Content>
   </Sheet>
   ```

   **Right Sheet (detail view pattern):**
   ```jsx
   <Sheet open={rightSheetOpen} onOpenChange={setRightSheetOpen}>
     <Sheet.Content side="right" size="md">
       <Sheet.Header>
         <Sheet.Title>Dettagli Dispositivo</Sheet.Title>
         <Sheet.Description>Stufa Thermorossi</Sheet.Description>
       </Sheet.Header>
       <div className="space-y-4 py-4">
         <div>
           <Text variant="body-sm" className="text-slate-400">Stato</Text>
           <Text className="text-sage-400">Online</Text>
         </div>
         <div>
           <Text variant="body-sm" className="text-slate-400">Temperatura</Text>
           <Text className="text-3xl font-display">21°C</Text>
         </div>
         <div>
           <Text variant="body-sm" className="text-slate-400">Ore di funzionamento</Text>
           <Text>1,234h</Text>
         </div>
       </div>
     </Sheet.Content>
   </Sheet>
   ```

   **Left Sheet (navigation pattern):**
   ```jsx
   <Sheet open={leftSheetOpen} onOpenChange={setLeftSheetOpen}>
     <Sheet.Content side="left" size="sm">
       <Sheet.Header>
         <Sheet.Title>Menu</Sheet.Title>
       </Sheet.Header>
       <nav className="space-y-2 py-4">
         <Button variant="ghost" className="w-full justify-start">Dashboard</Button>
         <Button variant="ghost" className="w-full justify-start">Dispositivi</Button>
         <Button variant="ghost" className="w-full justify-start">Impostazioni</Button>
         <Button variant="ghost" className="w-full justify-start">Aiuto</Button>
       </nav>
     </Sheet.Content>
   </Sheet>
   ```

   **Top Sheet (notification pattern):**
   ```jsx
   <Sheet open={topSheetOpen} onOpenChange={setTopSheetOpen}>
     <Sheet.Content side="top" size="sm">
       <Sheet.Header>
         <Sheet.Title>Notifica</Sheet.Title>
         <Sheet.Description>
           La stufa ha completato il ciclo di riscaldamento.
         </Sheet.Description>
       </Sheet.Header>
       <Sheet.Footer>
         <Button variant="ember" onClick={() => setTopSheetOpen(false)}>
           OK
         </Button>
       </Sheet.Footer>
     </Sheet.Content>
   </Sheet>
   ```
  </action>
  <verify>
- `grep -n "Sheet" app/\\(dashboard\\)/debug/design-system/page.js` shows import and usage
- Dev server shows Sheet section on /debug/design-system
- All four sheet directions open correctly
  </verify>
  <done>
- Sheet section added to design system page
- Four sheet variants demonstrated (bottom, right, left, top)
- Real-world patterns shown (settings, detail, nav, notification)
- All sheets working correctly
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Accordion and Sheet components demonstrated on design system debug page with:
    - Accordion: Single mode (FAQ) and Multiple mode (device info)
    - Sheet: All four sides (bottom, right, left, top) with realistic content
  </what-built>
  <how-to-verify>
    1. Start dev server: `npm run dev`
    2. Navigate to http://localhost:3000/debug/design-system
    3. Scroll to find "Accordion" section
    4. **Accordion Single Mode:**
       - Click FAQ items - only one should be open at a time
       - Click same item again - it should close (collapsible)
       - Press Enter/Space on focused trigger - should toggle
       - Use arrow keys to navigate between items
    5. **Accordion Multiple Mode:**
       - First two items should be open by default
       - Click third item - all three can be open
       - Items operate independently
    6. **Sheet variants:**
       - Click "Bottom Sheet" - slides up from bottom, has settings form
       - Click backdrop or close button - closes smoothly
       - Click "Right Sheet" - slides in from right, has device details
       - Click "Left Sheet" - slides in from left, has nav menu
       - Click "Top Sheet" - slides down from top, has notification
    7. **Accessibility:**
       - Tab through accordion triggers - focus ring visible
       - Tab within sheet - focus trapped
       - Press Escape in sheet - closes and returns focus
    8. **Animation:**
       - Accordion expand/collapse is smooth (no flicker)
       - Sheet slide animations are smooth
       - Backdrop fades in/out
  </how-to-verify>
  <resume-signal>Type "approved" if all components work correctly, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Design system page loads without errors**
2. **Accordion demos work:**
   - Single mode: one open at a time
   - Multiple mode: independent expansion
   - Keyboard navigation works
   - Animations smooth
3. **Sheet demos work:**
   - All four sides slide correctly
   - Backdrop click closes
   - Escape closes
   - Focus trapped
   - iOS safe area on bottom (check mobile view)
</verification>

<success_criteria>
- [ ] Accordion section added to design system page
- [ ] Single and multiple mode demos present
- [ ] Sheet section added to design system page
- [ ] All four side variants demonstrated
- [ ] User verified components work correctly
- [ ] Animations smooth, no flicker
- [ ] Keyboard navigation functional
- [ ] Accessibility verified (focus management)
</success_criteria>

<output>
After completion, create `.planning/phases/31-expandable-components/31-03-SUMMARY.md`
</output>
