---
phase: 32-action-components
plan: 03
type: execute
wave: 2
depends_on: ["32-01", "32-02"]
files_modified:
  - app/debug/design-system/page.js
  - app/globals.css
autonomous: false

must_haves:
  truths:
    - "Design system page shows RightClickMenu component demo"
    - "Design system page shows CommandPalette component demo"
    - "Design system page shows Kbd component demo"
    - "User can test right-click context menu on demo area"
    - "User can test Cmd+K to open Command Palette"
  artifacts:
    - path: "app/debug/design-system/page.js"
      provides: "Component documentation and demos"
      contains: ["RightClickMenu", "CommandPalette", "Kbd"]
  key_links:
    - from: "app/debug/design-system/page.js"
      to: "app/components/ui/RightClickMenu.js"
      via: "import"
      pattern: "import.*RightClickMenu"
    - from: "app/debug/design-system/page.js"
      to: "app/components/ui/CommandPalette.js"
      via: "import"
      pattern: "import.*CommandPalette"
---

<objective>
Add RightClickMenu, CommandPalette, and Kbd components to design system documentation page.

Purpose: Document new action components for design system reference. Provide interactive demos for testing right-click and keyboard shortcuts. Verify components work correctly before Phase 36 integration.
Output: Updated design system page with Action Components section and working demos.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/32-action-components/32-01-SUMMARY.md
@.planning/phases/32-action-components/32-02-SUMMARY.md
@app/debug/design-system/page.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Action Components section to design system page</name>
  <files>
    - app/debug/design-system/page.js
    - app/globals.css
  </files>
  <action>
1. Open `app/debug/design-system/page.js` and add new section for Action Components.

2. Add imports at top:
   ```javascript
   import { RightClickMenu, CommandPalette, Kbd } from '@/components/ui';
   import { CommandPaletteProvider } from '@/components/layout/CommandPaletteProvider';
   import { useLongPress } from '@/hooks/useLongPress';
   import { Home, Settings, Power, Moon, Edit, Trash2, Copy, Share } from 'lucide-react';
   ```

3. Add state for demos:
   ```javascript
   const [commandPaletteOpen, setCommandPaletteOpen] = useState(false);
   const [menuCheckboxState, setMenuCheckboxState] = useState(false);
   ```

4. Create Action Components section after existing sections (after Accordion/Sheet):

   ```jsx
   {/* Action Components Section */}
   <Section title="Action Components" id="action-components">
     <Text variant="muted" className="mb-6">
       Context menus and command palettes for quick actions and power-user navigation.
     </Text>

     {/* Kbd Component */}
     <Card className="mb-8">
       <Card.Header>
         <Heading variant="section">Kbd (Keyboard Shortcut)</Heading>
       </Card.Header>
       <Card.Content>
         <div className="flex flex-wrap gap-4 mb-4">
           <Kbd>Cmd+K</Kbd>
           <Kbd>Ctrl+K</Kbd>
           <Kbd>Enter</Kbd>
           <Kbd>Esc</Kbd>
           <Kbd>Arrow+Down</Kbd>
         </div>
         <Text variant="muted">
           Display keyboard shortcuts with consistent styling.
         </Text>
       </Card.Content>
     </Card>

     {/* RightClickMenu Component */}
     <Card className="mb-8">
       <Card.Header>
         <Heading variant="section">RightClickMenu (Context Menu)</Heading>
       </Card.Header>
       <Card.Content>
         <RightClickMenu>
           <RightClickMenu.Trigger asChild>
             <div className="
               p-8 rounded-xl border-2 border-dashed border-slate-700
               text-center cursor-context-menu
               hover:border-ember-500/50 transition-colors
             ">
               <Text variant="muted">Right-click here (desktop) or long-press (mobile)</Text>
             </div>
           </RightClickMenu.Trigger>
           <RightClickMenu.Content>
             <RightClickMenu.Label>Actions</RightClickMenu.Label>
             <RightClickMenu.Item icon={<Edit className="w-4 h-4" />}>
               Edit
             </RightClickMenu.Item>
             <RightClickMenu.Item icon={<Copy className="w-4 h-4" />}>
               Duplicate
             </RightClickMenu.Item>
             <RightClickMenu.Item icon={<Share className="w-4 h-4" />}>
               Share
             </RightClickMenu.Item>
             <RightClickMenu.Separator />
             <RightClickMenu.CheckboxItem
               checked={menuCheckboxState}
               onCheckedChange={setMenuCheckboxState}
               icon={<Power className="w-4 h-4" />}
             >
               Auto Mode
             </RightClickMenu.CheckboxItem>
             <RightClickMenu.Separator />
             <RightClickMenu.Item icon={<Trash2 className="w-4 h-4" />}>
               Delete
             </RightClickMenu.Item>
           </RightClickMenu.Content>
         </RightClickMenu>

         <div className="mt-4 space-y-2">
           <Text variant="muted">Features:</Text>
           <ul className="list-disc list-inside text-slate-400 text-sm space-y-1">
             <li>Right-click trigger (desktop)</li>
             <li>Long-press trigger (mobile) with scale animation</li>
             <li>Keyboard navigation (arrows, Enter, Escape)</li>
             <li>Checkable items for toggle states</li>
             <li>Haptic feedback on mobile</li>
           </ul>
         </div>
       </Card.Content>
     </Card>

     {/* CommandPalette Component */}
     <Card className="mb-8">
       <Card.Header>
         <Heading variant="section">CommandPalette</Heading>
       </Card.Header>
       <Card.Content>
         <div className="flex flex-wrap gap-4 mb-4">
           <Button onClick={() => setCommandPaletteOpen(true)}>
             Open Command Palette
           </Button>
           <Text variant="muted" className="self-center">
             or press <Kbd>Cmd+K</Kbd>
           </Text>
         </div>

         <CommandPalette
           open={commandPaletteOpen}
           onOpenChange={setCommandPaletteOpen}
           commands={[
             {
               heading: 'Navigation',
               items: [
                 { id: 'demo-home', label: 'Dashboard', icon: <Home className="w-4 h-4" />, shortcut: 'Cmd+D', onSelect: () => console.log('Navigate home') },
                 { id: 'demo-settings', label: 'Settings', icon: <Settings className="w-4 h-4" />, shortcut: 'Cmd+,', onSelect: () => console.log('Navigate settings') },
               ]
             },
             {
               heading: 'Actions',
               items: [
                 { id: 'demo-power', label: 'Toggle Power', icon: <Power className="w-4 h-4" />, onSelect: () => console.log('Toggle power') },
                 { id: 'demo-theme', label: 'Toggle Theme', icon: <Moon className="w-4 h-4" />, onSelect: () => console.log('Toggle theme') },
               ]
             },
           ]}
         />

         <div className="mt-4 space-y-2">
           <Text variant="muted">Features:</Text>
           <ul className="list-disc list-inside text-slate-400 text-sm space-y-1">
             <li>Global <Kbd>Cmd+K</Kbd> / <Kbd>Ctrl+K</Kbd> shortcut</li>
             <li>Fuzzy search filtering</li>
             <li>Arrow key navigation with wrapping</li>
             <li>Grouped commands with section headers</li>
             <li>Full-screen on mobile</li>
             <li>Haptic feedback on selection</li>
           </ul>
         </div>
       </Card.Content>
     </Card>
   </Section>
   ```

5. If any additional CSS animations are needed for context menu, add to globals.css:
   ```css
   /* Context Menu scale animation (if not already present) */
   @keyframes scale-in {
     from { opacity: 0; transform: scale(0.95); }
     to { opacity: 1; transform: scale(1); }
   }
   .animate-scale-in {
     animation: scale-in 150ms ease-out;
   }
   ```

6. Update the page's table of contents if it has one, adding "Action Components" link.
  </action>
  <verify>
    - `grep "RightClickMenu" app/debug/design-system/page.js` shows import and usage
    - `grep "CommandPalette" app/debug/design-system/page.js` shows import and usage
    - `grep "Kbd" app/debug/design-system/page.js` shows import and usage
    - No console errors when loading the page
  </verify>
  <done>
    - Design system page has Action Components section
    - Kbd component demo shows various shortcuts
    - RightClickMenu demo with right-click area
    - CommandPalette demo with button trigger
    - Feature lists document capabilities
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify Action Components functionality</name>
  <what-built>
    Action Components section added to design system page with:
    - Kbd component showing keyboard shortcut styling
    - RightClickMenu with right-click/long-press trigger area
    - CommandPalette with button trigger and Cmd+K shortcut
  </what-built>
  <how-to-verify>
    1. Start dev server: `npm run dev`
    2. Navigate to http://localhost:3000/debug/design-system
    3. Scroll to "Action Components" section

    **Kbd Component:**
    - Verify keyboard shortcuts display with proper styling (monospace, bordered)
    - Check both dark and light mode appearance

    **RightClickMenu:**
    - Right-click on the dashed border area (desktop)
    - Verify menu appears with items: Edit, Duplicate, Share, Auto Mode checkbox, Delete
    - Test arrow key navigation (up/down should move focus)
    - Press Enter to select an item (menu should close)
    - Press Escape to close menu
    - On mobile: long-press should trigger menu with scale animation

    **CommandPalette:**
    - Click "Open Command Palette" button
    - Verify modal appears with search input
    - Type to filter commands (fuzzy search)
    - Use arrow keys to navigate
    - Press Enter to execute (closes palette)
    - Press Escape to close
    - Press Cmd+K (Mac) or Ctrl+K (Windows) from anywhere on page

    **Accessibility:**
    - Tab through interactive elements
    - Verify focus is visible
    - Menu items should be navigable with keyboard
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. Design system page loads without errors
2. Right-click menu opens on context menu event
3. Command Palette opens with Cmd+K
4. All keyboard navigation works
5. Mobile responsiveness verified
6. Human verification checkpoint passed
</verification>

<success_criteria>
- Design system page has Action Components section
- Kbd, RightClickMenu, CommandPalette all rendered
- Interactive demos work correctly
- Keyboard navigation verified
- Human verification approved
- Ready for Phase 36 application integration
</success_criteria>

<output>
After completion, create `.planning/phases/32-action-components/32-03-SUMMARY.md`
</output>
