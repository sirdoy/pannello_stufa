---
phase: 35-micro-interactions
plan: 04
type: execute
wave: 3
depends_on: ["35-01"]
files_modified:
  - app/settings/devices/page.js
  - app/settings/notifications/devices/page.js
autonomous: true

must_haves:
  truths:
    - "Device list items cascade into view on page load"
    - "Each device card animates slightly after the previous one"
    - "Animation feels cohesive, not chaotic"
  artifacts:
    - path: "app/settings/devices/page.js"
      provides: "Device preferences list with stagger animation"
      contains: "stagger-item"
    - path: "app/settings/notifications/devices/page.js"
      provides: "Notification devices list with stagger animation"
      contains: "stagger-item"
  key_links:
    - from: "app/settings/devices/page.js"
      to: "app/globals.css"
      via: "stagger-item class"
      pattern: "stagger-item.*--stagger-index"
---

<objective>
Apply the stagger animation system to device lists, making items cascade smoothly into view.

Purpose: Demonstrate the stagger system on real application lists for polished UX
Output: Device lists animate with cascading entrance effect
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/35-micro-interactions/35-01-SUMMARY.md
@.planning/phases/35-micro-interactions/35-CONTEXT.md
@app/settings/devices/page.js
@app/settings/notifications/devices/page.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply stagger to device preferences list</name>
  <files>app/settings/devices/page.js</files>
  <action>
Find the `devices.map(device => {` section (around line 160) where device cards are rendered.

Add stagger animation to each device card:

```jsx
{devices.map((device, index) => {
  const isEnabled = preferences[device.id] === true;

  return (
    <div
      key={device.id}
      className="stagger-item ..." // Add stagger-item to existing classes
      style={{ '--stagger-index': index }}
    >
      {/* existing card content */}
    </div>
  );
})}
```

The stagger-item class from globals.css will apply:
- `animation: stagger-fade-in var(--duration-smooth) var(--ease-enter) both`
- `animation-delay: calc(var(--stagger-index, 0) * var(--stagger-base))`

Keep all existing functionality - only add the stagger animation.
  </action>
  <verify>
Grep devices/page.js for "stagger-item" - should exist.
Grep devices/page.js for "--stagger-index" - should exist.
Load /settings/devices in browser - cards should cascade in.
  </verify>
  <done>
Device preferences list uses stagger animation - cards cascade into view on page load
  </done>
</task>

<task type="auto">
  <name>Task 2: Apply stagger to notification devices list</name>
  <files>app/settings/notifications/devices/page.js</files>
  <action>
Find the `devices.map(device => (` section (around line 171) where DeviceListItem components are rendered.

Add stagger animation to the wrapper around each DeviceListItem:

```jsx
{devices.map((device, index) => (
  <div
    key={device.tokenKey}
    className="stagger-item"
    style={{ '--stagger-index': index }}
  >
    <DeviceListItem
      device={device}
      onRemove={handleRemoveDevice}
      onMakeDefault={handleMakeDefault}
    />
  </div>
))}
```

If DeviceListItem already has a wrapping div, add the stagger-item class and style to it instead.

Keep all existing functionality - only add the stagger animation.
  </action>
  <verify>
Grep notifications/devices/page.js for "stagger-item" - should exist.
Grep notifications/devices/page.js for "--stagger-index" - should exist.
Load /settings/notifications/devices in browser - items should cascade in.
  </verify>
  <done>
Notification devices list uses stagger animation - items cascade into view on page load
  </done>
</task>

</tasks>

<verification>
1. Device settings page cards cascade into view
2. Notification devices page items cascade into view
3. Animation feels cohesive (smooth cascade, not chaotic)
4. Reduced motion users see instant appearance (no animation)
</verification>

<success_criteria>
- Both device lists have stagger-item class applied
- Each item has --stagger-index CSS variable set to its index
- Items cascade smoothly on page load
- No JavaScript errors in console
</success_criteria>

<output>
After completion, create `.planning/phases/35-micro-interactions/35-04-SUMMARY.md`
</output>
