---
phase: 39-ui-components-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/ui/Button.js
  - app/components/ui/ControlButton.js
  - app/components/ui/Input.js
  - app/components/ui/Checkbox.js
  - app/components/ui/Switch.js
  - app/components/ui/Toggle.js
  - app/components/ui/Slider.js
  - app/components/ui/Select.js
  - app/components/ui/RadioGroup.js
  - app/components/ui/Progress.js
  - app/components/ui/Pagination.js
  - app/components/ui/ConfirmDialog.js
  - app/components/ui/ContextMenu.js
  - app/components/ui/RoomSelector.js
autonomous: true

must_haves:
  truths:
    - "All 14 form and interaction UI components have .tsx extension"
    - "Every component exports a Props interface or type"
    - "Form components extend appropriate HTML element attributes"
    - "tsc --noEmit passes with zero errors on migrated files"
  artifacts:
    - path: "app/components/ui/Button.tsx"
      provides: "Button component with CVA VariantProps + ButtonHTMLAttributes"
    - path: "app/components/ui/Input.tsx"
      provides: "Input component with InputHTMLAttributes"
    - path: "app/components/ui/Select.tsx"
      provides: "Select component with Radix Select props"
    - path: "app/components/ui/Checkbox.tsx"
      provides: "Checkbox component with Radix Checkbox props"
    - path: "app/components/ui/Switch.tsx"
      provides: "Switch component with Radix Switch props"
  key_links:
    - from: "app/components/ui/Button.tsx"
      to: "class-variance-authority"
      via: "VariantProps<typeof buttonVariants>"
      pattern: "VariantProps<typeof buttonVariants>"
    - from: "app/components/ui/Select.tsx"
      to: "@radix-ui/react-select"
      via: "ComponentPropsWithoutRef"
      pattern: "ComponentPropsWithoutRef<typeof"
    - from: "app/components/ui/Toggle.tsx"
      to: "app/components/ui/Switch.tsx"
      via: "re-export"
      pattern: "export.*from.*Switch"
---

<objective>
Migrate 14 form and interaction design system components from .js to .tsx with typed props.

Purpose: These are interactive components (buttons, inputs, selects, checkboxes) that accept user input. They need precise typing for event handlers, form attributes, and Radix UI primitives. Migrating them in parallel with Plan 01 (foundation components) maximizes throughput while maintaining zero tsc errors.

Output: 14 .tsx files with exported Props interfaces, using CVA VariantProps, Radix ComponentPropsWithoutRef, and HTML form element attributes as appropriate.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/39-ui-components-migration/39-CONTEXT.md
@.planning/phases/39-ui-components-migration/39-RESEARCH.md
@types/components/common.ts
@app/components/ui/index.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate button and simple interaction components (7 files)</name>
  <files>
    app/components/ui/Button.js -> Button.tsx
    app/components/ui/ControlButton.js -> ControlButton.tsx
    app/components/ui/Pagination.js -> Pagination.tsx
    app/components/ui/ConfirmDialog.js -> ConfirmDialog.tsx
    app/components/ui/ContextMenu.js -> ContextMenu.tsx
    app/components/ui/RoomSelector.js -> RoomSelector.tsx
    app/components/ui/Toggle.js -> Toggle.tsx
  </files>
  <action>
For each file:
1. `git mv ComponentName.js ComponentName.tsx` to preserve git history
2. Add Props interface extending appropriate attributes
3. Type all function parameters and return types
4. Use `import type` for type-only imports
5. Preserve existing component API exactly

Key considerations per component:
- **Button** (372 lines, CVA + forwardRef): `ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement>, VariantProps<typeof buttonVariants>` with loading, icon, iconPosition props. This is the most important component — get the pattern right here.
- **ControlButton** (191 lines, CVA + forwardRef): Similar to Button but with control-specific props (increment/decrement pattern)
- **Pagination** (55 lines): Simple props — currentPage, totalPages, onPageChange callback
- **ConfirmDialog** (118 lines): Dialog props — open, onClose, onConfirm, title, message, variant
- **ContextMenu** (98 lines): Simple context menu wrapper — may use Radix context menu or custom
- **RoomSelector** (64 lines): Room selection props — rooms list, selected, onChange
- **Toggle** (2 lines, deprecated re-export): Just change extension, keep re-export from Switch

Run `npx tsc --noEmit` after completing all 7 to verify zero errors.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -c "error TS"` — must be 0. Check files exist: `ls app/components/ui/{Button,ControlButton,Pagination,ConfirmDialog,ContextMenu,RoomSelector,Toggle}.tsx`</verify>
  <done>7 button/interaction components converted to .tsx with exported Props interfaces, zero tsc errors</done>
</task>

<task type="auto">
  <name>Task 2: Migrate form input components (7 files)</name>
  <files>
    app/components/ui/Input.js -> Input.tsx
    app/components/ui/Checkbox.js -> Checkbox.tsx
    app/components/ui/Switch.js -> Switch.tsx
    app/components/ui/Slider.js -> Slider.tsx
    app/components/ui/Select.js -> Select.tsx
    app/components/ui/RadioGroup.js -> RadioGroup.tsx
    app/components/ui/Progress.js -> Progress.tsx
  </files>
  <action>
For each file:
1. `git mv ComponentName.js ComponentName.tsx` to preserve git history
2. Add Props interface
3. For Radix components: extend `React.ComponentPropsWithoutRef<typeof RadixPrimitive.Root>` (or appropriate sub-primitive)
4. For CVA components: use `VariantProps<typeof xxxVariants>`
5. For forwardRef components: add explicit generics
6. Type event handler callbacks with React event types when handler uses event properties
7. Use `import type` for type-only imports
8. Preserve existing component API exactly

Key considerations per component:
- **Input** (256 lines, CVA + forwardRef + Radix): Complex — extends InputHTMLAttributes, has CVA variants, may use Radix primitives. Type left/right icon slots, error state, label.
- **Checkbox** (199 lines, Radix + forwardRef): `CheckboxProps extends ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>` with label, description props
- **Switch** (154 lines, Radix + forwardRef + CVA): `SwitchProps extends ComponentPropsWithoutRef<typeof SwitchPrimitive.Root>, VariantProps<typeof switchVariants>`
- **Slider** (209 lines, Radix + CVA): `SliderProps extends ComponentPropsWithoutRef<typeof SliderPrimitive.Root>` with min, max, step, label
- **Select** (377 lines, Radix + forwardRef): Complex namespace-like with Trigger, Content, Item subcomponents — type each subcomponent's props
- **RadioGroup** (188 lines, Radix + forwardRef): `RadioGroupProps` and `RadioGroupItemProps` extending Radix primitives
- **Progress** (122 lines, CVA + forwardRef): `ProgressProps extends VariantProps<typeof progressVariants>` with value, max, label

Run `npx tsc --noEmit` after completing all 7 to verify zero errors.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -c "error TS"` — must be 0. Check files exist: `ls app/components/ui/{Input,Checkbox,Switch,Slider,Select,RadioGroup,Progress}.tsx`</verify>
  <done>7 form input components converted to .tsx with exported Props interfaces, zero tsc errors across entire project</done>
</task>

</tasks>

<verification>
After both tasks:
1. `ls app/components/ui/*.js | wc -l` should show 27 remaining (41 from Plan 01 remaining - 14 = 27, or if parallel: 64 - 14 = 50 if Plan 01 not run yet)
2. `ls app/components/ui/*.tsx | wc -l` should show 14 (or 37 if Plan 01 also complete)
3. `npx tsc --noEmit 2>&1 | grep -c "error TS"` returns 0
4. `npm test -- --passWithNoTests 2>&1 | tail -5` — existing tests still pass
</verification>

<success_criteria>
- All 14 form/interaction components have .tsx extension
- Every component exports a Props interface or type
- Radix components use ComponentPropsWithoutRef pattern
- CVA components use VariantProps pattern
- forwardRef components have explicit generic types
- Event handlers use appropriate React event types
- Zero tsc errors
</success_criteria>

<output>
After completion, create `.planning/phases/39-ui-components-migration/39-02-SUMMARY.md`
</output>
