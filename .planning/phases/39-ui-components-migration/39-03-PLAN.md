---
phase: 39-ui-components-migration
plan: 03
type: execute
wave: 2
depends_on: ["39-01", "39-02"]
files_modified:
  - app/components/ui/Tabs.js
  - app/components/ui/Accordion.js
  - app/components/ui/Sheet.js
  - app/components/ui/Card.js
  - app/components/ui/Popover.js
  - app/components/ui/Tooltip.js
  - app/components/ui/RightClickMenu.js
  - app/components/ui/Toast.js
  - app/components/ui/ToastProvider.js
  - app/components/ui/PageLayout.js
  - app/components/ui/Banner.js
  - app/components/ui/Modal.js
autonomous: true

must_haves:
  truths:
    - "All 12 namespace/Radix components have .tsx extension"
    - "Namespace patterns preserved (Tabs.List, Accordion.Item, Sheet.Content, etc.)"
    - "Each subcomponent has its own exported Props interface"
    - "tsc --noEmit passes with zero errors"
  artifacts:
    - path: "app/components/ui/Tabs.tsx"
      provides: "Tabs with namespace (List, Trigger, Content) + Radix props"
    - path: "app/components/ui/Sheet.tsx"
      provides: "Sheet with namespace (Trigger, Content, Header, Footer, Title, Description, Close)"
    - path: "app/components/ui/Accordion.tsx"
      provides: "Accordion with namespace (Item, Trigger, Content) + Radix props"
    - path: "app/components/ui/Card.tsx"
      provides: "Card with namespace (Header, Title, Content, Footer, Divider)"
    - path: "app/components/ui/RightClickMenu.tsx"
      provides: "RightClickMenu with namespace (Trigger, Content, Item, CheckboxItem, Separator, Label, Group)"
  key_links:
    - from: "app/components/ui/Tabs.tsx"
      to: "@radix-ui/react-tabs"
      via: "ComponentPropsWithoutRef<typeof TabsPrimitive.*>"
      pattern: "ComponentPropsWithoutRef<typeof TabsPrimitive"
    - from: "app/components/ui/Sheet.tsx"
      to: "@radix-ui/react-dialog"
      via: "ComponentPropsWithoutRef<typeof DialogPrimitive.*>"
      pattern: "ComponentPropsWithoutRef<typeof"
    - from: "app/components/ui/ToastProvider.tsx"
      to: "app/components/ui/Toast.tsx"
      via: "import Toast"
      pattern: "import.*Toast"
---

<objective>
Migrate 12 namespace and Radix UI wrapper design system components from .js to .tsx with typed props.

Purpose: These are the most architecturally complex design system components — they use Radix UI primitives, namespace patterns (Parent.Child), forwardRef on subcomponents, and CVA variants. Typing them correctly requires extending Radix ComponentPropsWithoutRef and preserving the namespace assignment pattern.

Output: 12 .tsx files with exported Props interfaces for both parent and all subcomponents, using Radix ComponentPropsWithoutRef, CVA VariantProps, and preserved namespace patterns.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/39-ui-components-migration/39-CONTEXT.md
@.planning/phases/39-ui-components-migration/39-RESEARCH.md
@types/components/common.ts
@app/components/ui/index.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Radix namespace components (6 files)</name>
  <files>
    app/components/ui/Tabs.js -> Tabs.tsx
    app/components/ui/Accordion.js -> Accordion.tsx
    app/components/ui/Sheet.js -> Sheet.tsx
    app/components/ui/Popover.js -> Popover.tsx
    app/components/ui/Tooltip.js -> Tooltip.tsx
    app/components/ui/RightClickMenu.js -> RightClickMenu.tsx
  </files>
  <action>
For each file:
1. `git mv ComponentName.js ComponentName.tsx` to preserve git history
2. Create Props interface for EACH subcomponent, extending Radix primitives
3. Use `React.ComponentPropsWithoutRef<typeof RadixPrimitive.SubComponent>` for Radix-wrapped subcomponents
4. For CVA-styled subcomponents: also extend `VariantProps<typeof subVariants>`
5. For forwardRef subcomponents: add explicit generics `forwardRef<HTMLElement, SubComponentProps>`
6. Preserve namespace assignment pattern (e.g., `Tabs.List = TabsList;`)
7. Export both namespace parent and individual subcomponents
8. Set displayName on all forwardRef subcomponents
9. Use `import type` for type-only imports

Pattern for each namespace component:
```typescript
// For each subcomponent
export interface TabsListProps
  extends React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>,
    VariantProps<typeof listVariants> {}

const TabsList = forwardRef<HTMLDivElement, TabsListProps>(
  function TabsList({ ... }, ref) { ... }
);

// Main component
export interface TabsProps
  extends React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root> {}

function Tabs({ ... }: TabsProps) { ... }

// Namespace
Tabs.List = TabsList;
// etc.
```

Specific notes:
- **Tabs** (263 lines, 8 namespace): List, Trigger, Content — uses TabsPrimitive from @radix-ui/react-tabs
- **Accordion** (207 lines, 6 namespace): Item, Trigger, Content — uses AccordionPrimitive
- **Sheet** (299 lines, 15 namespace): Trigger, Content, Header, Footer, Title, Description, Close — uses DialogPrimitive from @radix-ui/react-dialog
- **Popover** (269 lines, 12 namespace): Trigger, Content, Close, Arrow — uses PopoverPrimitive
- **Tooltip** (119 lines, 4 namespace): Provider, Trigger, Content — uses TooltipPrimitive
- **RightClickMenu** (305 lines, 14 namespace): Trigger, Content, Item, CheckboxItem, Separator, Label, Group — uses ContextMenuPrimitive

Run `npx tsc --noEmit` after completing all 6 to verify zero errors.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -c "error TS"` — must be 0. Check files: `ls app/components/ui/{Tabs,Accordion,Sheet,Popover,Tooltip,RightClickMenu}.tsx`</verify>
  <done>6 Radix namespace components converted to .tsx with typed props for all subcomponents, namespace patterns preserved, zero tsc errors</done>
</task>

<task type="auto">
  <name>Task 2: Migrate non-Radix namespace and overlay components (6 files)</name>
  <files>
    app/components/ui/Card.js -> Card.tsx
    app/components/ui/Toast.js -> Toast.tsx
    app/components/ui/ToastProvider.js -> ToastProvider.tsx
    app/components/ui/PageLayout.js -> PageLayout.tsx
    app/components/ui/Banner.js -> Banner.tsx
    app/components/ui/Modal.js -> Modal.tsx
  </files>
  <action>
For each file:
1. `git mv ComponentName.js ComponentName.tsx` to preserve git history
2. Create Props interface for parent and all subcomponents
3. For Radix-based (Toast, Modal): extend ComponentPropsWithoutRef
4. For CVA-based: use VariantProps
5. For forwardRef: add explicit generics
6. Preserve namespace patterns
7. Type context values for components using createContext (ToastProvider)

Specific notes:
- **Card** (222 lines, 5 namespace: Header, Title, Content, Footer, Divider): Non-Radix namespace. Each subcomponent extends HTMLAttributes. forwardRef on Card and subcomponents.
- **Toast** (179 lines, Radix + CVA): Uses @radix-ui/react-toast. Type ToastProps with variant, action, title. ToastViewport as separate export.
- **ToastProvider** (120 lines, createContext): Type the toast context value interface: `{ toast, dismiss, dismissAll, success, error, warning, info }`. Type toast options: `{ variant, message, title, duration, action }`. Use `createContext<ToastContextValue | null>(null)` instead of `createContext(null)`.
- **PageLayout** (212 lines, 3 namespace: Header, Content, Footer + CVA): Subcomponents extend HTMLAttributes + VariantProps.
- **Banner** (268 lines, CVA): May have dismiss, icon, variant props. Type all.
- **Modal** (276 lines, Radix Dialog): Complex — extend DialogPrimitive props. Type onClose, title, description.

Run `npx tsc --noEmit` after completing all 6 to verify zero errors.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -c "error TS"` — must be 0. Check files: `ls app/components/ui/{Card,Toast,ToastProvider,PageLayout,Banner,Modal}.tsx`</verify>
  <done>6 namespace/overlay components converted to .tsx with typed props for all subcomponents, context types defined, zero tsc errors across entire project</done>
</task>

</tasks>

<verification>
After both tasks:
1. `ls app/components/ui/*.js | wc -l` should show ~15 remaining
2. `ls app/components/ui/*.tsx | wc -l` should show ~49 (if Plans 01+02 also complete)
3. `npx tsc --noEmit 2>&1 | grep -c "error TS"` returns 0
4. All namespace patterns preserved (Tabs.List, Card.Header, Sheet.Content, etc. still work)
</verification>

<success_criteria>
- All 12 namespace/overlay components have .tsx extension
- Every parent component AND subcomponent exports Props interface
- Radix components use ComponentPropsWithoutRef<typeof Primitive.*>
- CVA components use VariantProps
- Namespace assignment pattern preserved (Parent.Child = ChildComponent)
- Both namespace and individual exports work
- ToastProvider context is properly typed
- Zero tsc errors
</success_criteria>

<output>
After completion, create `.planning/phases/39-ui-components-migration/39-03-SUMMARY.md`
</output>
