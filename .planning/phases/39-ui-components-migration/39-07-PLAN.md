---
phase: 39-ui-components-migration
plan: 07
type: execute
wave: 4
depends_on: ["39-05"]
files_modified:
  - app/components/scheduler/AddIntervalModal.js
  - app/components/scheduler/CreateScheduleModal.js
  - app/components/scheduler/DayAccordionItem.js
  - app/components/scheduler/DayEditPanel.js
  - app/components/scheduler/DayScheduleCard.js
  - app/components/scheduler/DuplicateDayModal.js
  - app/components/scheduler/index.js
  - app/components/scheduler/IntervalBottomSheet.js
  - app/components/scheduler/ScheduleInterval.js
  - app/components/scheduler/ScheduleManagementModal.js
  - app/components/scheduler/ScheduleSelector.js
  - app/components/scheduler/TimeBar.js
  - app/components/scheduler/WeeklySummaryCard.js
  - app/components/scheduler/WeeklyTimeline.js
autonomous: true

must_haves:
  truths:
    - "All 14 scheduler components have .tsx/.ts extension"
    - "Schedule data types properly defined (intervals, days, modes)"
    - "tsc --noEmit passes with zero errors"
  artifacts:
    - path: "app/components/scheduler/ScheduleManagementModal.tsx"
      provides: "Schedule management modal typed"
    - path: "app/components/scheduler/DayAccordionItem.tsx"
      provides: "Day accordion with typed interval data"
    - path: "app/components/scheduler/index.ts"
      provides: "Scheduler barrel export"
  key_links:
    - from: "app/components/scheduler/*.tsx"
      to: "app/components/ui/index.ts"
      via: "import { Accordion, Sheet, Modal, ... } from '@/app/components/ui'"
      pattern: "from.*@/app/components/ui"
    - from: "app/components/scheduler/*.tsx"
      to: "lib/ scheduler services"
      via: "import from @/lib/"
      pattern: "from.*@/lib/"
---

<objective>
Migrate 14 scheduler components from .js to .tsx with typed props.

Purpose: The scheduler system is a self-contained domain with its own data types (intervals, schedules, days, time bars). These components form a vertical feature slice — they depend on the design system (now typed) and lib/scheduler services (typed in Phase 38) but not on other app components.

Output: 14 .tsx/.ts files with exported Props interfaces, typed schedule data structures, and typed callbacks.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/39-ui-components-migration/39-CONTEXT.md
@.planning/phases/39-ui-components-migration/39-RESEARCH.md
@types/components/common.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate schedule display and editing components (7 files)</name>
  <files>
    app/components/scheduler/DayScheduleCard.js -> DayScheduleCard.tsx
    app/components/scheduler/DayAccordionItem.js -> DayAccordionItem.tsx
    app/components/scheduler/DayEditPanel.js -> DayEditPanel.tsx
    app/components/scheduler/ScheduleInterval.js -> ScheduleInterval.tsx
    app/components/scheduler/TimeBar.js -> TimeBar.tsx
    app/components/scheduler/WeeklySummaryCard.js -> WeeklySummaryCard.tsx
    app/components/scheduler/WeeklyTimeline.js -> WeeklyTimeline.tsx
  </files>
  <action>
For each file:
1. `git mv ComponentName.js ComponentName.tsx` to preserve git history
2. Add Props interface with schedule-specific types
3. Type interval data: `{ start: string, end: string, power: number, temperature?: number }`
4. Type day data: `{ day: string, intervals: Interval[] }`
5. Use existing types from `@/types` and `@/lib/` where available (scheduler service types from Phase 38)
6. Type event handlers (onIntervalAdd, onIntervalDelete, onDayEdit, etc.)
7. Preserve existing component API exactly

Specific notes:
- **DayScheduleCard**: Displays a day's schedule — type day name, intervals list, edit/delete callbacks
- **DayAccordionItem** (238 lines): Uses Accordion from design system — type accordion-specific props + schedule data
- **DayEditPanel**: Editing interface for a single day — type intervals, add/remove/modify callbacks
- **ScheduleInterval**: Single interval display — type start/end times, power level, temperature
- **TimeBar**: Visual time representation — type time range, segments, colors
- **WeeklySummaryCard**: Week overview — type weekly schedule data
- **WeeklyTimeline**: Timeline visualization — type time slots, active periods

If schedule types already exist in @/types or lib/scheduler, import and reuse them. If not, define local interfaces that can be extracted later.

Run `npx tsc --noEmit` after completing all 7 to verify zero errors.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -c "error TS"` — must be 0. Check files: `ls app/components/scheduler/{DayScheduleCard,DayAccordionItem,DayEditPanel,ScheduleInterval,TimeBar,WeeklySummaryCard,WeeklyTimeline}.tsx`</verify>
  <done>7 schedule display/editing components converted to .tsx with typed schedule data, zero tsc errors</done>
</task>

<task type="auto">
  <name>Task 2: Migrate schedule modal and management components (7 files)</name>
  <files>
    app/components/scheduler/AddIntervalModal.js -> AddIntervalModal.tsx
    app/components/scheduler/CreateScheduleModal.js -> CreateScheduleModal.tsx
    app/components/scheduler/DuplicateDayModal.js -> DuplicateDayModal.tsx
    app/components/scheduler/IntervalBottomSheet.js -> IntervalBottomSheet.tsx
    app/components/scheduler/ScheduleManagementModal.js -> ScheduleManagementModal.tsx
    app/components/scheduler/ScheduleSelector.js -> ScheduleSelector.tsx
    app/components/scheduler/index.js -> index.ts
  </files>
  <action>
For each component file:
1. `git mv ComponentName.js ComponentName.tsx` to preserve git history
2. Add Props interface with modal-specific types (open, onClose, onSubmit, etc.)
3. Type form state (useState generics for form data)
4. Type validation and error state
5. Use typed imports from design system and lib/scheduler

For the barrel:
6. `git mv index.js index.ts`
7. Update all exports to reference .tsx files (TypeScript resolves automatically)
8. Ensure all public components are exported

Specific notes:
- **AddIntervalModal** (309 lines): Form modal — type interval form data, time inputs, power/temp selection, validation errors. Props: open, onClose, onAdd callback with typed interval data.
- **CreateScheduleModal** (223 lines): Schedule creation — type name input, base template selection, onSubmit.
- **DuplicateDayModal**: Copy day schedule — type sourceDay, targetDays, onDuplicate.
- **IntervalBottomSheet** (mobile editing): Bottom sheet for interval editing — type interval data, edit/delete handlers.
- **ScheduleManagementModal** (336 lines): Largest modal — type schedule list, CRUD operations, active schedule selection.
- **ScheduleSelector** (200 lines): Dropdown/select for choosing schedules — type schedule list, selected, onChange.
- **index.ts**: Barrel export — export all 13 components

Run `npx tsc --noEmit` after completing all 7 to verify zero errors.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -c "error TS"` — must be 0. Check files: `ls app/components/scheduler/{AddIntervalModal,CreateScheduleModal,DuplicateDayModal,IntervalBottomSheet,ScheduleManagementModal,ScheduleSelector}.tsx app/components/scheduler/index.ts`</verify>
  <done>7 schedule modal/management components + barrel export converted to .tsx/.ts, zero tsc errors across entire project</done>
</task>

</tasks>

<verification>
After both tasks:
1. `find app/components/scheduler -name "*.js" -o -name "*.jsx" | wc -l` = 0
2. `find app/components/scheduler \( -name "*.tsx" -o -name "*.ts" \) | wc -l` = 14
3. `npx tsc --noEmit 2>&1 | grep -c "error TS"` = 0
</verification>

<success_criteria>
- All 14 scheduler files have .tsx/.ts extension
- Schedule data types properly defined and consistent across components
- Modal props typed (open, onClose, onSubmit patterns)
- Form state typed with useState generics
- Barrel export updated to .ts
- Zero tsc errors
</success_criteria>

<output>
After completion, create `.planning/phases/39-ui-components-migration/39-07-SUMMARY.md`
</output>
