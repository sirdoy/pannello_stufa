---
phase: 42-test-migration
plan: 04
type: execute
wave: 2
depends_on: ["42-01"]
files_modified:
  - app/components/ui/__tests__/accessibility.test.tsx
  - app/components/ui/__tests__/Accordion.test.tsx
  - app/components/ui/__tests__/ActionButton.test.tsx
  - app/components/ui/__tests__/Badge.test.tsx
  - app/components/ui/__tests__/Banner.test.tsx
  - app/components/ui/__tests__/BottomSheet.test.tsx
  - app/components/ui/__tests__/Button.test.tsx
  - app/components/ui/__tests__/Card.test.tsx
  - app/components/ui/__tests__/Checkbox.test.tsx
  - app/components/ui/__tests__/CommandPalette.test.tsx
  - app/components/ui/__tests__/ConfirmationDialog.test.tsx
  - app/components/ui/__tests__/ConfirmDialog.test.tsx
  - app/components/ui/__tests__/ConnectionStatus.test.tsx
  - app/components/ui/__tests__/ControlButton.test.tsx
  - app/components/ui/__tests__/DashboardLayout.test.tsx
  - app/components/ui/__tests__/DataTable.test.tsx
  - app/components/ui/__tests__/DeviceCard.test.tsx
  - app/components/ui/__tests__/Divider.test.tsx
  - app/components/ui/__tests__/EmptyState.test.tsx
  - app/components/ui/__tests__/FormModal.test.tsx
  - app/components/ui/__tests__/Grid.test.tsx
  - app/components/ui/__tests__/Heading.test.tsx
  - app/components/ui/__tests__/HealthIndicator.test.tsx
  - app/components/ui/__tests__/InfoBox.test.tsx
  - app/components/ui/__tests__/Input.test.tsx
  - app/components/ui/__tests__/Kbd.test.tsx
autonomous: true

must_haves:
  truths:
    - "26 UI component test files (A-K) have .tsx extension"
    - "No .test.js files remain for these components"
    - "Component tests still render and pass assertions"
  artifacts:
    - path: "app/components/ui/__tests__/Button.test.tsx"
      provides: "Typed Button component test"
    - path: "app/components/ui/__tests__/accessibility.test.tsx"
      provides: "Typed accessibility test suite"
    - path: "app/components/ui/__tests__/DataTable.test.tsx"
      provides: "Typed DataTable test with TanStack mocks"
  key_links:
    - from: "app/components/ui/__tests__/*.test.tsx"
      to: "app/components/ui/*.tsx"
      via: "import"
      pattern: "import.*from.*@/app/components/ui/"
---

<objective>
Migrate the first batch of 26 UI component test files (accessibility through Kbd, alphabetically) from .test.js to .test.tsx.

Purpose: Converts TEST-02 requirement (part 1 of 2) — UI component tests need .tsx extension because they contain JSX. This batch covers A-K alphabetically.
Output: 26 .test.tsx files replacing .test.js counterparts in app/components/ui/__tests__/.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/42-test-migration/42-CONTEXT.md
@.planning/phases/42-test-migration/42-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate UI component tests A-D (18 files)</name>
  <files>
    app/components/ui/__tests__/accessibility.test.tsx
    app/components/ui/__tests__/Accordion.test.tsx
    app/components/ui/__tests__/ActionButton.test.tsx
    app/components/ui/__tests__/Badge.test.tsx
    app/components/ui/__tests__/Banner.test.tsx
    app/components/ui/__tests__/BottomSheet.test.tsx
    app/components/ui/__tests__/Button.test.tsx
    app/components/ui/__tests__/Card.test.tsx
    app/components/ui/__tests__/Checkbox.test.tsx
    app/components/ui/__tests__/CommandPalette.test.tsx
    app/components/ui/__tests__/ConfirmationDialog.test.tsx
    app/components/ui/__tests__/ConfirmDialog.test.tsx
    app/components/ui/__tests__/ConnectionStatus.test.tsx
    app/components/ui/__tests__/ControlButton.test.tsx
    app/components/ui/__tests__/DashboardLayout.test.tsx
    app/components/ui/__tests__/DataTable.test.tsx
    app/components/ui/__tests__/DeviceCard.test.tsx
    app/components/ui/__tests__/Divider.test.tsx
  </files>
  <action>
For each of the 18 files:

1. `git mv app/components/ui/__tests__/{Name}.test.js app/components/ui/__tests__/{Name}.test.tsx`
   - Use .tsx (not .ts) because these files contain JSX
2. Apply pragmatic typing for component tests:
   - Type DOM query results: `screen.getByRole('button') as HTMLButtonElement` where .click() or property access is used
   - Type component props objects ONLY for complex components (Claude's discretion on render typing)
   - Keep simple renders as-is: `render(<Button>Click</Button>)` — no typing needed
   - Type mock event handlers: `const onClick = jest.fn()` — no additional typing (jest.fn() returns jest.Mock)
   - Type mock data objects only if they mirror a defined interface
3. Convert top-level `require()` to `import` where straightforward
4. Keep `require()` in jest.mock() factories
5. For accessibility.test: This is a comprehensive test file — type the axe results pragmatically with `as any`
6. For DataTable.test: TanStack Table types — use `as any` for complex column definitions if needed
7. For DeviceCard.test: Props may reference device types — import from @/types if available, else use inline interface or `as any`

Process all 18 files, then run:
`npx jest --testPathPattern="app/components/ui/__tests__/(accessibility|Accordion|ActionButton|Badge|Banner|BottomSheet|Button|Card|Checkbox|CommandPalette|Confirm|Connection|Control|Dashboard|DataTable|DeviceCard|Divider)" --no-coverage 2>&1 | tail -20`
  </action>
  <verify>
Count .test.js and .test.tsx for these 18 files — 0 .js, 18 .tsx.
Tests pass.
  </verify>
  <done>18 UI component tests (accessibility through Divider) migrated to .test.tsx. Tests pass.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate UI component tests E-K (8 files)</name>
  <files>
    app/components/ui/__tests__/EmptyState.test.tsx
    app/components/ui/__tests__/FormModal.test.tsx
    app/components/ui/__tests__/Grid.test.tsx
    app/components/ui/__tests__/Heading.test.tsx
    app/components/ui/__tests__/HealthIndicator.test.tsx
    app/components/ui/__tests__/InfoBox.test.tsx
    app/components/ui/__tests__/Input.test.tsx
    app/components/ui/__tests__/Kbd.test.tsx
  </files>
  <action>
For each of the 8 files:

1. `git mv app/components/ui/__tests__/{Name}.test.js app/components/ui/__tests__/{Name}.test.tsx`
2. Apply same pragmatic typing patterns as Task 1:
   - Type DOM query results where properties are accessed
   - Simple renders unchanged
   - Mock handlers: `jest.fn()` no extra typing
3. Convert `require()` to `import` for static imports
4. These are simpler component tests (EmptyState, Grid, Heading, Kbd are small components) — minimal typing needed
5. Input.test may have form event typing: `React.ChangeEvent<HTMLInputElement>` if events are constructed
6. FormModal.test: Modal props typing — use component's Props interface if exported, else inline

Process all 8 files, then run:
`npx jest --testPathPattern="app/components/ui/__tests__/(EmptyState|FormModal|Grid|Heading|HealthIndicator|InfoBox|Input|Kbd)" --no-coverage 2>&1 | tail -20`
  </action>
  <verify>
Count confirms 0 .test.js, 8 .test.tsx for these files.
Tests pass.
  </verify>
  <done>8 UI component tests (EmptyState through Kbd) migrated to .test.tsx. Tests pass.</done>
</task>

</tasks>

<verification>
1. `find app/components/ui/__tests__ -name "*.test.js" | sort` — shows only L-Z files (remaining for Plan 05)
2. All 26 migrated files have .test.tsx extension
3. `npx jest --testPathPattern="app/components/ui/__tests__/(accessibility|Accordion|ActionButton|Badge|Banner|BottomSheet|Button|Card|Checkbox|CommandPalette|Confirm|Connection|Control|Dashboard|DataTable|DeviceCard|Divider|EmptyState|FormModal|Grid|Heading|HealthIndicator|InfoBox|Input|Kbd)" --no-coverage` — all pass
</verification>

<success_criteria>
- 26 .test.tsx files exist in app/components/ui/__tests__/ for the A-K range
- Zero .test.js for these same files
- All tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/42-test-migration/42-04-SUMMARY.md`
</output>
