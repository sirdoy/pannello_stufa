---
phase: 45-component-strict-mode-compliance
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/netatmo/PidAutomationPanel.tsx
  - app/components/netatmo/StoveSyncPanel.tsx
  - app/components/sandbox/SandboxPanel.tsx
  - app/components/NotificationPreferencesPanel.tsx
  - app/components/Navbar.tsx
  - app/components/StovePanel.tsx
autonomous: true

must_haves:
  truths:
    - "All 6 panel/navigation component files have zero tsc errors under strict mode"
    - "PID automation panel still controls stove sync correctly"
    - "Notification preferences panel still saves user preferences"
    - "Navbar navigation and dropdowns still function"
  artifacts:
    - path: "app/components/netatmo/PidAutomationPanel.tsx"
      provides: "Strict-mode compliant PID automation panel"
    - path: "app/components/sandbox/SandboxPanel.tsx"
      provides: "Strict-mode compliant sandbox testing panel"
    - path: "app/components/NotificationPreferencesPanel.tsx"
      provides: "Strict-mode compliant notification preferences"
    - path: "app/components/Navbar.tsx"
      provides: "Strict-mode compliant navigation bar"
  key_links:
    - from: "app/components/netatmo/PidAutomationPanel.tsx"
      to: "lib/services/pidService"
      via: "API calls"
      pattern: "fetch.*api.*pid"
---

<objective>
Fix all 78 strict-mode TypeScript errors across 6 panel and navigation components: PidAutomationPanel (25), SandboxPanel (17), NotificationPreferencesPanel (15), Navbar (9), StoveSyncPanel (7), StovePanel (5).

Purpose: These are the mid-size components with significant error counts. Fixing them covers the netatmo, sandbox, and notification subsystems.
Output: All 6 component files with zero tsc errors.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-library-strict-mode-foundation/44-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix strict-mode errors in PidAutomationPanel, StoveSyncPanel, and SandboxPanel</name>
  <files>app/components/netatmo/PidAutomationPanel.tsx, app/components/netatmo/StoveSyncPanel.tsx, app/components/sandbox/SandboxPanel.tsx</files>
  <action>
**PidAutomationPanel.tsx (25 errors):**
- TS7006/TS7031 (noImplicitAny/binding element): ~12 errors. Add parameter types to PID control handlers, form submission callbacks, and API response handlers. PID data shape: `{ enabled: boolean; kp: number; ki: number; kd: number; setpoint: number; output: number; lastError: number }`.
- TS2345 (argument type): ~4 errors. Fix argument types in API calls and state setters.
- TS18046 (unknown error): ~5 errors. Catch blocks — use `error instanceof Error ? error.message : String(error)`.
- TS2339 (property does not exist): ~4 errors. Add proper interface for API response or use type assertion.

**StoveSyncPanel.tsx (7 errors):**
- TS7053 (implicit index) x2: Add Record type for dynamic object access.
- TS7006 (noImplicitAny) x2: Add parameter types to handlers.
- TS18048 (possibly undefined) x2: Add optional chaining or null checks.
- TS2345 (argument type) x1: Fix function argument type.

**SandboxPanel.tsx (17 errors):**
- TS18046 (unknown error) x11: Many catch blocks — all need `error instanceof Error` pattern.
- TS7006 (noImplicitAny) x4: Add parameter types to test/sandbox handlers.
- TS18047 (possibly null) x2: Add null checks before property access.

Do NOT change any PID control logic, sync behavior, or sandbox test functionality.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/components/(netatmo|sandbox)/" | wc -l returns 0</verify>
  <done>PidAutomationPanel.tsx (0, was 25), StoveSyncPanel.tsx (0, was 7), SandboxPanel.tsx (0, was 17) all compile cleanly.</done>
</task>

<task type="auto">
  <name>Task 2: Fix strict-mode errors in NotificationPreferencesPanel, Navbar, and StovePanel</name>
  <files>app/components/NotificationPreferencesPanel.tsx, app/components/Navbar.tsx, app/components/StovePanel.tsx</files>
  <action>
**NotificationPreferencesPanel.tsx (15 errors):**
- TS7016 (no declaration file) x1: Untyped import — add `// @ts-expect-error` or create minimal type declaration.
- TS7053 (implicit index) x4: Add Record<string, ...> types for notification preference objects and dynamic key access. Use `Record<string, boolean>` for preference toggles.
- TS7006 (noImplicitAny) x6: Add parameter types to preference toggle handlers, form callbacks, and API response handlers.
- TS2345 (argument type) x4: Fix argument types in API calls and state updates.

**Navbar.tsx (9 errors):**
- TS7006 (noImplicitAny) x8: Add parameter types to all navigation event handlers, dropdown toggle handlers, and route matching callbacks. Navigation items: `{ href: string; label: string; icon: React.ComponentType }`.
- TS7053 (implicit index) x1: Add Record type for dynamic property access on navigation state.

**StovePanel.tsx (5 errors):**
- TS7006 (noImplicitAny) x5: Add parameter types to stove control handlers (temperature, fan speed, power level callbacks).

Do NOT change any notification preference logic, navigation behavior, or stove control functionality.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/components/(NotificationPreferencesPanel|Navbar|StovePanel)\.tsx" | wc -l returns 0</verify>
  <done>NotificationPreferencesPanel.tsx (0, was 15), Navbar.tsx (0, was 9), StovePanel.tsx (0, was 5) all compile cleanly.</done>
</task>

</tasks>

<verification>
```bash
# All 6 files must have zero errors
npx tsc --noEmit 2>&1 | grep -E "app/components/(netatmo/|sandbox/|NotificationPreferencesPanel|Navbar|StovePanel)" | wc -l
# Expected: 0

# Existing tests still pass
npx jest --testPathPattern="(netatmo|sandbox|Notification|Navbar|StovePanel)" --passWithNoTests 2>&1 | tail -5
```
</verification>

<success_criteria>
- Zero tsc errors across all 6 files (was 78 total)
- PID automation, sync, sandbox, notifications, navigation all functional
- No behavioral changes
- Existing tests still pass
</success_criteria>

<output>
After completion, create `.planning/phases/45-component-strict-mode-compliance/45-04-SUMMARY.md`
</output>
