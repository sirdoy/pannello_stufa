---
phase: 45-component-strict-mode-compliance
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/scheduler/__tests__/DuplicateDayModal.test.tsx
  - app/components/scheduler/DayEditPanel.tsx
  - app/components/scheduler/IntervalBottomSheet.tsx
  - app/components/scheduler/ScheduleInterval.tsx
  - app/components/navigation/__tests__/DropdownComponents.test.tsx
  - app/components/lights/EditSceneModal.tsx
  - app/components/lights/CreateSceneModal.tsx
  - app/components/WhatsNewModal.tsx
  - app/components/LocationSearch.tsx
  - app/components/NotificationPermissionButton.tsx
  - app/components/VersionEnforcer.tsx
  - app/components/layout/CommandPaletteProvider.tsx
  - components/monitoring/EventFilters.tsx
  - components/notifications/NotificationFilters.tsx
autonomous: true

must_haves:
  truths:
    - "All 14 component files have zero tsc errors under strict mode"
    - "Scheduler interval editing still functions"
    - "Light scene creation and editing still work"
    - "Navigation dropdown menus still render correctly"
  artifacts:
    - path: "app/components/scheduler/DayEditPanel.tsx"
      provides: "Strict-mode compliant scheduler day editor"
    - path: "app/components/lights/EditSceneModal.tsx"
      provides: "Strict-mode compliant scene editor modal"
    - path: "components/monitoring/EventFilters.tsx"
      provides: "Strict-mode compliant event filters"
  key_links:
    - from: "app/components/scheduler/ScheduleInterval.tsx"
      to: "lib/schedulerService"
      via: "import"
      pattern: "import.*schedulerService"
---

<objective>
Fix all 40 strict-mode TypeScript errors across 14 remaining component files spanning scheduler (12 errors, 4 files), navigation (6 errors, 1 file), lights (9 errors, 2 files), and standalone components (13 errors, 7 files).

Purpose: Complete strict-mode compliance for all remaining non-UI-test component files.
Output: All 14 files with zero tsc errors.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix strict-mode errors in scheduler and lights components</name>
  <files>app/components/scheduler/__tests__/DuplicateDayModal.test.tsx, app/components/scheduler/DayEditPanel.tsx, app/components/scheduler/IntervalBottomSheet.tsx, app/components/scheduler/ScheduleInterval.tsx, app/components/lights/EditSceneModal.tsx, app/components/lights/CreateSceneModal.tsx</files>
  <action>
**Scheduler files (12 errors across 4 files):**

DuplicateDayModal.test.tsx (7 errors — TS2345 x7):
- All 7 are argument type mismatches in test render calls or mock data. Fix by adding proper types to mock data objects or using `as` assertions for test-specific data shapes. Common pattern: test passes partial props — add missing required props or use `Partial<Props>`.

DayEditPanel.tsx (1 error — TS2322):
- Type mismatch in prop or state assignment. Fix with proper type narrowing.

IntervalBottomSheet.tsx (2 errors — TS7053 x2):
- Dynamic index access on schedule interval objects. Add `Record<string, number>` or similar typed record.

ScheduleInterval.tsx (2 errors — TS7053 x2):
- Same pattern as IntervalBottomSheet — dynamic index access. Add explicit Record type.

**Lights files (9 errors across 2 files):**

EditSceneModal.tsx (5 errors):
- TS7006 x2: Add parameter types to light selection handlers and color picker callbacks.
- TS7053 x2: Dynamic index access on scene/light objects — add Record type.
- TS18048 x1: Possibly undefined — add optional chaining or null check.

CreateSceneModal.tsx (4 errors):
- TS7006 x2: Add parameter types to creation handlers.
- TS7053 x2: Same dynamic index access pattern — add Record type.

Do NOT change scheduler logic, interval editing, or scene management behavior.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/components/(scheduler|lights)/" | wc -l returns 0</verify>
  <done>All 6 scheduler/lights files compile with zero tsc errors (was 21 total).</done>
</task>

<task type="auto">
  <name>Task 2: Fix strict-mode errors in standalone and navigation components</name>
  <files>app/components/navigation/__tests__/DropdownComponents.test.tsx, app/components/WhatsNewModal.tsx, app/components/LocationSearch.tsx, app/components/NotificationPermissionButton.tsx, app/components/VersionEnforcer.tsx, app/components/layout/CommandPaletteProvider.tsx, components/monitoring/EventFilters.tsx, components/notifications/NotificationFilters.tsx</files>
  <action>
**Navigation test (6 errors):**
DropdownComponents.test.tsx:
- TS7031 (binding element implicitly any) x5: Add types to destructured test helper parameters and render function callbacks.
- TS2531 (object possibly null) x1: Add null check before assertion on query result.

**Standalone components (13 errors across 7 files):**

WhatsNewModal.tsx (3 errors — TS2345 x3):
- Argument type mismatches — likely passing wrong types to modal/changelog functions. Fix with proper type assertions or narrowing.

LocationSearch.tsx (2 errors — TS18046 x2):
- Unknown error in catch blocks — use `error instanceof Error ? error.message : String(error)`.

NotificationPermissionButton.tsx (2 errors — TS18046 + TS2345):
- Catch block + argument type mismatch. Apply standard patterns.

VersionEnforcer.tsx (1 error — TS2322):
- Type mismatch — fix assignment or prop type.

CommandPaletteProvider.tsx (1 error — TS7006):
- Add parameter type to callback function.

**Root components/ directory (4 errors across 2 files):**

EventFilters.tsx (2 errors — TS2322 x2):
- Type mismatches in filter state or props. Fix prop types or add type narrowing.

NotificationFilters.tsx (2 errors — TS2322 x2):
- Same pattern as EventFilters — type mismatches in filter props/state.

Do NOT change any modal, search, notification, or filter behavior.
  </action>
  <verify>
npx tsc --noEmit 2>&1 | grep -E "app/components/(navigation/|WhatsNewModal|LocationSearch|NotificationPermission|VersionEnforcer|layout/)" | wc -l returns 0
npx tsc --noEmit 2>&1 | grep -E "^components/(monitoring|notifications)/" | wc -l returns 0
  </verify>
  <done>All 8 standalone/navigation/root component files compile with zero tsc errors (was 19 total).</done>
</task>

</tasks>

<verification>
```bash
# All remaining component source + test files must have zero errors
npx tsc --noEmit 2>&1 | grep -E "(app/components/(scheduler|lights|navigation|WhatsNewModal|LocationSearch|NotificationPermission|VersionEnforcer|layout)|^components/(monitoring|notifications))" | wc -l
# Expected: 0
```
</verification>

<success_criteria>
- Zero tsc errors across all 14 files (was 40 total)
- Scheduler, lights, navigation, and standalone components all functional
- No behavioral changes
- Existing tests still pass
</success_criteria>

<output>
After completion, create `.planning/phases/45-component-strict-mode-compliance/45-05-SUMMARY.md`
</output>
