---
phase: 45-component-strict-mode-compliance
plan: 07
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/ui/__tests__/DeviceCard.test.tsx
  - app/components/ui/__tests__/DataTable.test.tsx
  - app/components/ui/__tests__/Slider.test.tsx
  - app/components/ui/__tests__/ProgressBar.test.tsx
  - app/components/ui/__tests__/Progress.test.tsx
  - app/components/ui/__tests__/Input.test.tsx
  - app/components/ui/__tests__/ConfirmationDialog.test.tsx
  - app/components/ui/__tests__/Banner.test.tsx
  - app/components/ui/__tests__/RightClickMenu.test.tsx
  - app/components/ui/__tests__/Tooltip.test.tsx
  - app/components/ui/__tests__/Text.test.tsx
  - app/components/ui/__tests__/StatusCard.test.tsx
  - app/components/ui/__tests__/Sheet.test.tsx
  - app/components/ui/__tests__/Modal.test.tsx
  - app/components/ui/__tests__/Heading.test.tsx
  - app/components/ui/__tests__/CommandPalette.test.tsx
  - app/components/ui/__tests__/Accordion.test.tsx
  - app/components/netatmo/__tests__/PidPowerPreview.test.tsx
autonomous: true

must_haves:
  truths:
    - "All 18 test files have zero tsc errors under strict mode"
    - "All tests in these files still pass green"
  artifacts:
    - path: "app/components/ui/__tests__/DeviceCard.test.tsx"
      provides: "Strict-mode compliant DeviceCard test"
    - path: "app/components/ui/__tests__/DataTable.test.tsx"
      provides: "Strict-mode compliant DataTable test"
    - path: "app/components/netatmo/__tests__/PidPowerPreview.test.tsx"
      provides: "Strict-mode compliant PidPowerPreview test"
  key_links: []
---

<objective>
Fix all 45 strict-mode TypeScript errors across 18 remaining test files (17 UI tests + 1 netatmo test). Most files have 1-3 errors each.

Purpose: Complete strict-mode compliance for all component test files.
Output: All 18 test files with zero tsc errors and all tests passing.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-library-strict-mode-foundation/44-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix strict-mode errors in UI test files with 3+ errors</name>
  <files>app/components/ui/__tests__/DeviceCard.test.tsx, app/components/ui/__tests__/DataTable.test.tsx, app/components/ui/__tests__/Slider.test.tsx, app/components/ui/__tests__/ProgressBar.test.tsx, app/components/ui/__tests__/Progress.test.tsx, app/components/ui/__tests__/Input.test.tsx, app/components/ui/__tests__/ConfirmationDialog.test.tsx, app/components/ui/__tests__/Banner.test.tsx, app/components/netatmo/__tests__/PidPowerPreview.test.tsx</files>
  <action>
Fix 37 errors across 9 test files. Error patterns and fixes:

**DeviceCard.test.tsx (5 errors — TS7031 x5):**
- Binding elements implicitly any. Type destructured props in test render helpers. Import DeviceCardProps or define inline.

**DataTable.test.tsx (4 errors — TS7006 x3, TS18047 x1):**
- Add parameter types to test callbacks (column defs, row handlers).
- Add null check for possibly null DOM query result.

**PidPowerPreview.test.tsx (8 errors — TS7006 x5, TS2345 x3):**
- Add parameter types to mock PID data handlers and render helpers.
- Fix argument types in mock function calls — ensure mock data matches expected PID interface shape.

**Slider.test.tsx (3 errors — TS2345 x3):**
- Argument type mismatches in render calls — add missing required props or type mock data correctly.

**ProgressBar.test.tsx (3 errors — TS18047 x3):**
- Possibly null DOM elements. Add non-null assertions: `screen.getByRole('progressbar')!` or `expect(element).not.toBeNull()` before accessing properties.

**Progress.test.tsx (3 errors — TS7006 x3):**
- Add parameter types to test helpers and callbacks.

**Input.test.tsx (3 errors — TS2345 x1, TS7006 x2):**
- Fix argument type in render + add parameter types to handlers.

**ConfirmationDialog.test.tsx (3 errors — TS2345 x3):**
- Argument type mismatches in render — fix mock props to match component interface.

**Banner.test.tsx (3 errors — TS7053 x3):**
- Implicit index access on variant/test data objects. Add Record type or use typed key access.

Follow phase 44-07 patterns: non-null assertions for known DOM elements, pragmatic `as any` for edge case tests.
Do NOT change any test assertions or logic.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/components/(ui|netatmo)/__tests__/(DeviceCard|DataTable|Slider|ProgressBar|Progress|Input|ConfirmationDialog|Banner|PidPowerPreview)\.test\.tsx" | wc -l returns 0</verify>
  <done>All 9 test files compile with zero tsc errors (was 37). Tests pass green.</done>
</task>

<task type="auto">
  <name>Task 2: Fix strict-mode errors in UI test files with 1-2 errors each</name>
  <files>app/components/ui/__tests__/RightClickMenu.test.tsx, app/components/ui/__tests__/Tooltip.test.tsx, app/components/ui/__tests__/Text.test.tsx, app/components/ui/__tests__/StatusCard.test.tsx, app/components/ui/__tests__/Sheet.test.tsx, app/components/ui/__tests__/Modal.test.tsx, app/components/ui/__tests__/Heading.test.tsx, app/components/ui/__tests__/CommandPalette.test.tsx, app/components/ui/__tests__/Accordion.test.tsx</files>
  <action>
Fix 8 errors across 9 test files (most have exactly 1 error each). Quick batch fix:

**RightClickMenu.test.tsx (2 errors — TS7006 x1, TS18047 x1):**
- Add parameter type to callback + null check on DOM element.

**Tooltip.test.tsx (1 error — TS7006):**
- Add parameter type to test helper or callback.

**Text.test.tsx (1 error — TS18047):**
- Null check on DOM query result.

**StatusCard.test.tsx (1 error — TS2531):**
- Object possibly null — add non-null assertion or null check.

**Sheet.test.tsx (1 error — TS2345):**
- Argument type mismatch in render — fix mock prop types.

**Modal.test.tsx (1 error — TS2345):**
- Argument type mismatch in render — fix mock prop types.

**Heading.test.tsx (1 error — TS18047):**
- Null check on DOM query result.

**CommandPalette.test.tsx (1 error — TS18047):**
- Null check on DOM query result.

**Accordion.test.tsx (1 error — TS2345):**
- Argument type mismatch in render — fix mock prop types.

All fixes are 1-line additions of type annotations, null checks, or non-null assertions.
Do NOT change any test assertions or logic.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/components/ui/__tests__/(RightClickMenu|Tooltip|Text|StatusCard|Sheet|Modal|Heading|CommandPalette|Accordion)\.test\.tsx" | wc -l returns 0</verify>
  <done>All 9 test files compile with zero tsc errors (was 8). Tests pass green.</done>
</task>

</tasks>

<verification>
```bash
# All test files in scope must have zero errors
npx tsc --noEmit 2>&1 | grep -E "app/components/(ui|netatmo)/__tests__/" | wc -l
# Expected: 0

# All tests still pass
npx jest --testPathPattern="app/components/ui/__tests__" --passWithNoTests 2>&1 | tail -5
npx jest --testPathPattern="app/components/netatmo/__tests__" --passWithNoTests 2>&1 | tail -5
```
</verification>

<success_criteria>
- Zero tsc errors across all 18 test files (was 45 total)
- All test assertions unchanged
- All tests pass green
</success_criteria>

<output>
After completion, create `.planning/phases/45-component-strict-mode-compliance/45-07-SUMMARY.md`
</output>
