---
phase: 45-component-strict-mode-compliance
plan: 08
type: execute
wave: 2
depends_on: [45-01, 45-02, 45-03, 45-04, 45-05, 45-06, 45-07]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "Zero tsc errors in app/components/ directory"
    - "Zero tsc errors in components/ directory"
    - "All component tests pass green"
  artifacts: []
  key_links: []
---

<objective>
Final gap sweep and verification for phase 45. After Wave 1 parallel execution of plans 01-07, sweep for any remaining or newly introduced tsc errors in components/ and app/components/ directories.

Purpose: Parallel execution in Wave 1 may introduce cascade effects (type changes in one file affecting imports in another). This plan catches and fixes any remaining gaps.
Output: Verified zero tsc errors across all component files.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Sweep and fix any remaining tsc errors in components</name>
  <files>(determined at runtime by tsc output)</files>
  <action>
Run `npx tsc --noEmit 2>&1 | grep -E "^(app/components/|components/)"` to identify any remaining errors.

If errors remain:
1. Group by file
2. Apply the same fix patterns established in plans 01-07:
   - TS7006/TS7031: Add explicit parameter types
   - TS18046: `error instanceof Error ? error.message : String(error)`
   - TS18047/TS18048: Add null checks or optional chaining
   - TS2322/TS2345: Fix type mismatches with narrowing or assertions
   - TS7053: Add Record type for dynamic index access
   - TS2538: Add nullish coalescing for variant keys
   - TS7034/TS7005: Add explicit variable type declarations
3. Fix all remaining errors

If zero errors: Report clean status and proceed to verification.

Common gap sources from parallel execution:
- Plan 03 (UI components) may have changed prop types that affect Plan 06/07 (UI tests)
- Plan 01/02 (device cards) may have added types that affect test files
- Plans touching shared type imports may create cascading mismatches
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "^(app/components/|components/)" | wc -l returns 0</verify>
  <done>Zero tsc strict-mode errors in all component files (app/components/ and components/ directories).</done>
</task>

<task type="auto">
  <name>Task 2: Verify all component tests pass</name>
  <files>(no file modifications expected)</files>
  <action>
Run the full component test suite to verify no regressions from strict-mode type fixes:

```bash
npx jest --testPathPattern="(app/components|components)/" --passWithNoTests 2>&1
```

If any tests fail:
1. Check if the failure is a pre-existing issue (FormModal onClose is known from phase 47 scope)
2. If failure is NEW and caused by type changes: fix the type annotation that broke behavior (do not change test logic)
3. Re-run until all tests pass (excluding known pre-existing failures)

Document: total test count, passing count, any pre-existing failures.
  </action>
  <verify>
npx jest --testPathPattern="(app/components|components)/" --passWithNoTests 2>&1 | grep -E "Tests:|Test Suites:" | tail -2
  </verify>
  <done>All component tests pass green (or only pre-existing known failures remain). Phase 45 success criteria met.</done>
</task>

</tasks>

<verification>
```bash
# Phase 45 success criteria verification
echo "=== TSC ERRORS ==="
npx tsc --noEmit 2>&1 | grep -E "^(app/components/|components/)" | wc -l
# Expected: 0

echo "=== TEST RESULTS ==="
npx jest --testPathPattern="(app/components|components)/" --passWithNoTests 2>&1 | grep -E "Tests:|Test Suites:" | tail -2

echo "=== PHASE 45 COMPLETE ==="
```
</verification>

<success_criteria>
- Zero tsc strict-mode errors in app/components/ (was ~428)
- Zero tsc strict-mode errors in components/ (was ~4)
- All component tests pass green (or only documented pre-existing failures)
- Phase 45 verified complete
</success_criteria>

<output>
After completion, create `.planning/phases/45-component-strict-mode-compliance/45-08-SUMMARY.md`
</output>
