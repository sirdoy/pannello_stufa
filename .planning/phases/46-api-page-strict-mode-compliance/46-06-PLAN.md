---
phase: 46-api-page-strict-mode-compliance
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - app/debug/api/components/tabs/StoveTab.tsx
  - app/debug/api/components/tabs/HueTab.tsx
  - app/debug/api/components/tabs/NetatmoTab.tsx
  - app/debug/api/components/tabs/SchedulerTab.tsx
  - app/debug/api/components/tabs/FirebaseTab.tsx
  - app/debug/api/components/tabs/WeatherTab.tsx
  - app/debug/api/components/ApiTab.tsx
  - app/debug/api/page.tsx
  - app/debug/components/tabs/StoveTab.tsx
  - app/debug/components/tabs/HueTab.tsx
  - app/debug/components/tabs/NetatmoTab.tsx
  - app/debug/components/tabs/SchedulerTab.tsx
  - app/debug/components/tabs/FirebaseTab.tsx
  - app/debug/components/tabs/WeatherTab.tsx
  - app/debug/components/ApiTab.tsx
  - app/debug/stove/page.tsx
  - app/debug/notifications/page.tsx
  - app/debug/notifications/test/page.tsx
autonomous: true

must_haves:
  truths:
    - "All debug API tab components compile with zero tsc strict-mode errors"
    - "All debug mirror components compile with zero tsc strict-mode errors"
    - "All unknown catch blocks use error instanceof Error pattern"
    - "Debug pages handle null/undefined properly"
  artifacts:
    - path: "app/debug/api/components/tabs/StoveTab.tsx"
      provides: "Strict-mode compliant debug StoveTab"
    - path: "app/debug/api/page.tsx"
      provides: "Strict-mode compliant debug API page"
  key_links:
    - from: "app/debug/api/components/tabs/StoveTab.tsx"
      to: "app/debug/components/tabs/StoveTab.tsx"
      via: "mirror components with identical error patterns"
      pattern: "StoveTab"
---

<objective>
Fix 40 strict-mode TypeScript errors across 18 debug page and tab component files.

Purpose: The debug directory contains mirrored component pairs (debug/api/components/ and debug/components/) that share identical error patterns. Fixing both mirrors in one plan ensures consistency.
Output: All 18 debug files with zero tsc strict-mode errors.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/debug/api/components/tabs/StoveTab.tsx
@app/debug/components/tabs/StoveTab.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix debug API tab components and their mirror counterparts</name>
  <files>
    app/debug/api/components/tabs/StoveTab.tsx
    app/debug/api/components/tabs/HueTab.tsx
    app/debug/api/components/tabs/NetatmoTab.tsx
    app/debug/api/components/tabs/SchedulerTab.tsx
    app/debug/api/components/tabs/FirebaseTab.tsx
    app/debug/api/components/tabs/WeatherTab.tsx
    app/debug/components/tabs/StoveTab.tsx
    app/debug/components/tabs/HueTab.tsx
    app/debug/components/tabs/NetatmoTab.tsx
    app/debug/components/tabs/SchedulerTab.tsx
    app/debug/components/tabs/FirebaseTab.tsx
    app/debug/components/tabs/WeatherTab.tsx
  </files>
  <action>
These 12 files form 6 mirror pairs. Each pair has identical errors. Fix both simultaneously.

**StoveTab.tsx (x2) — 5 errors each (10 total):**
- Line 39: string index into endpoint map (TS7053) — define the map type: `const endpoints: Record<string, string> = { ... }` OR use `as keyof typeof endpoints`
- Line 44: `string | undefined` arg where `string` expected (TS2345) — add `?? ''` or `!` after confirming the key exists
- Line 52: `data` implicit any (TS7006) — type as the API response type, or use `(data: unknown)` then narrow
- Line 68: `error` is unknown (TS18046) — `error instanceof Error ? error.message : String(error)`
- Line 103: `error` is unknown (TS18046) — same

**HueTab.tsx (x2) — 2 errors each (4 total):**
- Line 47: `error` is unknown (TS18046) — `error instanceof Error ? error.message : String(error)`
- Line 79: `error` is unknown (TS18046) — same

**NetatmoTab.tsx (x2) — 2 errors each (4 total):**
- Line 47: `error` is unknown (TS18046) — same pattern
- Line 80: `error` is unknown (TS18046) — same

**SchedulerTab.tsx (x2) — 2 errors each (4 total):**
- Line 41: `error` is unknown (TS18046) — same pattern
- Line 71: `error` is unknown (TS18046) — same

**FirebaseTab.tsx (x2) — 1 error each (2 total):**
- Line 39: `error` is unknown (TS18046) — same pattern

**WeatherTab.tsx (x2) — 1 error each (2 total):**
- Line 48: `error` is unknown (TS18046) — same pattern

**Pattern:** The overwhelming majority are TS18046 unknown catch blocks. Apply the standard `error instanceof Error ? error.message : String(error)` pattern consistently across all 12 files.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/debug/(api/)?components/tabs/" | wc -l should return 0</verify>
  <done>Zero tsc errors in all 12 debug tab component files. 26 errors fixed.</done>
</task>

<task type="auto">
  <name>Task 2: Fix debug pages and ApiTab components</name>
  <files>
    app/debug/api/components/ApiTab.tsx
    app/debug/components/ApiTab.tsx
    app/debug/api/page.tsx
    app/debug/stove/page.tsx
    app/debug/notifications/page.tsx
    app/debug/notifications/test/page.tsx
  </files>
  <action>
**ApiTab.tsx (x2) — 1 error each (2 total):**
- Line 230: `param.options` possibly undefined (TS18048) — add `param.options?.map(...)` or `if (param.options)` guard

**app/debug/api/page.tsx — 6 errors (all TS2322):**
- Lines 127, 131, 135, 139, 143, 147: `number | null` not assignable to `number` — these are likely coordinates or config values passed as props. Use `?? 0` to provide default, or change the prop type to accept `number | null`.

**app/debug/stove/page.tsx — 2 errors (TS18046):**
- Lines 108, 156: `error` is unknown — `error instanceof Error ? error.message : String(error)`

**app/debug/notifications/page.tsx — 1 error (TS7053):**
- Line 158: string index into status map — use `as keyof typeof statusConfig` or type the map as `Record<string, {...}>`

**app/debug/notifications/test/page.tsx — 2 errors (TS18048):**
- Line 416: `result.trace.deliveryResults.errors.length` possibly undefined — add optional chaining: `result.trace?.deliveryResults?.errors?.length`
- Line 419: `result.trace.deliveryResults.errors` possibly undefined — add optional chaining
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep -E "app/debug/(api/(page|components/ApiTab)|stove/page|notifications)" | wc -l should return 0</verify>
  <done>Zero tsc errors in all 6 debug page/component files. 14 errors fixed (including 2 mirror pairs).</done>
</task>

</tasks>

<verification>
```bash
# Zero errors in all debug files
npx tsc --noEmit 2>&1 | grep "app/debug/" | wc -l
# Expected: 0 (or only design-system which is plan 07)
```
</verification>

<success_criteria>
- All 18 debug files compile with zero tsc strict-mode errors
- 40 total errors fixed (26 tab components + 14 pages/ApiTab)
- Mirror pairs fixed consistently
- No behavioral changes to any debug page
</success_criteria>

<output>
After completion, create `.planning/phases/46-api-page-strict-mode-compliance/46-06-SUMMARY.md`
</output>
