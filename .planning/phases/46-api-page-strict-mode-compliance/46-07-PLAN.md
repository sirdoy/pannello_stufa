---
phase: 46-api-page-strict-mode-compliance
plan: 07
type: execute
wave: 1
depends_on: []
files_modified:
  - app/debug/design-system/page.tsx
  - app/debug/design-system/components/CodeBlock.tsx
autonomous: true

must_haves:
  truths:
    - "Design system page compiles with zero tsc strict-mode errors"
    - "CodeBlock component compiles with zero tsc strict-mode errors"
    - "All DataTable column definitions have typed accessors"
    - "All local component functions have typed parameters"
  artifacts:
    - path: "app/debug/design-system/page.tsx"
      provides: "Strict-mode compliant design system documentation page"
    - path: "app/debug/design-system/components/CodeBlock.tsx"
      provides: "Strict-mode compliant CodeBlock component"
  key_links:
    - from: "app/debug/design-system/page.tsx"
      to: "app/components/ui/DataTable"
      via: "column definitions with typed cell renderers"
      pattern: "ColumnDef|getValue"
---

<objective>
Fix 22 strict-mode TypeScript errors in the design system documentation page (20 errors) and CodeBlock component (2 errors).

Purpose: The design system page has many implicit-any parameters from local inline component definitions and DataTable column accessors. These are all typing-only fixes requiring interface definitions and parameter annotations.
Output: Both design system files with zero tsc strict-mode errors.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/debug/design-system/page.tsx
@app/debug/design-system/components/CodeBlock.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix 20 errors in design system documentation page</name>
  <files>app/debug/design-system/page.tsx</files>
  <action>
Fix 20 tsc errors in app/debug/design-system/page.tsx. Define local interfaces at top of file for the inline components, then annotate parameters.

**TS2339 (property doesn't exist on type) — 1 error:**
- Line 1235: `checked` doesn't exist on `EventTarget | { checked: boolean; ... }` — narrow the type: use `'checked' in event.target && event.target.checked` or cast `event.target as { checked: boolean }`

**TS7031 (binding element implicit any) — 12 errors:**
- Line 2523: `control` — from DataTable column. Type the column cell renderer parameter with proper DataTable cell context type
- Lines 2696, 2703, 2723, 2736: `getValue` — DataTable column cell renderers. Add type annotation: `{ getValue }: { getValue: () => string }`
- Line 2785: `{ title, icon, docs, children }` — inline component props. Define interface: `interface SectionProps { title: string; icon: string; docs?: string; children: React.ReactNode }`
- Lines 2810: `{ name, description, colors, usage }` — inline component props. Define interface: `interface ColorGroupProps { name: string; description: string; colors: { name: string; value: string; css: string }[]; usage: string }`
- Line 2836: `{ code, label }` — inline component props. Define interface: `interface CodeExampleProps { code: string; label: string }`

**TS7006 (implicit any parameters) — 4 errors:**
- Line 2764: `row` — DataTable row sort function. Type as the row data type
- Line 2765: `row` — same context
- Line 2817: `color` in map callback — type based on the array element (e.g., `{ name: string; value: string; css: string }`)

**TS7053 (implicit any index access) — 1 error:**
- Line 2713: expression used to index device type map — use `as keyof typeof deviceTypeMap`

**Approach for DataTable columns:**
The DataTable column definitions use TanStack Table. The cell renderer receives a `CellContext` object. For simplicity, type the destructured `getValue` as `{ getValue: () => string }` (or the appropriate return type). For `control`, check what the column definition provides.

**Define these local interfaces near the top of the component or near their usage:**
```typescript
interface SectionProps {
  title: string;
  icon: string;
  docs?: string;
  children: React.ReactNode;
}

interface ColorGroupProps {
  name: string;
  description: string;
  colors: Array<{ name: string; value: string; css: string }>;
  usage: string;
}

interface CodeExampleProps {
  code: string;
  label: string;
}
```
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep "app/debug/design-system/page.tsx" | wc -l should return 0</verify>
  <done>Zero tsc errors in design system page. All 20 errors fixed with local interface definitions and typed parameters.</done>
</task>

<task type="auto">
  <name>Task 2: Fix 2 errors in CodeBlock component</name>
  <files>app/debug/design-system/components/CodeBlock.tsx</files>
  <action>
Fix 2 tsc errors in CodeBlock.tsx:

**TS7016 (no declaration file) — 2 errors:**
- Line 4: `react-syntax-highlighter` has no declaration file
- Line 5: `react-syntax-highlighter/dist/esm/styles/prism` has no declaration file

Fix with `// @ts-expect-error` comments above each import (same pattern as phase 45-03 for react-dom):

```typescript
// @ts-expect-error no type definitions for react-syntax-highlighter
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';
// @ts-expect-error no type definitions for react-syntax-highlighter styles
import { oneDark } from 'react-syntax-highlighter/dist/esm/styles/prism';
```

This is the established pattern from phase 45 for untyped third-party modules.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep "CodeBlock.tsx" | wc -l should return 0</verify>
  <done>Zero tsc errors in CodeBlock.tsx. Both TS7016 errors handled with @ts-expect-error.</done>
</task>

</tasks>

<verification>
```bash
# Zero errors in design system files
npx tsc --noEmit 2>&1 | grep "app/debug/design-system" | wc -l
# Expected: 0
```
</verification>

<success_criteria>
- app/debug/design-system/page.tsx compiles with zero tsc strict-mode errors (20 fixed)
- app/debug/design-system/components/CodeBlock.tsx compiles with zero tsc strict-mode errors (2 fixed)
- No behavioral changes to design system documentation page
</success_criteria>

<output>
After completion, create `.planning/phases/46-api-page-strict-mode-compliance/46-07-SUMMARY.md`
</output>
