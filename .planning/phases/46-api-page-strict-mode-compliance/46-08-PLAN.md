---
phase: 46-api-page-strict-mode-compliance
plan: 08
type: execute
wave: 2
depends_on: ["46-01", "46-02", "46-03", "46-04", "46-05", "46-06", "46-07"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "tsc --noEmit shows zero errors in app/ directory (excluding test files)"
    - "All phase 46 success criteria met"
    - "No regressions from parallel Wave 1 execution"
    - "All related tests pass green"
  artifacts:
    - path: ".planning/phases/46-api-page-strict-mode-compliance/46-08-SUMMARY.md"
      provides: "Phase 46 completion verification"
  key_links:
    - from: "tsconfig.json"
      to: "app/**/*.ts"
      via: "strict mode compilation"
      pattern: "strict.*true"
---

<objective>
Gap sweep and final verification after Wave 1 parallel execution. Catch cascade errors from parallel plan execution, fix any remaining errors, and verify phase 46 is complete.

Purpose: Parallel execution of plans 01-07 may introduce cascade effects (type changes in one plan affecting files in another). This plan catches and fixes those cascades, then verifies the entire app/ directory has zero tsc errors.
Output: Phase 46 verified complete with zero tsc errors in app/ non-test files.
</objective>

<execution_context>
@/Users/federicomanfredi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/federicomanfredi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Sweep and fix any remaining tsc errors in app/ non-test files</name>
  <files>(dynamic — files with remaining errors)</files>
  <action>
Run the full tsc check and filter for app/ non-test errors:

```bash
npx tsc --noEmit 2>&1 | grep "^app/" | grep -v "/__tests__/" | grep -v "\.test\." | grep -v "__mocks__"
```

If ANY errors remain:
1. Categorize by error type (TS18046, TS7006, TS2345, etc.)
2. Group by file
3. Fix using the established patterns from phases 44-45-46:
   - TS18046: `error instanceof Error ? error.message : String(error)`
   - TS7006/TS7031: explicit parameter/binding types
   - TS2345: type assertion or signature alignment
   - TS18047/TS18048: null guards or optional chaining
   - TS7053: `as keyof typeof` for index access
   - TS7016: `@ts-expect-error` for untyped modules
   - TS2322: type alignment or nullish coalescing
4. Commit all fixes

If ZERO errors remain: Document clean state and proceed to Task 2.
  </action>
  <verify>npx tsc --noEmit 2>&1 | grep "^app/" | grep -v "/__tests__/" | grep -v "\.test\." | grep -v "__mocks__" | wc -l should return 0</verify>
  <done>Zero tsc errors in app/ directory (excluding test files). All cascade errors from parallel execution fixed.</done>
</task>

<task type="auto">
  <name>Task 2: Verify tests pass and document phase completion</name>
  <files>(no modifications — verification only)</files>
  <action>
Run the full test suite to verify no regressions from type changes:

```bash
npx jest --testPathPatterns="app/" --passWithNoTests 2>&1 | tail -20
```

Expected: All tests pass (except the known FormModal cancel test failure which is phase 47 scope).

Document results:
- Total tsc errors before phase 46: 231
- Total tsc errors after phase 46: 0 (in app/ non-test files)
- Test results: X passed, Y failed (identify if any failures are new regressions vs pre-existing)

Confirm all 4 success criteria from ROADMAP.md:
1. All API route handlers have fully typed request/response with proper validation
2. All page components handle null/undefined from async data fetching
3. All dynamic property access uses proper type guards or optional chaining
4. tsc --noEmit shows zero errors in app/ directory (excluding test files)
  </action>
  <verify>
npx tsc --noEmit 2>&1 | grep "^app/" | grep -v "/__tests__/" | grep -v "\.test\." | grep -v "__mocks__" | wc -l returns 0.
Tests pass (known failures only).
  </verify>
  <done>Phase 46 verified complete. Zero tsc errors in app/ non-test files. All success criteria met.</done>
</task>

</tasks>

<verification>
```bash
# Zero app/ non-test errors
npx tsc --noEmit 2>&1 | grep "^app/" | grep -v "/__tests__/" | grep -v "\.test\." | grep -v "__mocks__" | wc -l
# Expected: 0

# Tests pass
npx jest --testPathPatterns="app/" --passWithNoTests 2>&1 | grep "Test Suites:"
# Expected: N passed (1 known failure allowed)
```
</verification>

<success_criteria>
- tsc --noEmit shows zero errors in app/ directory (excluding test files)
- No new test regressions from phase 46 type changes
- All 4 phase success criteria from ROADMAP.md verified
- Phase 46 SUMMARY documents complete results
</success_criteria>

<output>
After completion, create `.planning/phases/46-api-page-strict-mode-compliance/46-08-SUMMARY.md`
</output>
