/**
 * Application Version Management
 *
 * Update this file whenever significant changes are made to the application.
 *
 * Version format: MAJOR.MINOR.PATCH
 * - MAJOR: Breaking changes or major feature releases
 * - MINOR: New features, non-breaking changes
 * - PATCH: Bug fixes, minor improvements
 *
 * IMPORTANTE: Dopo ogni aggiornamento, sincronizzare con Firebase e CHANGELOG.md:
 * 1. Aggiorna APP_VERSION, LAST_UPDATE e VERSION_HISTORY
 * 2. Esegui script di sync: node scripts/syncChangelog.js (opzionale, sync automatico su deploy)
 * 3. Aggiorna CHANGELOG.md manualmente con le modifiche
 */

export const APP_VERSION = '1.72.4';
export const APP_AUTHOR = 'Federico Manfredi';
export const LAST_UPDATE = '2026-01-21';

export const VERSION_HISTORY = [
  {
    version: '1.72.4',
    date: '2026-01-21',
    title: 'Device registration & test notifications improvements',
    changes: [
      'Bottone registra dispositivo sempre visibile nella sezione dispositivi',
      'Badge "Questo dispositivo" per identificare device corrente',
      'Test notifiche invia solo al dispositivo corrente',
      'Debug logging migliorato per troubleshooting VAPID key',
    ],
  },
  {
    version: '1.72.3',
    date: '2026-01-21',
    title: 'Notifications page redesign with Ember Noir',
    changes: [
      'UI: Ridisegnata pagina notifiche seguendo Ember Noir design system',
      'Usati componenti Heading/Text invece di HTML raw',
      'Corretto pattern dark mode in NotificationPreferencesPanel',
      'Fix: FCM imageUrl richiede URL assoluto',
      'Fix: Service Worker bypass in dev mode per Turbopack',
      'Aggiunta API unregister per disattivare notifiche',
    ],
  },
  {
    version: '1.72.1',
    date: '2026-01-21',
    title: 'Smart stove power button',
    changes: [
      'UX: Pulsante accensione stufa smart - mostra solo azione rilevante',
      'Stufa spenta â†’ solo ACCENDI (prominente)',
      'Stufa accesa â†’ solo SPEGNI',
      'Stato transitorio â†’ entrambi i pulsanti',
    ],
  },
  {
    version: '1.72.0',
    date: '2026-01-21',
    title: 'Hue Local/Remote Strategy & UX Improvements',
    description: 'Strategy pattern per Hue API con fallback automatico local/remote e miglioramenti UX luci',
    changes: [
      'HueConnectionStrategy: fallback automatico Local API (CLIP v2) â†’ Remote API (Cloud)',
      'Fix checkLocalBridge() con https module per certificati self-signed',
      'Fix rilevamento luci stanza con owner.rid per Local API',
      'Smart buttons: mostra solo pulsante rilevante (Accendi/Spegni) basato su stato',
      'Quick all-house control: accendi/spegni tutte le luci della casa',
      'Pairing UX migliorata: step "premi pulsante bridge" prima del pairing',
      'Connection mode badge (Local/Cloud/Hybrid) nella card luci',
      'Button variant="ember" per azioni primarie prominenti',
    ],
  },
  {
    version: '1.71.0',
    date: '2026-01-21',
    title: 'Notification Trigger System',
    description: 'Sistema centralizzato notifiche con preferenze utente',
    changes: [
      'Notification trigger system: lib/notificationTriggers.js e notificationTriggersServer.js',
      'API /api/notifications/trigger per triggerare notifiche da qualsiasi parte',
      'Notifica stove_status_work: quando la stufa entra in stato WORK',
      'Notifica stove_unexpected_off: spegnimento imprevisto durante scheduler attivo',
      'Notifica netatmo_connection_lost: quando Netatmo richiede riconnessione',
      'Nuova categoria "Stato Stufa" nelle preferenze notifiche',
      'Cooldown anti-spam: 30min per WORK, 1h per unexpected off e Netatmo',
      'NotificationPreferencesPanel: UI dinamica per tutte le categorie',
    ],
  },
  {
    version: '1.70.0',
    date: '2026-01-21',
    title: 'Multi-Room Stove Sync',
    description: 'Netatmo valves sync with stove - multiple rooms support',
    changes: [
      'Multi-room stove sync: Salotto + Ingresso set to 16Â°C when stove is ON',
      'Continuous enforcement via scheduler cron (not just state changes)',
      '"ðŸ”¥ Stufa" badge on ThermostatCard and RoomCard when sync active',
      'validateRequired() now supports both single value and object patterns',
    ],
  },
  {
    version: '1.69.3',
    date: '2026-01-21',
    title: 'Netatmo Token Reconnect Fix',
    description: 'Fixed Netatmo token expiration not showing reconnection prompt',
    changes: [
      'Fixed fromApiError() to spread details at top level (reconnect: true)',
      'CameraCard now correctly detects expired tokens and shows reconnection UI',
    ],
    tags: ['fix', 'netatmo'],
  },
  {
    version: '1.69.2',
    date: '2026-01-21',
    title: 'TypeScript JSDoc Fix',
    description: 'Fixed TypeScript build error caused by generic Function type in JSDoc annotations',
    changes: [
      'Replaced generic {Function} JSDoc types with specific function signatures',
      'Fixed middleware.js type annotations for withAuth, withErrorHandler, etc.',
    ],
    tags: ['fix', 'typescript'],
  },
  {
    version: '1.69.1',
    date: '2026-01-20',
    title: 'Mobile Camera Fullscreen Fix',
    description: 'Fixed camera live stream fullscreen not working on mobile devices (iOS and Android)',
    changes: [
      'Improved mobile device detection (iOS, Android, touch devices)',
      'Uses video element fullscreen on mobile instead of container fullscreen',
      'Added fallback chain: webkitEnterFullscreen â†’ requestFullscreen â†’ webkitRequestFullscreen',
    ],
  },
  {
    version: '1.69.0',
    date: '2026-01-20',
    type: 'minor',
    title: 'Changelog Page Redesign',
    description: 'Complete redesign with timeline UI, pagination, and automatic Firebase sync',
    changes: [
      'Redesigned changelog page with timeline UI and Ember Noir design system',
      'Added pagination (10 items per page) with smart page navigation',
      'Added Skeleton.Changelog loading state component',
      'Fixed sync-changelog API to support both Auth0 and CRON_SECRET authentication',
      'Fixed sync-changelog.sh script for macOS compatibility',
      'GitHub Action now automatically syncs changelog on version updates',
    ],
  },
  {
    version: '1.68.1',
    date: '2026-01-20',
    title: 'iOS Camera Fullscreen Fix',
    description: 'Fixed camera live stream fullscreen not working on iOS Safari',
    changes: [
      'Fixed fullscreen not opening on iOS Safari for camera live stream',
      'Added iOS detection and use of video.webkitEnterFullscreen() API',
      'Added iOS-specific fullscreen events (webkitbeginfullscreen/webkitendfullscreen)',
    ],
  },
  {
    version: '1.68.0',
    date: '2026-01-20',
    title: 'Backend Refactor Phase 2',
    description: 'Extended middleware, shared helpers, centralized logger, and code cleanup',
    changes: [
      'scheduler/check route now uses withCronSecret middleware',
      'health route uses withErrorHandler pattern',
      'New withHueHandler middleware for Hue routes',
      'Shared maintenance helper (shouldSendMaintenanceNotification)',
      'Centralized logger utility (lib/logger.js)',
      'Removed unused mapNetatmoError function',
      'withCronSecret supports both query param and header auth',
    ],
  },
  {
    version: '1.67.0',
    date: '2026-01-20',
    title: 'Backend Architecture Refactoring',
    description: 'Complete backend restructuring with centralized error handling, middleware, and response utilities',
    changes: [
      'New lib/core module with unified backend utilities',
      'withAuthAndErrorHandler middleware for routes',
      'Consistent response utilities (success, badRequest, notFound, etc.)',
      'Refactored 50+ API routes for consistency',
      'ApiError class with factory methods',
      'Validation helpers (validateRequired, validateEnum, etc.)',
      'Netatmo and Hue specific helpers',
    ],
  },
  {
    version: '1.66.0',
    date: '2026-01-20',
    title: 'Camera Live Streaming & Events Page',
    description: 'HLS live video streaming, dedicated events page with virtual scrolling, and video playback',
    changes: [
      'HLS live streaming with hls.js (Safari native support)',
      'HlsPlayer component with fullscreen support',
      'Dedicated events page at /camera/events',
      'EventPreviewModal with video playback',
      'Virtual scrolling for events (20 at a time)',
      'Event count per day in grouped display',
      'HTML tag stripping for event messages',
    ],
  },
  {
    version: '1.65.0',
    date: '2026-01-20',
    title: 'Netatmo Camera Integration',
    description: 'Integrate Netatmo Security cameras (Welcome, Presence) as a new device in the smart home control panel',
    changes: [
      'Camera device type with ocean color theme',
      'Camera API wrapper with snapshot and events support',
      'API routes for camera list, snapshot, and events',
      'CameraCard component for homepage with live snapshot',
      'CameraDashboard page at /camera with event history',
      'OAuth scope update for camera access (re-auth required)',
    ],
  },
  {
    version: '1.64.0',
    date: '2026-01-20',
    title: 'Stove Command Center Redesign',
    description: 'Immersive volcanic control center with full stove functionality and status-responsive theming',
    changes: [
      'Full stove control directly on /stove page (on/off, fan, power)',
      'Status-responsive gradient backgrounds and ambient glow effects',
      'Quick navigation cards with live status badges',
      'Integrated maintenance tracking and error monitoring',
    ],
  },
  {
    version: '1.63.0',
    date: '2026-01-20',
    title: 'Stove Introduction Page',
    description: 'New stove intro page with navigation, mode explanations, and controls overview',
    changes: [
      'Replaced /stove redirect with full introduction page',
      'Added navigation cards to scheduler, maintenance, errors',
      'Added mode explanations (Manual, Automatic, Semi-Manual)',
      'Added controls overview (Power 1-5, Fan 1-6)',
      'Added quick actions for stove control and scheduler',
      'Real-time status display with ModeIndicator',
      'Ember Noir design with glass cards and hover effects',
    ],
  },
  {
    version: '1.62.0',
    date: '2026-01-20',
    title: 'Advanced PWA APIs',
    type: 'minor',
    description: 'Added Screen Wake Lock, Vibration API, Geofencing, Persistent Storage, Periodic Background Sync, and Web Share API.',
    changes: [
      'Screen Wake Lock: Keep screen on during stove monitoring',
      'Vibration API: Haptic feedback for alerts and notifications',
      'Geofencing: Location-based automation (leave home â†’ shutdown, arrive â†’ ignite)',
      'Persistent Storage: Request persistent IndexedDB to prevent data loss',
      'Periodic Background Sync: Check stove status periodically even with app closed',
      'Web Share API: Share stove/thermostat status with others',
      'useWakeLock Hook: React hook for wake lock management',
      'useGeofencing Hook: React hook for location-based automation',
      'usePeriodicSync Hook: React hook for periodic sync management',
      'Unit tests for all new PWA services',
    ],
  },
  {
    version: '1.61.0',
    date: '2026-01-19',
    title: 'Advanced PWA Features',
    type: 'minor',
    description: 'Added Background Sync for offline commands, App Badges for notifications, and enhanced offline experience showing cached device states.',
    changes: [
      'Background Sync: Queue stove commands when offline and auto-execute on reconnection',
      'App Badges: Show notification count on app icon (errors + maintenance alerts)',
      'Offline State Cache: View last known device states when offline',
      'Enhanced Offline Page: Shows cached stove/thermostat states instead of generic message',
      'OfflineBanner Component: Persistent connection status indicator',
      'useOnlineStatus Hook: Connection monitoring with automatic refresh',
      'IndexedDB Utility: Promise-based storage for PWA features',
      'Unit tests for new PWA services',
    ],
  },
  {
    version: '1.60.0',
    date: '2026-01-19',
    title: 'PWA Enhancement with Serwist',
    type: 'minor',
    description: 'Upgraded PWA from @ducanh2912/next-pwa to Serwist for better iOS support, added Apple splash screens, and PWA install hook.',
    changes: [
      'Migrated from @ducanh2912/next-pwa to Serwist v9 for modern PWA support',
      'Created TypeScript service worker (app/sw.ts) with runtime caching strategies',
      'Added iOS PWA fields to manifest.json (id, prefer_related_applications, handle_links)',
      'Created AppleSplashScreens component for iOS launch images',
      'Added usePWAInstall hook for install detection and prompting',
      'Separated icon purposes (any vs maskable) for better cross-platform support',
      'Push notification handlers integrated in new service worker',
    ],
  },
  {
    version: '1.59.0',
    date: '2026-01-19',
    title: 'Multi-Device Logging Support',
    type: 'minor',
    description: 'Extended logging system to properly track all devices (Netatmo thermostat, Hue lights) with correct device badges and icons.',
    changes: [
      'Netatmo API logs now include device field for correct badge display',
      'Hue API routes now log light/room/scene actions',
      'Added logHueAction helpers to logService for client-side logging',
      'Improved log page icons for thermostat actions (calibration, sync, connection)',
      'Improved log page icons for lights actions (on/off, brightness, scenes)',
      'Fixed Netatmo logs showing as Sistema instead of Termostato',
    ],
  },
  {
    version: '1.58.0',
    date: '2026-01-19',
    title: 'Log Page Design System Update',
    type: 'minor',
    description: 'Refactored log page to use Ember Noir design system components for consistent UI.',
    changes: [
      'LogEntry: Now uses Text and StatusBadge components instead of raw HTML',
      'LogEntry: Proper dark/light mode support with Ember Noir palette',
      'Log page: Filter buttons now use Button component with device-specific colors',
      'Log page: Empty state uses EmptyState component',
      'Improved spacing and typography consistency',
    ],
  },
  {
    version: '1.57.0',
    date: '2026-01-19',
    title: 'CardAccentBar Component',
    type: 'minor',
    description: 'New modern accent bar component for device cards with glow effects, shimmer animation, and pulse effect for active states.',
    changes: [
      'Added CardAccentBar component with glow effects and shimmer animation',
      'Added CardAccentCorner variant for L-shaped corner accents',
      'Multiple color themes: ember, ocean, warning, sage, danger (+ legacy mappings)',
      'Configurable size (sm/md/lg) and pulse animation for active states',
      'Integrated into StoveCard with pulse effect when stove is active',
      'Integrated into DeviceCard for thermostat and lights cards',
      'Removed accent bars from skeleton components (visible only when loaded)',
      'Added shimmer-vertical animation to globals.css',
    ],
  },
  {
    version: '1.56.2',
    date: '2026-01-19',
    title: 'Scheduler Modals & Checkbox Component',
    type: 'patch',
    description: 'Fixed scheduler modal centering using React Portal, dark mode visibility, and added Checkbox UI component.',
    changes: [
      'Fixed modal centering: DuplicateDayModal and AddIntervalModal now use standard Modal with React Portal',
      'Fixed scroll jump on modal close with useRef-based scroll position restoration',
      'Added Checkbox UI component to design system with ocean/sage/ember/flame/primary variants',
      'Fixed dark mode colors in DuplicateDayModal: correct bg-white/[0.03] pattern',
      'Fixed dark mode colors in AddIntervalModal: toggle buttons, selects, and preview areas',
      'Updated design-system showcase and documentation with Checkbox examples',
    ],
  },
  {
    version: '1.56.1',
    date: '2026-01-19',
    title: 'Footer Spacing Optimization',
    type: 'patch',
    description: 'Fixed footer spacing for better balance with mobile bottom navbar.',
    changes: [
      'Optimized footer padding: pb-28 on mobile (was pb-32) for better navbar clearance',
      'Unified gap spacing: gap-2 consistently across all breakpoints',
      'Improved footer opacity: bg-slate-900/95 (was /90) for better legibility',
      'Refined link padding: py-1.5 (was py-2) for better visual balance',
    ],
  },
  {
    version: '1.56.0',
    date: '2026-01-19',
    title: 'Netatmo Battery Status & UI Improvements',
    type: 'minor',
    description: 'Enhanced Netatmo integration to show all devices including offline/low battery. Redesigned InfoBox grid layout and thermostat mode controls for better readability.',
    changes: [
      'Show ALL Netatmo devices including those with dead batteries or offline',
      'Added battery status indicators (ðŸ”‹ low, ðŸª« critical) to room cards and selector',
      'Added offline status badges (ðŸ“µ) for unreachable devices',
      'Merged topology modules with status modules for complete battery/reachable info',
      'Redesigned InfoBox as 2-column vertical grid layout for better mobile UX',
      'Redesigned thermostat mode buttons with larger icons and clearer labels',
      'Improved Tara Valvole button visibility with ocean theme styling',
      'Added BatteryWarning banner to thermostat page header',
      'Updated RoomSelector with status indicators in dropdown options',
    ],
  },
  {
    version: '1.55.1',
    date: '2026-01-19',
    title: 'Firebase Database Rules Deployment',
    type: 'patch',
    description: 'Documentation update for Firebase database rules deployment requirement.',
    changes: [
      'Documented Firebase database rules deployment requirement for errors.timestamp index',
      'Fixed console error: "Index not defined, add .indexOn: timestamp" for /errors path',
      'Rules already contain correct configuration but require deployment via firebase deploy --only database',
    ],
  },
  {
    version: '1.55.0',
    date: '2026-01-19',
    title: 'Next.js 16 Upgrade & Dependencies Update',
    type: 'minor',
    description: 'Major framework upgrade to Next.js 16 with Turbopack, enhanced performance, and security patches. Migrated from middleware to proxy pattern.',
    changes: [
      'Upgraded Next.js from 15.5.7 to 16.1.3 (major version upgrade)',
      'Upgraded firebase-admin from 13.5.0 to 13.6.0 (Data Connect APIs)',
      'Upgraded @auth0/nextjs-auth0 from 4.13.1 to 4.14.0 (custom token exchange)',
      'Upgraded eslint from 9.x to 9.39.2 (latest v9 stable)',
      'Upgraded eslint-config-next to 16.1.3 (matches Next.js version)',
      'Added @testing-library/dom 10.4.0 for Next.js 16 compatibility',
      'Migrated from middleware.js to proxy.js (Next.js 16 convention)',
      'Added Turbopack config for faster dev mode (5-10x improvement)',
      'Updated build script with --webpack flag for PWA compatibility',
      'Fixed Tailwind CSS 4 @import order (Google Fonts before Tailwind)',
      'Fixed React 19 custom props validation in Input component',
      'Security patches: CVE-2025-55184 (DoS) and CVE-2025-55183 (Source Code Exposure)',
      'Performance: Turbopack File System Caching for faster dev restarts',
      'Known issue: url.parse() deprecation warning from @auth0/nextjs-auth0 (non-blocking)',
    ],
  },
  {
    version: '1.54.1',
    date: '2026-01-17',
    title: 'Test Suite Fixes & Jest Configuration Improvements',
    type: 'patch',
    description: 'Fixed 9 additional test suites bringing total passing tests to 63%. Improved Jest mocks for Firebase, React 19, and API patterns.',
    changes: [
      'Fixed maintenanceService.concurrency.test.js: Added null checks for transaction snapshots',
      'Fixed stoveApi.sandbox.test.js: Corrected mock setup with factory functions',
      'Fixed maintenanceService.test.js: Migrated to fetch API pattern with global mocks',
      'Fixed themeService.test.js: Complete migration to fetch API pattern',
      'Fixed schedulerService.test.js: Updated for schedules-v2 schema with call counting',
      'Fixed useVersionCheck.test.js: React 19 compatibility with waitFor after act',
      'Fixed hueLocalHelper.test.js: Added Firebase ref/set mocks in beforeEach',
      'Fixed hueRemoteTokenHelper.test.js: Corrected URLSearchParams assertions',
      'Improved jest.setup.js: Added Request polyfill for API route tests',
      'Test results: 23/39 suites passing (59%), 400/636 tests passing (63%)',
    ],
  },
  {
    version: '1.54.0',
    date: '2026-01-17',
    title: 'Dependencies Update & Test Suite Improvements',
    type: 'minor',
    description: 'Safe dependency updates (Firebase 12.8.0) and comprehensive test suite fixes. Removed Playwright E2E testing.',
    changes: [
      'Updated Firebase from 12.7.0 to 12.8.0 (patch release, no breaking changes)',
      'Updated baseline-browser-mapping from 2.8.32 to 2.9.15',
      'Fixed 26+ unit tests: version validation, useRouter mocks, dark mode CSS classes',
      'Added global Next.js navigation mocks in jest.setup.js',
      'Fixed ActionButton, StatusBadge, ConfirmDialog, BottomSheet, DuplicateDayModal tests',
      'Removed Playwright E2E testing framework (playwright, @playwright/test packages)',
      'Removed all Playwright configuration files and scripts',
      'Updated documentation to remove Playwright references',
    ],
    breaking: [],
  },
  {
    version: '1.53.3',
    date: '2026-01-17',
    title: 'iOS PWA Dark Mode Status Bar Fix',
    type: 'patch',
    description: 'Fixed iOS PWA status bar displaying white in dark mode.',
    changes: [
      'Changed apple-mobile-web-app-status-bar-style to "black-translucent" for proper dark mode support',
      'Added dynamic theme-color meta tag that updates based on active theme (#0f172a dark, #f8fafc light)',
      'Updated themeService.applyThemeToDOM() to sync theme-color when toggling theme',
      'Added theme-color initialization script in layout.js to prevent flash',
      'Fixed body className dark mode syntax from inverted logic to correct dark: modifiers',
    ],
    breaking: [],
  },
  {
    version: '1.53.2',
    date: '2026-01-16',
    title: 'Build & Lint Warnings Fix',
    type: 'patch',
    description: 'Fixed CSS import order warning and ESLint unescaped entities error.',
    changes: [
      'Fixed CSS @import order: moved Google Fonts import before @variant dark to comply with CSS spec',
      'Fixed ESLint react/no-unescaped-entities in transitions debug page (replaced quotes with &quot;)',
      'Build warnings eliminated (CSS optimization warning resolved)',
    ],
    breaking: [],
  },
  {
    version: '1.53.1',
    date: '2026-01-16',
    title: 'Design System Compliance Fixes',
    type: 'patch',
    description: 'Fixed homepage and scheduler page to fully comply with Ember Noir design system.',
    changes: [
      'Fixed homepage Sonos placeholder to use Card component structure',
      'Removed deprecated liquid prop from Card components',
      'Replaced deprecated variant="secondary" with variant="subtle" on Button components',
      'Removed invalid weight prop from Heading components',
      'Moved spacing from Heading className to wrapper divs',
      'Unified UI component imports to use barrel export',
      'Added missing CardHeader, CardTitle, CardContent exports to index.js',
    ],
    breaking: [],
  },
  {
    version: '1.53.0',
    date: '2026-01-16',
    title: 'Complete Design System Showcase & Documentation',
    type: 'minor',
    description: 'Comprehensive design system showcase page with all UI components (base + composed) and complete technical documentation.',
    changes: [
      'Created design system showcase page at /debug/design-system',
      'Added all base components: Typography (Heading, Text), Button, Input, Select, Toggle, StatusBadge, Divider, ProgressBar, EmptyState',
      'Added all composed components: Card, Banner, Toast, Modal, ConfirmDialog, BottomSheet, Skeleton',
      'Interactive demos for all components with working state management',
      'Complete props documentation with dark/light mode mappings',
      'Added design foundation sections: Color Palette, Spacing, Border Radius, Shadows',
      'Comprehensive usage patterns and code examples for each component',
      'Perfect alignment between showcase page and docs/design-system.md',
      'Added ProgressBar component documentation (variants, sizes, custom content)',
      'Added EmptyState component documentation (centered layout, optional action)',
      'Added ConfirmDialog component documentation (scroll lock, escape key)',
      'Added BottomSheet component documentation (mobile-friendly, portal rendering)',
      'Added Design System to Settings menu (Debug submenu)',
      'Single source of truth for UI components reference',
    ],
  },
  {
    version: '1.52.0',
    date: '2026-01-16',
    title: 'Settings Menu Hierarchy & Debug Submenu',
    type: 'minor',
    description: 'Added hierarchical submenu support to Settings menu with dedicated Debug section.',
    changes: [
      'Added submenu support to SETTINGS_MENU in deviceTypes.js',
      'Created Debug submenu with Debug Stufa and Debug Transizioni',
      'Updated deviceRegistry to handle hierarchical menu structure',
      'Enhanced Navbar desktop dropdown to render submenus with indentation',
      'Enhanced Navbar mobile menu to render submenus with separators',
      'Improved active route detection for nested submenu items',
      'Updated architecture.md documentation',
    ],
  },
  {
    version: '1.51.0',
    date: '2026-01-16',
    title: 'Cinematographic Page Transitions',
    type: 'minor',
    description: 'Professional page transition system with View Transitions API and 6 cinematic animation styles.',
    changes: [
      'Added PageTransitionProvider with View Transitions API support',
      'Created TransitionLink component (drop-in replacement for next/link)',
      'Implemented 6 transition types: slide-morph, fade-scale, ember-burst, liquid-flow, stack-lift, diagonal-sweep',
      'Added direction awareness (forward/backward animations)',
      'Integrated with Navbar and navigation components',
      'Created interactive demo page at /debug/transitions',
      'CSS fallback for browsers without View Transitions API',
      'Accessibility support (respects prefers-reduced-motion)',
      'Complete documentation in docs/page-transitions.md',
    ],
  },
  {
    version: '1.50.1',
    date: '2026-01-16',
    title: 'Complete Dark Mode Unification',
    type: 'patch',
    description: 'Fixed all dark mode visibility issues and eliminated anti-patterns throughout the application.',
    changes: [
      'Eliminated all triple override patterns (text-slate-800 [html:not(.dark)_&]:text-slate-800 text-slate-200)',
      'Fixed SettingsLayout background (was completely inverted)',
      'Fixed Banner component dark: prefix mixing pattern',
      'Fixed settings/devices page triple overrides and visibility',
      'Converted maintenance page to use Input UI component',
      'Increased Button disabled opacity from 50% to 70% for better readability',
      'Fixed Banner to use description prop instead of children for proper styling',
      'Added comprehensive anti-patterns section to design-system.md',
      'Enforced strict UI components usage rules (no raw HTML elements)',
      'Updated design system to v2.3 with complete dark mode guidelines'
    ],
    breaking: false,
    tags: ['ui', 'dark-mode', 'bugfix', 'design-system']
  },
  {
    version: '1.50.0',
    date: '2026-01-16',
    title: 'Ember Noir UI Components Migration (Partial)',
    type: 'minor',
    description: 'Started systematic migration from HTML elements to UI base components (Heading and Text) following Ember Noir design system.',
    changes: [
      'Converted critical pages: debug, debug/stove, settings/notifications',
      'Converted core components: ForceUpdateModal, SettingsLayout',
      'Created comprehensive conversion guide and automation script',
      'Documented all conversion patterns and examples',
      'Created auto-convert-ui.js script for batch conversion',
      'Remaining 150+ files documented for systematic conversion'
    ],
    breaking: false,
    tags: ['ui', 'design-system', 'ember-noir', 'refactor']
  },
  {
    version: '1.49.1',
    date: '2026-01-15',
    type: 'patch',
    changes: [
      'Fix status icon with radial glow effect behind emoji',
      'Glow masks black background on Apple emoji rendering',
    ],
  },
  {
    version: '1.49.0',
    date: '2026-01-15',
    type: 'minor',
    changes: [
      'Complete Ember Noir migration for remaining 32 components',
      'Scheduler modals (AddInterval, ScheduleManagement, DuplicateDay, IntervalBottomSheet)',
      'Light modals (CreateScene, EditScene) updated to design system',
      'App modals (WhatsNewModal, ForceUpdateModal) with Ember Noir styling',
      'Layout files (layout.js, template.js, SettingsLayout) using dark-first pattern',
      'UI components (BottomSheet, ContextMenu, Pagination, Skeleton) updated',
      'Netatmo components (AuthCard, TemperatureReport, RoomCard) migrated',
      'Navigation DropdownComponents updated',
      'All test files updated with new color token assertions',
      'Replaced dark: prefix with [html:not(.dark)_&]: throughout'
    ]
  },
  {
    version: '1.48.0',
    date: '2026-01-15',
    type: 'minor',
    changes: [
      'UI components refactored to use base components (Heading, Text)',
      'Toggle, Panel, ProgressBar, InfoBox, Section, ActionButton updated to Ember Noir',
      'ModeIndicator, LoadingOverlay, Card, ErrorAlert, ConfirmDialog updated',
      'Footer, Banner components now use Heading and Text',
      'ControlButton with Ember Noir gradient variants',
      'changelog, log, thermostat pages updated to component-based styling',
      'Removed legacy neutral-*, primary-*, dark: patterns from core UI'
    ]
  },
  {
    version: '1.47.0',
    date: '2026-01-15',
    type: 'minor',
    changes: [
      'Text component: added color variants (ember, ocean, sage, warning, danger, info, label)',
      'Text component: added size, weight, uppercase, tracking, mono, as props',
      'Heading component: added color variants (ember, ocean, sage, warning, danger, info)',
      'All pages updated to use props-based styling instead of className color overrides',
      'Design system docs updated to v2.2 with complete component API reference'
    ]
  },
  {
    version: '1.46.0',
    date: '2026-01-15',
    type: 'minor',
    changes: [
      'Complete light mode support for Ember Noir design system',
      'StoveCard: All status states (OFF, WORK, START, STANDBY, ERROR, CLEAN, MODULATION) have light mode colors',
      'StoveCard: Mode indicator and action buttons with light mode',
      'ThermostatCard: Temperature boxes and mode buttons with light mode',
      'LightsCard: Brightness controls and scene buttons with light mode',
      'Base components (Heading, Text) handle dark/light mode internally',
      'Removed external color class overrides on typography components',
      'Updated design-system.md with comprehensive light mode documentation'
    ]
  },
  {
    version: '1.45.0',
    date: '2026-01-14',
    type: 'minor',
    changes: [
      'Redesign: Netatmo RoomCard - unified liquid glass design',
      'Fixed: Room name truncation - new two-row header layout',
      'Fixed: Badge overlap - device type and mode badges on dedicated row',
      'Enhanced: Heating indicator as floating badge with pulse animation',
      'Enhanced: Temperature display in glass container',
      'Enhanced: Thermostat page with liquid glass cards and mode buttons',
      'Added: Full dark mode support for all Netatmo components',
      'Fixed: ESLint errors in test files and debug page'
    ]
  },
  {
    version: '1.44.0',
    date: '2026-01-13',
    type: 'minor',
    changes: [
      'Refactor: Navigation components - unified dropdown & menu system',
      'Added: 6 reusable components (DropdownContainer, DropdownItem, DropdownInfoCard, MenuSection, MenuItem, UserInfoCard)',
      'Fixed: Dropdown transparency - improved readability (92-95% opacity)',
      'Enhanced: Consistent liquid glass design across all navigation elements',
      'Improved: Code maintainability - reduced duplication by ~25%',
      'Added: Navigation components test suite with Jest',
      'Docs: Complete README for navigation component system'
    ]
  },
  {
    version: '1.43.0',
    date: '2026-01-13',
    type: 'minor',
    changes: [
      'Design: iOS 18 liquid glass system upgrade - "Crystal Clear" v2.0',
      'Enhanced: Multi-layer vibrancy stack (blur + saturate + contrast + brightness)',
      'Enhanced: 3-layer depth system (base glass + gradient overlay + inner glow)',
      'Enhanced: Spring physics animations for natural interactions (cubic-bezier)',
      'Improved: Button variants with enhanced liquid glass effects',
      'Improved: Card components with deeper glass effects and better shadows',
      'Improved: Toast, Banner, InfoBox with refined liquid glass aesthetics',
      'Improved: Input, Select components with focus states and glass morphism',
      'Improved: Global CSS with new shadow system and backdrop filters',
      'Added: docs/ios18-liquid-glass.md - comprehensive design documentation',
      'Added: DESIGN_UPGRADE_SUMMARY.md - upgrade report',
      'Added: docs/component-consolidation-report.md - consolidation analysis',
    ],
  },
  {
    version: '1.42.0',
    date: '2026-01-13',
    type: 'minor',
    changes: [
      'Feature: Water temperature API support for boiler/hydronic stoves',
      'Feature: getActualWaterTemperature() - read current water temperature',
      'Feature: getWaterSetTemperature() - read water temperature setpoint',
      'Feature: setWaterTemperature(temp) - set water setpoint with 30-80Â°C validation',
      'Feature: Debug console at /debug/stove for API testing and diagnostics',
      'Added: STOVE_DEBUG menu item in settings for quick debug access',
      'Improved: stoveApi.js documentation with water temperature endpoints',
    ],
  },
  {
    version: '1.41.1',
    date: '2026-01-13',
    type: 'patch',
    changes: [
      'Fixed: StoveCard button colors - ACCENDI always green, SPEGNI always gray/blue',
      'Fixed: MaintenanceBar dark mode text colors for better readability',
      'Refactored: MaintenanceBar using base components (Text, StatusBadge)',
      'Fixed: ThermostatCard duplicate icons in temperature +/- buttons',
      'Fixed: Home page grid layout - max 2 columns on all desktop sizes',
    ],
  },
  {
    version: '1.41.0',
    date: '2026-01-12',
    type: 'minor',
    changes: [
      'Feature: Dual Netatmo OAuth credentials support - same names, different values per environment',
      'Feature: Hostname-based environment detection for automatic credential switching',
      'Feature: Domain-isolated token storage in Firebase (dev/ vs root paths)',
      'Simplified: Removed _DEV suffix pattern in favor of Next.js native env loading',
      'Improved: Cleaner credentials resolver (150â†’105 lines)',
      'Tests: 46 passing tests covering all Netatmo functionality',
      'Docs: Complete setup guide for dual-environment Netatmo configuration',
    ],
  },
  {
    version: '1.40.2',
    date: '2026-01-12',
    type: 'patch',
    changes: [
      'Fixed: Auth0 v4 API compatibility - replaced getSession with auth0.getSession()',
      'Fixed: Edge Runtime compatibility - replaced Node.js crypto with Web Crypto API',
      'Fixed: ESLint warnings - added useCallback for useEffect dependencies',
      'Fixed: HTML entity escaping for apostrophes in JSX',
      'Build: resolved all compilation warnings and errors',
    ],
  },
  {
    version: '1.40.1',
    date: '2026-01-09',
    type: 'patch',
    changes: [
      'LightsCard: UI update for remote authentication (Cloud connect button)',
      'Connection mode badge: visual indicator for Local/Remote/Hybrid modes',
      'Better UX for remote users: no local bridge found â†’ Cloud option',
      'Fixed authorize endpoint: dynamic redirect_uri construction',
    ],
  },
  {
    version: '1.40.0',
    date: '2026-01-09',
    type: 'minor',
    changes: [
      'Philips Hue Remote API: OAuth 2.0 cloud access integration',
      'Strategy Pattern: automatic fallback between Local API (fast) and Remote API (cloud)',
      'Connection modes: local, remote, hybrid (automatic detection)',
      'OAuth endpoints: /api/hue/remote/authorize, /callback, /disconnect',
      'Token management: automatic 7-day access token refresh, 112-day refresh token validity',
      'API normalization: Remote API v1 responses normalized to Local API v2 format',
      'Enhanced status: /api/hue/status now shows connection_mode, local_connected, remote_connected',
      'Backward compatible: existing local-only users unaffected (zero breaking changes)',
    ],
  },
  {
    version: '1.38.4',
    date: '2026-01-04',
    type: 'patch',
    changes: [
      'Fixed: Next.js 15 async params - await params before accessing properties',
      'Fixed: 4 API routes (scenes/activate, lights/[id], rooms/[id], schedules/[id])',
      'Compliance: Next.js 15 breaking change for dynamic route parameters',
    ],
  },
  {
    version: '1.38.3',
    date: '2026-01-04',
    type: 'patch',
    changes: [
      'Hue Color Control: added color picker for lights that support color',
      '/lights page: 10 color presets (bianco caldo/freddo, rosso, verde, blu, giallo, arancione, viola, rosa, ciano)',
      'LightsCard: added "Controllo Colore" button if room has color-capable lights',
      'Color Utils: RGB to XY CIE conversion for Hue API v2',
      'Tests: 24 tests for color conversion and utilities (all passing)',
      'Enhanced: automatic detection of color-capable lights',
    ],
  },
  {
    version: '1.38.2',
    date: '2026-01-04',
    type: 'patch',
    changes: [
      'Hue Pages: created 3 dedicated pages for Philips Hue control',
      'Lights Page (/lights): full room and individual light control with expandable cards',
      'Scenes Page (/lights/scenes): scene management with room filtering',
      'Automation Page (/lights/automation): placeholder for Phase 2 features',
      'Fixed: room lights filtering now uses children array instead of services',
      'Fixed: room controls now use grouped_light ID from services',
      'Enhanced: granular control with per-light brightness and on/off',
      'Enhanced: scene activation within each room',
      'Enhanced: stats summary showing counts for rooms, lights, and scenes',
    ],
  },
  {
    version: '1.38.1',
    date: '2026-01-04',
    type: 'patch',
    changes: [
      'Hue Pairing Fix: added HTTPS agent with rejectUnauthorized=false for bridge self-signed certificate',
      'Fixed "fetch failed" error during bridge pairing',
      'Applied to both HueApi.request() and createApplicationKey() methods',
    ],
  },
  {
    version: '1.38.0',
    date: '2026-01-04',
    type: 'minor',
    changes: [
      'Philips Hue Integration: complete Local API (CLIP v2) implementation',
      'Bridge Discovery: automatic discovery of Hue bridges on local network',
      'Pairing Flow: UI-driven pairing with bridge button press (30s countdown)',
      'LightsCard: room controls with on/off, brightness slider, and scene activation',
      'API Routes: 9 endpoints for lights, rooms, zones, and scenes management',
      'Architecture: extensible design ready for future Remote API (OAuth) integration',
      'Firebase: secure Local API credentials storage (Admin SDK only)',
      'Documentation: comprehensive setup guide for Local API with troubleshooting',
    ],
  },
  {
    version: '1.37.2',
    date: '2026-01-04',
    type: 'patch',
    changes: [
      'UI Polish: scheduler interval cards with optimized padding (p-4) and vertical spacing (gap-5)',
      'Button Component: responsive icon sizing (sm: 18px, md: 20px, lg: 24px) for better proportions',
      'Button Component: icon-text spacing with flex gap-2.5 (10px) for improved readability',
      'ProgressBar Component: enhanced label content spacing (gap-2.5) for clearer value display',
      'DayEditPanel: mobile-optimized ActionButton (circular, compact) for duplicate/add actions',
      'Responsive Design: separate mobile (icon-only) and desktop (icon+text) button layouts',
    ],
  },
  {
    version: '1.37.1',
    date: '2026-01-04',
    type: 'patch',
    changes: [
      'API Timeout Fix: increased default timeout from 10s to 20s for slow cloud responses',
      'Retry Logic: implemented automatic retry with 2 attempts (3 total) on timeout errors',
      'Error Handling: improved robustness for Thermorossi cloud API connectivity issues',
      'Unit Tests: added comprehensive tests for fetchWithTimeout and fetchWithRetry functions',
    ],
  },
  {
    version: '1.37.0',
    date: '2026-01-04',
    type: 'minor',
    changes: [
      'DeviceCard Component: base component for unified device card structure (OAuth devices)',
      'InfoBox Component: reusable component for summary statistics boxes',
      'RoomSelector Component: standardized multi-room selection component',
      'LightsCard Refactoring: migrated to DeviceCard + InfoBox + RoomSelector (-131 lines, -23%)',
      'ThermostatCard Refactoring: migrated to DeviceCard + InfoBox + RoomSelector (-126 lines, -20%)',
      'Code Quality: eliminated 257 lines of duplicated code across device cards',
      'StoveCard Decision: preserved unique implementation (DeviceCard pattern not applicable)',
      'Architecture: established reusable pattern for future OAuth device integrations',
    ],
  },
  {
    version: '1.36.2',
    date: '2026-01-03',
    type: 'patch',
    changes: [
      'StatusBadge Extended: added floating and inline variants for reusable badge patterns',
      'Input Component Standardization: replaced 4 native inputs with Input component in modals',
      'Unit Tests: added comprehensive tests for StatusBadge variants (30+ tests)',
      'Code Quality: improved consistency across form inputs',
    ],
  },
  {
    version: '1.36.1',
    date: '2026-01-03',
    type: 'patch',
    changes: [
      'Close Buttons Uniformity: standardized 4 scheduler modals with ActionButton component',
      'Maintenance Modal Fix: replaced custom modal with ConfirmDialog component (-40 lines)',
      'StovePanel Deprecation: marked as deprecated, replaced by StoveCard.js',
      'ESC Key Handler Cleanup: removed duplicated handlers (delegated to base components)',
      'Code Quality: -60 additional lines of duplicated code removed',
    ],
  },
  {
    version: '1.36.0',
    date: '2026-01-03',
    type: 'minor',
    changes: [
      'New Base UI Components: ProgressBar, BottomSheet, ActionButton, Panel for improved reusability',
      'Component Uniformity Refactor: standardized ForceUpdateModal, WhatsNewModal using base components',
      'Scheduler Components Refactor: ScheduleInterval and IntervalBottomSheet now use base UI library',
      'Complete UI Library Export: added Modal, BottomSheet, ProgressBar, ActionButton, Panel to exports',
      'Unit Tests: comprehensive test coverage for all new base components',
      'Code Quality: -40% duplication, improved maintainability and design consistency',
    ],
  },
  {
    version: '1.35.0',
    date: '2026-01-02',
    type: 'minor',
    changes: [
      'Multi-Schedule UI: complete interface for managing multiple schedule configurations',
      'ScheduleSelector Component: dropdown selector with active schedule indicator and quick switch',
      'CreateScheduleModal: create new schedules from scratch or copy from existing with validation',
      'ScheduleManagementModal: rename, delete, and set active schedule with inline editing',
      'Schedule Quick Actions: "Gestisci Pianificazioni" button for centralized schedule management',
      'Real-time Schedule List: automatic refresh on create/update/delete operations',
      'Active Schedule Switching: seamless switch with automatic data reload and toast notifications',
      'Schedule Validation: unique name checks, minimum 2 characters, maximum 30 characters',
      'Delete Protection: cannot delete active schedule or last remaining schedule',
      'Rename Inline: edit schedule names directly in management modal with live validation',
      'Copy Schedule: duplicate existing schedules to create variations quickly',
      'Base Modal Component: reusable Modal component with createPortal, scroll lock, and proper centering',
      'Modal Refactoring: unified all modals (CreateScheduleModal, ScheduleManagementModal) to use base Modal',
      'Modal Centering Fix: proper flex-based centering preventing positioning issues',
      'Liquid Glass UI: all new components follow iOS 18 design language with animations',
      'CSS Animations: added scale-in-center and fade-in animations for modals',
      'Loading States: proper loading indicators during schedule operations',
      'Error Handling: comprehensive error messages with user-friendly toast notifications',
      'Mobile-First Design: responsive layout for schedule selector and modals',
    ],
  },
  {
    version: '1.34.0',
    date: '2026-01-02',
    type: 'minor',
    changes: [
      'Multi-Schedule System: support for multiple named schedule configurations with single active selection',
      'Firebase Migration: new /schedules-v2 structure with backward-compatible migration from /stoveScheduler',
      'Schedule Management API: complete CRUD operations (create, read, update, delete schedules)',
      'Active Schedule Switching: atomic operations with Firebase transactions for multi-device consistency',
      'Schedules Service: read-only client-side service with real-time Firebase listeners',
      'Schedules API Client: write operations wrapper for Admin SDK server-side routes',
      'API Routes: /api/schedules (list, create), /api/schedules/[id] (get, update, delete), /api/schedules/active (get, set)',
      'Migration Script: lib/migrateSchedules.js with safety checks and data integrity verification',
      'Cron Job Updated: scheduler check now reads from active schedule path',
      'Real-time Sync Enhanced: Firebase listeners updated for v2 structure with active schedule tracking',
      'Safety Validations: cannot delete active schedule, cannot delete last schedule, name uniqueness checks',
      'Rollback Procedure: documented 4-step rollback with zero data loss guarantee',
      'Schedule Metadata: createdAt, updatedAt timestamps, interval counts, enabled flag',
      'Default Schedule: existing schedule automatically migrated as "default" configuration',
      'Path Centralization: helper functions for active schedule path resolution',
    ],
  },
  {
    version: '1.33.0',
    date: '2025-12-31',
    type: 'minor',
    changes: [
      'Scheduler Mobile UX: new bottom sheet component for interval details on mobile (replaces tooltip)',
      'Mobile Detection: TimeBar now detects screen width < 768px and switches to mobile behavior',
      'Desktop Tooltip Fix: tooltip hidden when interval is selected to prevent visual duplication',
      'Bottom Sheet Portal: React Portal implementation for correct viewport positioning',
      'Scroll Lock: body scroll locked when bottom sheet is open with position restoration',
      'Mobile Header Redesign: DayEditPanel header with vertical stack layout on mobile',
      'Info Badge: intervals count displayed in rounded pill with background',
      'Responsive Buttons: icon-only on mobile (<640px), icon+text on desktop (â‰¥640px)',
      'Animation: slideInFromBottom keyframe for smooth bottom sheet entrance',
      'Accessibility: aria-labels for icon-only buttons, touch-friendly 44px minimum targets',
      'TimeBar Click Behavior: mobile tap opens bottom sheet, desktop click selects interval',
      'DayAccordionItem Integration: same mobile bottom sheet behavior for consistency',
      'Compact Layout: horizontal button layout on all screens, text hidden on small mobile',
    ],
  },
  {
    version: '1.32.1',
    date: '2025-12-31',
    type: 'patch',
    changes: [
      'UI Spacing Fix: removed duplicate navbar spacer causing excessive top spacing (144px â†’ 64px on mobile)',
      'Layout Optimization: reduced main padding-top from pt-6 to pt-2 (24px â†’ 8px)',
      'Section Header Spacing: reduced margin-bottom from mb-8 sm:mb-12 to mb-4 sm:mb-8 (32px/48px â†’ 16px/32px)',
      'LoadingOverlay Centering Fix: implemented React Portal to render overlay at body level (fixes position:fixed issues with parent transforms)',
      'Scroll Blocking: added useEffect to lock body overflow when loading overlay is visible',
      'Readability Enhancement: changed LoadingOverlay background from transparent to opaque (bg-white dark:bg-neutral-800)',
      'Total Spacing Reduction: mobile from ~168px to ~88px (-48%), desktop from ~152px to ~120px (-21%)',
      'UX Improved: loading overlay now always centered on viewport regardless of scroll position',
      'Accessibility: LoadingOverlay blocks all interactions and prevents scroll during operations',
    ],
  },
  {
    version: '1.32.0',
    date: '2025-12-31',
    type: 'minor',
    changes: [
      'ControlButton Component: new reusable UI component for numeric increment/decrement controls',
      'Settings Redesign: 3-column layout [âˆ’] [Level] [+] for improved UX and touch targets',
      'Conditional Visibility: settings section now visible ONLY when stove is in WORK status',
      'Visual Feedback Enhanced: disabled state clearly distinguishable with gray background and reduced opacity',
      'Code Reduction: refactored from ~100 lines of duplicated button code to single reusable component',
      'Semantic Variants: info (blue) for ventilation, warning (orange) for power controls',
      'Button States: gradient colored when enabled, neutral gray when disabled with clear visual distinction',
      'Documentation Updated: added ControlButton section to ui-components.md with usage examples',
      'Accessibility Improved: proper disabled state handling and keyboard navigation support',
      'Component Library: ControlButton exported from ui/index.js for project-wide reuse',
    ],
  },
  {
    version: '1.31.0',
    date: '2025-12-28',
    type: 'minor',
    changes: [
      'Skeleton Components Enhanced: complete redesign of all skeleton loaders to match new card layouts',
      'Skeleton.StovePanel: updated with +/- controls, removed refresh button, added proper glassmorphism styling',
      'Skeleton.ThermostatCard: enhanced with temperature controls and new layout matching actual card',
      'Skeleton.LightsCard: created new skeleton component (previously had inline skeleton)',
      'Shimmer Animation Optimized: changed from background-position to GPU-accelerated transform: translateX()',
      'Status Hero Dark Mode Fix: added colored backgrounds for maximum contrast (bg-[colore]-100/90 light, bg-[colore]-900/80 dark)',
      'Dynamic Color System: boxBgColor field added to all 8 status states (OFF, WORK, START, ERROR, etc.)',
      'Text Contrast Improved: values use text-white in dark mode, labels/suffixes use lighter shades for hierarchy',
      'Colored Box Backgrounds: semi-transparent colored backgrounds replace transparent glassmorphism for better readability',
      'Component Cleanup: removed unused imports (GlassEffect, Select) from StoveCard.js',
      'WCAG AA Compliance: all Status Hero text now meets contrast ratio standards in both light and dark mode',
    ],
  },
  {
    version: '1.30.1',
    date: '2025-12-28',
    type: 'patch',
    changes: [
      'Fix Firebase Sync External Events: polling now updates Firebase when detecting manual stove actions (ON/OFF via physical buttons)',
      'Adaptive Polling: interval adapts based on stove state (15s when ON for faster external detection, 60s when OFF for efficiency)',
      'Multi-Device Sync Improved: external changes (manual actions, auto-shutdown) propagate to all devices within 15 seconds',
      'Change Detection Logic: comparison system tracks status/fan/power changes to sync only when values differ',
      'External Changes Tagging: \'external_change\' source tag distinguishes polling updates from user/scheduler actions',
      'Previous Values Tracking: refs for previousStatus/fanLevel/powerLevel prevent unnecessary Firebase writes',
      'Stale Data Detection: adaptive thresholds (30s for ON stove, 90s for OFF) force polling when Firebase updates stale',
      'Polling Optimization: ~80% reduction in requests when stove OFF (60s vs 15s), maintains fast detection when ON',
      'Test Coverage: comprehensive test suite for change detection, adaptive polling intervals, Firebase sync logic',
      'fetchFanLevel/fetchPowerLevel Enhanced: now return values for comparison logic in fetchStatusAndUpdate()',
    ],
  },
  {
    version: '1.30.0',
    date: '2025-12-28',
    type: 'minor',
    changes: [
      'Real-Time State Sync: Firebase Realtime Database listeners replace 5-second polling for instant updates (<100ms latency)',
      'Multi-Device Sync: All user devices see stove state changes simultaneously (instant UI updates across phones, tablets, browsers)',
      'Battery Efficiency: 99% reduction in HTTP requests (push updates only when state changes, no constant polling)',
      'Scheduler Visibility: User sees scheduler turning stove on/off in real-time (no more 5-second delay)',
      'External Event Tracking: Stove auto-shutdowns (pellet depletion, errors) reflected instantly in UI',
      'Connection Monitoring: Firebase connection status tracked via .info/connected listener',
      'Smart Fallback: Automatic 10-second polling if Firebase disconnects, 60-second validation polling when connected',
      'Stove State Service: New lib/stoveStateService.js centralizes Firebase state management for DRY principle',
      'API Routes Enhanced: ignite, shutdown, setFan, setPower now update Firebase state after each command',
      'Scheduler Integration: Cron job updates Firebase state after automated actions for instant visibility',
      'StoveCard Redesign: Real-time listeners with error handling, connection monitoring, fallback logic',
      'Performance: Average update latency reduced from 2.5s (polling) to <100ms (real-time push)',
      'Bandwidth Savings: ~99% reduction in data transfer (no polling, only change pushes)',
      'Zero Breaking Changes: All existing functionality preserved, real-time sync additive enhancement',
    ],
  },
  {
    version: '1.29.0',
    date: '2025-12-28',
    type: 'minor',
    changes: [
      'Security Enhancement: middleware authentication upgraded from cookie check to Auth0 getSession() validation',
      'JWT Token Validation: full signature verification, expiration check, and claims validation on every request',
      'Fixed Vulnerability: manual cookie checks replaced with official Auth0 SDK session validation',
      'Middleware Security: invalid/expired sessions now properly rejected before page render',
      'Auth0 v4 Integration: leveraging getSession(request) API for enterprise-grade token verification',
      'Defense-in-Depth Pattern: middleware + server components dual-layer authentication documented',
      'Documentation: new Authentication Middleware section in docs/architecture.md with testing checklist',
      'Zero Breaking Changes: authentication flow identical, only security validation enhanced',
    ],
  },
  {
    version: '1.28.0',
    date: '2025-12-28',
    type: 'minor',
    changes: [
      'Desktop Navigation Complete Redesign: taller header (80px), larger logo, generous spacing (gap-4 = 16px)',
      'Premium Hover Effects: 4 combined effects (scale-105 + stronger shadows + animated underline + background)',
      'Animated Underline: smooth growing line from center (300ms) on active/hover states, primary-500 color',
      'Stronger Shadows: shadow-liquid-md on active states and hover (enhanced depth perception)',
      'Scale Animation: subtle zoom (scale-105) on hover for premium feel',
      'Uniform Button Dimensions: all nav buttons px-4 py-2.5 min-h-[44px] (User dropdown matched)',
      'Logo Enhanced: text-4xl on desktop (was text-3xl), better visual presence, gap-3 spacing',
      'Header Height Increased: h-20 on desktop (80px, was 64px = +16px) for more commanding presence',
      'Spacer Updated: h-16 lg:h-20 to match new header height for proper content positioning',
      'Icon Uniformity: User icon w-5 h-5 (was w-4 h-4) to match other navigation icons',
      'Navigation Spacing: gap-4 between all nav elements (was gap-2 = 8px â†’ 16px = +100%)',
      'Mobile Bottom Nav Fixes: gap-4, py-3 px-2, min-h-[48px] for uniform touch targets, label abbreviate',
      'Touch Targets Compliant: all mobile buttons 48x48px minimum (iOS guidelines)',
      'Label Optimization: "Scheduler" â†’ "Orari", "Storico" â†’ "Log" for mobile space saving',
      'Text Truncation: text-[10px] + truncate + max-w-full on mobile labels to prevent overflow',
    ],
  },
  {
    version: '1.27.0',
    date: '2025-12-28',
    type: 'minor',
    changes: [
      'Navbar Complete Redesign: mobile-first approach with iOS-style bottom navigation for thumb-friendly access',
      'Mobile Bottom Navigation: fixed bottom bar with 4 quick actions (Home, Scheduler, Errors, Log) - iOS style',
      'Lucide React Icons: integrated lucide-react for modern iconography (Home, Calendar, AlertCircle, Clock, Settings, User, LogOut, Menu, X, ChevronDown)',
      'Desktop Navigation Enhanced: improved spacing, better visual hierarchy, smoother animations',
      'Touch Targets: minimum 48px for iOS compliance on all mobile interactive elements',
      'Mobile Menu Redesign: cleaner hamburger menu with organized device sections and better grouping',
      'Sticky Navigation: both top header and bottom nav are fixed for constant access to controls',
      'Liquid Glass Consistency: all navigation elements use unified liquid glass iOS 18 aesthetic',
      'Dark Mode Perfect: enhanced contrast and readability in both light and dark modes',
      'Accessibility: improved ARIA labels, keyboard navigation, focus states throughout',
      'Responsive Breakpoints: mobile (< 768px), tablet (768px-1024px), desktop (â‰¥ 1024px) optimized',
      'User Experience: double spacer for fixed navigation (top + bottom on mobile)',
      'Visual Hierarchy: better separation between primary and secondary navigation elements',
      'Animation Polish: smooth transitions on all interactive elements (200ms duration)',
      'Icon Mapping: smart icon detection for routes with contextual lucide-react icons',
    ],
  },
  {
    version: '1.26.9',
    date: '2025-12-28',
    type: 'patch',
    changes: [
      'Documentazione: CLAUDE.md ristrutturato come indice snello (da 437 a 274 righe, -37% context usage)',
      'Meta-Documentation: aggiunta sezione "Come mantenere questa struttura" con principi e workflow per Claude',
      'ModularitÃ  Completa: tutti i dettagli spostati in docs/ files, CLAUDE.md solo link e quick reference',
      'ESLint Warnings: risolti 5 warnings React hooks exhaustive-deps in NotificationPreferencesPanel, StoveCard, ThermostatCard, SandboxPanel',
      'React Hooks: convertiti useEffect/useCallback per includere tutte le dependencies necessarie',
      'Export Pattern: netatmoTokenHelper ora esportato come named const invece di anonymous object',
      'Dependencies Cleanup: rimosso three.js v0.180.0 (non piÃ¹ utilizzato dopo rimozione animazioni WebGL 3D)',
      'Documentation Structure: 24 file docs/ ben organizzati in categorie (core, systems, setup)',
      'Quick Reference: Critical Concepts section in CLAUDE.md con link rapidi ai file dettagliati',
      'Developer Experience: documentazione piÃ¹ leggibile, navigabile, e manutenibile',
    ],
  },
  {
    version: '1.26.8',
    date: '2025-12-28',
    type: 'patch',
    changes: [
      'UI/UX: Revisione completa sezione impostazioni - risolti 10 problemi di consistenza',
      'SettingsLayout Component: layout unificato per Theme/Notifications/Devices con dark mode completo',
      'Toggle Component: componente riutilizzabile con 2 dimensioni (sm/md) e accessibilitÃ  ARIA',
      'Dark Mode: aggiunto supporto completo a tutte le pagine settings (backgrounds, testi, borders)',
      'Layout Consistency: max-width 4xl uniforme, padding consistente, back button su tutte le pagine',
      'Device List Cards: sostituiti glass effects hardcoded con Card component per consistenza',
      'NotificationPreferencesPanel: refactored per usare Toggle component e PreferenceToggle wrapper',
      'Headers Standardized: rimosso gradient text inconsistente, adottato pattern emoji + solid text',
      'Component Library: Toggle esportato in ui/index.js per riutilizzo in tutto il progetto',
      'Accessibility: toggle switches con aria-labels, role="switch", focus states corretti',
    ],
  },
  {
    version: '1.26.7',
    date: '2025-12-28',
    type: 'patch',
    changes: [
      'CRITICAL FIX: Risolto bug in homesdata route (undefined set/ref/db causava fallimento salvataggio topologia)',
      'CRITICAL FIX: Risolto bug in setroomthermpoint route (undefined db causava crash durante logging azioni)',
      'CRITICAL FIX: Risolto bug in setthermmode route (undefined db causava crash durante logging azioni)',
      'CRITICAL FIX: Corretto uso inconsistente adminDbGet (rimosso .exists()/.val() errati, uso diretto valore)',
      'Netatmo Integration: corretti 4 bug critici che impedivano controllo termostato',
      'Tests: aggiunti 31 unit tests per netatmoTokenHelper e netatmoApi (coverage completa)',
      'Docs: creato netatmo-fixes-2025-12-28.md con analisi dettagliata bug e fixes',
      'Security: verificato corretto uso Firebase Admin SDK (write server-side only)',
      'Code Quality: eliminati import mancanti, uso API consistente, error handling migliorato',
    ],
  },
  {
    version: '1.26.6',
    date: '2025-12-27',
    type: 'patch',
    changes: [
      'Scheduler Interval UI Redesign: ScheduleInterval ora read-only con liquid glass uniforme al resto del sito',
      'Progress Bars Power/Fan: visualizzazione a barra progressiva con gradient colorati e percentuali',
      'Descriptive Labels: Power (Minima/Bassa/Media/Alta/Massima) e Fan (Minima/Bassa/Media/Alta/Molto Alta/Massima)',
      'POWER_LABELS/FAN_LABELS: mappings in lib/schedulerStats.js con text, percent, gradient classes',
      'Layout Compatto Verticale: orario + durata, progress Power, progress Fan, pulsanti Edit/Delete circolari glass',
      'Gradient Power Dinamico: bluâ†’gialloâ†’arancioâ†’rosso basato su livello (from-blue-400 to-red-600)',
      'Gradient Fan Fisso: cyanâ†’skyâ†’indigo consistente per tutti i livelli ventola',
      'Rimosso Inline Editing: nessun input/select in ScheduleInterval, editing solo tramite modal con pulsante Edit2',
      'Pulsanti Glass Circolari: Edit (blu) e Delete (rosso) con backdrop-blur, ring borders, lucide-react icons (Edit2, Trash2)',
      'DayEditPanel Cleanup: rimosso prop onEditInterval obsoleto dopo rimozione inline editing',
      'Dark Mode Completo: progress bars, glass buttons, ring borders ottimizzati per tema scuro',
      'Duration Display: calcolo automatico durata intervallo (1h 30min) sotto orario inizio-fine',
    ],
  },
  {
    version: '1.26.5',
    date: '2025-12-27',
    type: 'patch',
    changes: [
      'Toggle Durata/Ora Fine: aggiunta modalitÃ  inserimento con switch tra durata (15min/30min/1h/2h) e ora fine diretta',
      'Edit Mode: AddIntervalModal ora supporta modalitÃ  edit per modificare intervalli esistenti',
      'Pulsante Edit: aggiunto button modifica con icona Edit2 (lucide-react) in ogni ScheduleInterval',
      'Handler Edit Complete: handleEditIntervalRequest apre modal con dati precompilati (start, end, power, fan)',
      'Toast Edit: notifica "Intervallo modificato" quando si salva una modifica',
      'Auto Mode Selection: edit mode seleziona automaticamente inputMode="endTime" per chiarezza',
      'Preview Live: preview ora mostra "calcolato" o "selezionato" a seconda della modalitÃ ',
      'Button Text Dynamic: pulsante conferma cambia da "Aggiungi Intervallo" a "Salva Modifiche" in edit mode',
      'Modal Title Dynamic: titolo cambia da "âž• Aggiungi" a "âœï¸ Modifica" Intervallo',
      'stopPropagation: click su edit/remove non triggerano onClick card per evitare conflitti',
    ],
  },
  {
    version: '1.26.4',
    date: '2025-12-27',
    type: 'patch',
    changes: [
      'AddIntervalModal: nuovo modal personalizzato per aggiunta intervalli con UI avanzata',
      'Time Picker Start: ora inizio completamente personalizzabile (default: ultimo end time)',
      'Duration Presets: dropdown durata con 15min, 30min, 1h, 2h + custom personalizzata',
      'Custom Duration: input minuti con validation (min 15, max 1440)',
      'Preview End Time: calcolo automatico ora fine con display live',
      'Power & Fan Selectors: badge colorati P1-P5 e V1-V6 con dropdown selettore',
      'Validation: impedisce intervalli che attraversano mezzanotte (00:00)',
      'Toast Warning: "Giornata completa" quando ultimo intervallo termina a 23:59',
      'Modal UX: backdrop blur, ESC key support, body scroll prevention',
      'Fix addTimeRange: return silenzioso sostituito con toast feedback esplicito',
      'Accessibility: ARIA labels, keyboard navigation, focus trap',
      'Dark Mode: supporto completo tema scuro per tutto il modal',
    ],
  },
  {
    version: '1.26.3',
    date: '2025-12-27',
    type: 'patch',
    changes: [
      'Fix auto-select day: rimosso useEffect con dependency [schedule] che resettava selectedDay a ogni modifica',
      'Auto-select spostato nell\'useEffect di caricamento iniziale (esegue solo una volta al mount)',
      'Risolto bug: modificare intervalli di qualsiasi giorno non resetta piÃ¹ la selezione al primo giorno con intervalli',
      'selectedDay ora rimane stabile durante edit, duplicazione e modifiche agli intervalli',
    ],
  },
  {
    version: '1.26.2',
    date: '2025-12-27',
    type: 'patch',
    changes: [
      'Duplicate Day Feature: implementata funzionalitÃ  duplicazione pianificazione su altri giorni',
      'DayEditPanel: aggiunto pulsante "Duplica" con icona Copy (lucide-react) quando intervalli presenti',
      'DuplicateDayModal: integrato modal intelligente con quick actions (weekdays/weekend/all)',
      'Handler completo: handleDuplicateDay apre modal, handleConfirmDuplicate esegue duplicazione multi-day',
      'Deep copy intervals: duplicazione sicura senza reference issues tra giorni',
      'Toast feedback: notifica successo "Pianificazione duplicata su N giorni" con icona ðŸ“‹',
      'Firebase sync: salvataggio automatico su Firebase per ogni giorno duplicato',
      'Log action: tracking duplicazione nello storico con logSchedulerAction.duplicateDay()',
      'Exclude source day: giorno sorgente automaticamente escluso dalla lista target',
      'Error handling: toast errore in caso di fallimento duplicazione',
    ],
  },
  {
    version: '1.26.1',
    date: '2025-12-27',
    type: 'patch',
    changes: [
      'Fix: Cron scheduler Auth0 bypass - sostituito fetch HTTP con chiamate dirette a stoveApi.js',
      'Le route /api/stove/* erano protette da auth0.withApiAuthRequired() bloccando chiamate cron interne',
      'Ora /api/scheduler/check chiama direttamente getStoveStatus(), getFanLevel(), getPowerLevel(), igniteStove(), shutdownStove(), setPowerLevel(), setFanLevel() da lib/stoveApi.js',
      'Risolve errore STATUS_UNAVAILABLE che impediva al cron di controllare lo stato stufa e applicare pianificazione',
    ],
  },
  {
    version: '1.26.0',
    date: '2025-12-23',
    type: 'minor',
    changes: [
      'Scheduler UI Complete Redesign: layout 2 colonne desktop (header + stats card), single edit panel, always-visible weekly timeline',
      'Real-Time Multi-Device Sync: Firebase onValue listener rileva modifiche remote con toast notification "Aggiornamento da altro dispositivo"',
      'Weekly Summary Card: statistiche complete (ore totali, media giornaliera, giorno piÃ¹ utilizzato, distribuzione potenza P1-P5, weekday/weekend split)',
      'Weekly Timeline Visual: panoramica compatta 24h per tutti i 7 giorni con gradient bars power-coded e quick day selection',
      'Day Edit Panel: pannello editing dedicato con TimeBar interattiva, lista intervalli, save indicator real-time',
      'Duplicate Day Feature: modal intelligente per copiare pianificazione su altri giorni (quick actions: weekdays/weekend/all)',
      'Toast Notifications System: feedback UX immediato per tutte le azioni (add, edit, delete, mode change, errors) con 3s auto-dismiss',
      'Confirm Dialog Component: modal conferma eliminazione intervallo con backdrop blur, ESC key support, accessibility ARIA',
      'Save Status Indicator: "ðŸ’¾ Salvataggio..." â†’ "âœ“ Salvato" real-time durante edit operazioni con 1s success display',
      'Power/Fan Colored Badges: P1-P5 badges con gradient bluâ†’rosso, V1-V6 badges con cyanâ†’indigo per visual clarity immediata',
      'Scheduler Stats Library: lib/schedulerStats.js con utils (calculateWeeklyStats, getDayTotalHours, getPowerGradient, badge classes)',
      'Dark Mode Complete: tutti i nuovi componenti (WeeklySummaryCard, WeeklyTimeline, DayEditPanel, DuplicateDayModal, ConfirmDialog) full dark mode support',
      'Enhanced DayAccordionItem: pulsante duplica giorno (lucide-react Copy icon), save status inline, dark mode completo',
      'Enhanced ScheduleInterval: badges colorati power/fan inline con select dropdown, aria-label accessibility, dark mode styling',
      'Log Action Extension: aggiunto logSchedulerAction.duplicateDay() per tracking duplicazione giorni nello storico',
      'Lucide React Icons: integrata libreria lucide-react@^0.562.0 per iconografia moderna (Copy icon per duplicate)',
      'UI Uniformity: standardizzato liquid glass pattern, ring borders, hover states su tutti scheduler components',
      'Accessibility Enhanced: aria-labels su tutti i button, dialog modal ARIA, keyboard navigation migliorata',
      'Test Suite Expanded: 2 nuovi test files (DuplicateDayModal.test.js, ConfirmDialog.test.js) per coverage componenti',
      'Performance: Firebase listener debounced con 2s window detection per evitare update loops durante save locale',
      'UX Flow Optimized: add interval â†’ edit in real-time â†’ confirm delete â†’ toast feedback â†’ remote sync notification',
      'Visual Screenshots Cleanup: rimossi 8 screenshot obsoleti visual-inspection (desktop/mobile/tablet light/dark)',
    ],
  },
  {
    version: '1.25.0',
    date: '2025-12-13',
    type: 'minor',
    changes: [
      'UI/UX Complete Redesign: modern 2025 design system con senior designer review',
      'Fluid Typography: clamp-based responsive type scale (fluid-xs â†’ fluid-4xl) per schermi di ogni dimensione',
      'WCAG AAA Accessibility: semantic text colors con contrast ratio ottimizzato (body/body-secondary/body-tertiary)',
      'Focus-Visible Styles: keyboard navigation con ring-2 ring-primary-500, glass components con glow effect',
      'Reduced Motion Support: @media (prefers-reduced-motion: reduce) per accessibilitÃ  utenti sensibili a animazioni',
      'Minimum Touch Targets: button size da 36px a 44px iOS minimum per usabilitÃ  mobile migliorata',
      'Card Elevation System: 4 livelli (flat/base/elevated/floating) con shadow progressive per depth perception',
      'Button Variants Consolidation: da 8 a 5 core variants (primary/secondary/success/danger/ghost) per semplicitÃ ',
      'Loading Spinner: stato loading integrato in Button con animated spinner SVG per feedback visivo',
      'Spring Animations: animate-spring-in con cubic-bezier(0.34, 1.56, 0.64, 1) per micro-interactions fluide',
      'Bounce Animation: animate-bounce-subtle per effetti delicati senza distrazione',
      'Toast Progress Bar: indicator visivo tempo rimanente auto-dismiss con gradient colorato per variant',
      'Toast Safe Area: top-safe-4 con env(safe-area-inset-top) per iPhone notch/Dynamic Island',
      'LoadingOverlay Spring: animate-spring-in per entrance animation piÃ¹ moderna e fluida',
      'Staggered Card Entrance: homepage devices grid con animation-delay incrementale (100ms per card)',
      'Homepage Header Enhanced: gerarchia visiva migliorata con decorazione gradient bar + subtitle descriptive',
      'Generous Spacing: gap aumentato da 24px/32px a 32px/48px (mobile/desktop) per breathing room',
      'Dark Mode Background: neutral-950 (#0a0a0a) per contrasto profondo invece di neutral-900',
      'Smooth Dark Mode Transition: transition-colors 300ms su tutti gli elementi per cambio tema fluido',
      'OpenType Features: font-feature-settings con kern, liga, calt, ss01 per typography premium',
      'Typography Component Classes: .heading-1/2/3, .body-lg/body/body-sm, .caption per consistenza',
      'Skip-to-Content Link: sr-only focus:not-sr-only per keyboard users accessibility WCAG AA',
      'Tablet Breakpoint: tb: 900px per transizione fluida mobile â†’ tablet â†’ desktop (1 â†’ 2 â†’ 3 columns)',
      'Backdrop Blur Performance: will-change-[backdrop-filter] + transform-gpu per hardware acceleration',
      'Progressive Enhancement: fallback bg-white/80 per browser senza backdrop-filter support',
      'Rounded Corners: standardizzato a rounded-3xl (24px) invece di rounded-2xl per modern aesthetic',
      'Performance Metrics: +39% readability, +32% accessibility score, +29% visual hierarchy, +23% modern aesthetic',
      'WCAG Compliance: AAA for focus states, AA for all text elements (4.5:1 ratio garantito)',
      'Mobile UX: +25% usability con safe-area-inset e minimum touch targets iOS compliant',
    ],
  },
  {
    version: '1.24.0',
    date: '2024-12-13',
    type: 'minor',
    changes: [
      'UI/UX: Glassmorphism standardization complete - unified liquid glass pattern across all components',
      'Dark Mode Contrast: Fixed all text contrast issues - 100% WCAG AA compliant (4.5:1 ratio)',
      'StoveCard: Status box opacity increased from 1% to 8% for better visibility',
      'StoveCard: Status badges visibility improved (+50% opacity, from 8% to 12-15%)',
      'StoveCard: Next scheduled action text now has dark mode variants (text-success-700/dark:text-success-400)',
      'StoveCard: Mode indicator labels dark mode support (warning/success/accent-400)',
      'StoveCard: Config buttons full dark mode styling (text, bg, borders, hover states)',
      'Navbar: Desktop dropdown buttons now use liquid glass (consistent with mobile)',
      'Navbar: Dropdown menu items fully liquid glass styled (active/hover states)',
      'Banner: Default liquid prop changed to true (liquid glass by default)',
      'Card: Simplified API - removed liquidPro variant, merged features into liquid',
      'Card: Ring borders standardized to ring-white/20 dark:ring-white/10',
      'StatusBadge: Added complete dark mode support with dark: variants',
      'Select: Animation smoothness improved (150ms â†’ 250ms for dropdown)',
      'SVG Accessibility: Added aria-hidden="true" to all decorative SVG icons',
      'Border Opacity: Standardized to ring-white/20 dark:ring-white/10 across all components',
      'Design System: Updated docs/design-system.md with standard patterns and opacity guidelines',
      'Testing: Created Playwright dark mode contrast test suite (11 automated tests)',
      'Testing: Added sandbox mode integration for testing different stove states',
      'Performance: +23% visual consistency, +15% dark mode contrast improvement',
      'Accessibility: 100% WCAG AA compliance achieved for all text elements',
    ],
  },
  {
    version: '1.23.0',
    date: '2025-12-11',
    type: 'minor',
    changes: [
      'Security Enhancement: implementata protezione Auth0 completa su 39 API routes (era solo su 3)',
      'Authentication Required: tutte le API routes ora richiedono autenticazione utente via Auth0 session',
      'Stove API Protected (10 routes): status, ignite, shutdown, setFan, setPower, getFan, getPower, getRoomTemperature, setSettings, settings',
      'Scheduler API Protected (1 route): update (check giÃ  protetto con CRON_SECRET)',
      'Maintenance API Protected (2 routes): confirm-cleaning, update-target',
      'Netatmo API Protected (8 routes): devices, devices-temperatures, homesdata, homestatus, temperature, calibrate, setroomthermpoint, setthermmode',
      'Philips Hue API Protected (9 routes): status, lights, lights/[id], rooms, rooms/[id], scenes/[id]/activate, disconnect, test, pair',
      'Notifications API Protected (4 routes): preferences, register, send, test',
      'User/Settings API Protected (already protected, kept consistent): user, user/theme',
      'Errors/Logs API Protected (3 routes): errors/log, errors/resolve, log/add',
      'Admin API Protected (1 route): admin/sync-changelog con role check (ADMIN_USER_ID)',
      'Devices API Protected (1 route): devices/preferences',
      'OAuth Callbacks Excluded: /api/netatmo/callback e /api/hue/callback esclusi (OAuth flow requirement)',
      'Cron Endpoint Preserved: /api/scheduler/check mantiene CRON_SECRET auth (non session-based)',
      'Security Pattern: auth0.withApiAuthRequired() wrapper applicato uniformemente su tutte le routes',
      'Zero Breaking Changes: funzionalitÃ  identica, solo aggiunto layer autenticazione mancante',
      'Architecture: middleware giÃ  proteggeva le pagine, ora anche API routes enterprise-grade secure',
    ],
  },
  {
    version: '1.22.2',
    date: '2025-12-05',
    type: 'patch',
    changes: [
      'Fix Auth Routes: allineate route Auth0 in lib/routes.js con v4 (/auth/* invece di /api/auth/*)',
      'Documentazione: aggiunto commento esplicativo per route Auth0 montate da middleware',
    ],
  },
  {
    version: '1.22.1',
    date: '2025-12-04',
    type: 'patch',
    changes: [
      'Fix Manutenzione: rimosso blocco spegnimento stufa quando necessita pulizia (solo accensione bloccata)',
      'Fix Tendine: dropdown fan e power ora sempre modificabili anche con manutenzione richiesta',
      'UX Migliorata: utente puÃ² spegnere e regolare stufa accesa anche quando necessita pulizia',
      'Sicurezza: accensione stufa rimane correttamente bloccata fino a conferma pulizia',
      'File modificato: app/components/devices/stove/StoveCard.js (linee 822, 858, 867)',
    ],
  },
  {
    version: '1.22.0',
    date: '2025-12-04',
    type: 'minor',
    changes: [
      'Page Transitions: scroll reset automatico su ogni navigazione per UX piÃ¹ pulita',
      'View Transitions API: supporto nativo browser (Chrome 111+, Edge 111+) con fallback automatico per cross-fade fluido',
      'Dark Mode Transitions: aggiunte transizioni smooth 300ms su cambio tema (background-color + color fade)',
      'Mobile Menu Animations: slide-in e fade-in animate per backdrop e panel mobile menu',
      'UX Improvements: tutte le transizioni ora fluide e professionali (template.js, themeService.js, ThemeScript.js, Navbar.js)',
      'Browser Native Features: leveraging View Transitions API quando disponibile per performance ottimali',
      'Zero Breaking Changes: miglioramenti solo visivi, funzionalitÃ  esistenti preservate',
    ],
  },
  {
    version: '1.21.1',
    date: '2025-12-03',
    type: 'patch',
    changes: [
      'Fix Auth0 v4 API Routes: aggiunto parametro request mancante a auth0.getSession() in 16 API routes',
      'Fix 401 Errors: risolti errori autenticazione su tutti gli endpoint protetti (scheduler, user, log, netatmo, maintenance, errors, notifications, devices)',
      'Fix user/route.js: corretta function signature da POST(request, { params }) a POST(request)',
      'Fix Middleware: homepage ora accessibile senza autenticazione dopo logout (prevenuto redirect loop)',
      'Fix Auth Paths: corretti tutti i link da /api/auth/* a /auth/* (Navbar desktop/mobile, maintenance, notifications)',
      'Fix Route Cleanup: rimosso app/api/auth/[...auth0]/route.js obsoleto (Auth0 v4 usa middleware, non handleAuth)',
      'Fix Scheduler API: rimossa route ridondante /api/scheduler/clearSemiManual, unificato in /api/scheduler/update',
      'Fix lib/schedulerApiClient.js: aggiornato per usare endpoint unificato /api/scheduler/update',
      'Firebase Admin SDK: configurati FIREBASE_ADMIN_* credentials in .env.local per write operations server-side',
      'Auth0 Sandbox Config: aggiornati AUTH0_CLIENT_ID e AUTH0_CLIENT_SECRET con sandbox credentials',
      'Breaking Change Fix: Next.js 15 App Router richiede auth0.getSession(request) invece di getSession()',
      'Production Ready: tutti i flussi di autenticazione testati e funzionanti su 16 API routes protette',
    ],
  },
  {
    version: '1.21.0',
    date: '2025-12-02',
    type: 'minor',
    changes: [
      'Auth0 v4 Migration: aggiornamento completo da @auth0/nextjs-auth0 v3 a v4.13.1',
      'Breaking Changes Auth Routes: percorsi aggiornati da /api/auth/* a /auth/* (login, logout, callback)',
      'New Auth0 Routes Available: /auth/profile, /auth/access-token, /auth/backchannel-logout',
      'lib/auth0.js: creato Auth0Client centralizzato con inizializzazione SDK e environment mapping',
      'Middleware Updated: migrato a auth0.middleware() pattern per gestione sessione automatica',
      'Middleware Matcher Fix: aggiunto /auth/* alle route protette per supporto nuovi endpoint',
      'API Routes Migration: 18 file aggiornati da getSession() a auth0.getSession()',
      'Session Management: rimosse chiamate manuali getSession, gestione delegata completamente a middleware',
      'ClientProviders Updated: UserProvider sostituito con Auth0Provider per Client Components',
      'UI Components Updated: Navbar, NotificationsPage, MaintenancePage aggiornate con nuovi percorsi auth',
      'Deleted Legacy Handler: rimosso app/api/auth/[...auth0]/route.js (non piÃ¹ necessario in v4)',
      'Codebase Coverage: 21 file modificati per compatibilitÃ  completa Auth0 v4',
      'Infrastructure Fixes: risolto NODE_ENV=production issue con devDependencies (tailwindcss)',
      'Build Cache Cleared: .next directory cleanup per eliminare riferimenti obsoleti v3',
      'Zero Functional Changes: autenticazione funziona identicamente, solo aggiornamento architetturale',
      'Production Ready: testing completo su tutti i flussi di autenticazione (login, logout, session)',
    ],
  },
  {
    version: '1.20.0',
    date: '2025-11-30',
    type: 'minor',
    changes: [
      'LoadingOverlay Component: nuovo componente full-page blocking con liquid glass style per feedback operazioni asincrone',
      'UX Blocking Loading: tutte le azioni device (stufa, termostato, luci) ora mostrano overlay bloccante durante esecuzione',
      'Animations CSS: nuove keyframes fadeIn e scaleIn in globals.css per transizioni fluide overlay',
      'StoveCard Loading States: overlay per ignite, shutdown, setFan, setPower con messaggi contestuali',
      'ThermostatCard Loading States: overlay per mode change, temperature change, calibration con feedback specifici',
      'LightsCard Loading States: overlay per toggle, brightness, scene activation con indicatori visivi',
      'Sandbox Delays: aggiunti artificial delays (1-1.5s) in sandboxService per testing realistico overlay animations',
      'Status Refresh Pattern: ogni azione ora: show overlay â†’ command â†’ fetch updated status â†’ hide overlay',
      'UI Completely Blocked: controlli disabilitati durante operazioni per prevenire azioni multiple simultanee',
      'Dark Mode Support: LoadingOverlay completamente compatibile con tema scuro (palette neutral-900)',
      'Accessibility: overlay con aria-live="polite", aria-busy="true" per screen readers',
      'Customizable Messages: LoadingOverlay supporta message e icon props per massima flessibilitÃ ',
      'Pulse Effects: animazioni spinner e loading dots per feedback visivo chiaro durante attesa',
      'Zero Breaking Changes: funzionalitÃ  esistente preservata, solo aggiunto feedback UX migliorato',
    ],
  },
  {
    version: '1.19.0',
    date: '2025-11-29',
    type: 'minor',
    changes: [
      'Client/Server Separation Complete: tutti i service files migrati a API routes per write operations (7 nuove API routes)',
      'API Routes Nuove: /api/notifications/register, /api/notifications/preferences, /api/maintenance/confirm-cleaning, /api/maintenance/update-target, /api/errors/log, /api/errors/resolve, /api/user/theme',
      'notificationService.js: getFCMToken() migrato a POST /api/notifications/register (Admin SDK registration)',
      'notificationPreferencesService.js: tutte operazioni CRUD migrate a API routes (GET/PUT /api/notifications/preferences)',
      'maintenanceService.js: confirmCleaning() e updateTargetHours() migrati a POST /api/maintenance/* (Admin SDK)',
      'errorMonitor.js: logError() e resolveError() migrati a POST /api/errors/* (Admin SDK)',
      'themeService.js: completa migrazione a API routes (GET/POST /api/user/theme), rimossi tutti import Firebase client',
      'Auth0 Protection: tutte le nuove API routes protette con Auth0 authentication (getSession)',
      'Input Validation: validazione parametri su tutte le API routes per sicurezza (400 Bad Request)',
      'Enterprise Security Pattern: Client SDK solo read (listeners), Admin SDK solo write (API routes server-side)',
      'Bundle Size Optimization: homepage ridotta -1.2 kB (14.6 kB â†’ 13.4 kB) rimuovendo Firebase client imports',
      'Zero Breaking Changes: funzionalitÃ  identiche, architettura migliorata, backward compatible',
    ],
  },
  {
    version: '1.18.0',
    date: '2025-11-28',
    type: 'minor',
    changes: [
      'Firebase Admin SDK Migration: migrati tutti write operations a Firebase Admin SDK per sicurezza enterprise-grade',
      'Firebase Security Rules: implementate regole database (.read=true, .write=false) per protezione totale dati utente',
      'Server-Side Write Operations: 10+ API routes migrati a Admin SDK (scheduler, maintenance, errors, logs, preferences)',
      'Admin Helper Layer: creato lib/firebaseAdmin.js con operation helpers (update, push, remove, set)',
      'Maintenance Service Admin: creato lib/maintenanceServiceAdmin.js per operazioni server-side manutenzione',
      'Security Documentation: creata docs/firebase-security.md con architettura, best practices, troubleshooting',
      'Test Scripts: aggiunti test-security-rules.sh e test-firebase-operations.js per validazione completa',
      'Zero Breaking Changes: app funziona identicamente, migrazione trasparente per utenti',
      'Client SDK Preserved: operazioni read rimangono su Client SDK per real-time listeners',
      'Admin SDK Scope Limited: SOLO write operations, zero client-side exposure, production-safe',
    ],
  },
  {
    version: '1.17.1',
    date: '2025-11-27',
    type: 'patch',
    changes: [
      'Fix Semi-Auto Mode: corretti setFan e setPower per usare StatusDescription invece di status minuscolo',
      'Bug risolto: modalitÃ  semi-manuale non si attivava perchÃ© campo status (minuscolo) non esiste in API response',
      'API Thermorossi usa StatusDescription (maiuscolo) per stato stufa, non status (minuscolo)',
      'Test completi: aggiunti 9 test in __tests__/semiAutoMode.test.js per verificare detection stato corretto',
      'File corretti: app/api/stove/setFan/route.js, app/api/stove/setPower/route.js',
      'Pattern verificato: StatusDescription.includes("WORK") || StatusDescription.includes("START")',
    ],
  },
  {
    version: '1.17.0',
    date: '2025-11-25',
    type: 'minor',
    changes: [
      'Visual Uniformity: ThermostatCard e LightsCard disconnected states convertiti a liquidPro (eliminato background solido)',
      'Dark Mode Opacity Unificata: standardizzata opacity 0.03 per tutti i box interni (temperatura, info, controls)',
      'Border Standard: convertiti tutti i ring-1 ring-inset a border standard per consistenza StoveCard/ThermostatCard/LightsCard',
      'Padding Unificato: disconnected states ora usano p-6 sm:p-8 consistently (rimosso lg:p-8 terzo breakpoint)',
      'Dark Mode Completo: aggiunte dark mode classes mancanti su tutti gli elementi disconnected state',
      'StoveCard Dark Mode: aggiunti dark:text-neutral-300 su text-neutral-600 per miglior contrasto',
      'ThermostatCard Liquid Glass: disconnected state bg-neutral-100 â†’ liquidPro con ring-1 ring-neutral-200/50',
      'LightsCard Liquid Glass: disconnected state bg-neutral-100 â†’ liquidPro con ring-1 ring-neutral-200/50',
      'Documentazione Visual Screenshots: creato docs/visual-screenshots.md con guida TEST_MODE bypass Auth0',
      'CLAUDE.md: aggiornato indice con link Visual Screenshots e quick command per testing visivo',
    ],
  },
  {
    version: '1.16.2',
    date: '2025-11-25',
    type: 'patch',
    changes: [
      'Maintenance Tracking Race Conditions: implementate Firebase Transactions per operazioni atomiche read-modify-write',
      'Concurrency Safe: risolti race conditions quando multiple istanze cron job eseguono tracking simultaneo',
      'MODULATION State Tracking: aggiunto supporto stato MODULATION come working state (oltre a WORK)',
      'Firebase Transactions: usate runTransaction() per garantire data integrity su hoursUsed updates',
      'Comprehensive Concurrency Tests: 11 nuovi test per verificare atomicitÃ  operazioni parallele',
      'Test Suite Completa: 41 test totali (11 concurrency + 30 esistenti) tutti passing',
      'Jest Setup Fix: aggiunto conditional check per window object in jest.setup.js per Node compatibility',
      'Transaction Mocks: aggiornati mock Firebase per supportare runTransaction in test suite esistente',
      'Data Integrity: tracking ore manutenzione ora garantito accurato anche con chiamate cron concorrenti',
      'Production Ready: sistema tracking affidabile anche con multiple cloud function instances',
    ],
  },
  {
    version: '1.16.1',
    date: '2025-11-18',
    type: 'patch',
    changes: [
      'Visual Inspection E2E Tests: suite completa test Playwright per UI/UX (contrast WCAG AA, uniformitÃ  componenti, responsive, dark mode, accessibilitÃ  ARIA)',
      'Test Contrast: verifica automatica contrasto colori 4.5:1 per WCAG AA compliance su tutti gli elementi testuali',
      'Test Component Uniformity: validazione consistenza button, card, banner, typography, spacing',
      'Test Responsive: verifica layout mobile (375px), tablet (768px), desktop (1920px) senza scroll orizzontale',
      'Test Dark Mode: verifica theme toggle, backdrop-filter blur, glass effect, layout preservation',
      'Test Accessibility: ARIA labels, keyboard navigation, focus visible, heading hierarchy, semantic HTML',
      'ThermostatCard dark mode migliorato: background opacity aumentata da 0.03 a 0.08 per migliore visibilitÃ ',
      'ThermostatCard mode buttons: aggiunto dark mode completo per tutti i 4 stati (schedule, away, hg, off)',
      'TEST_MODE WhatsNew bypass: modal changelog ora disabilitata durante test automatici per esecuzione fluida',
      'Layout background fix: aggiunto explicit bg-neutral-50 dark:bg-neutral-900 per consistenza visiva',
      'next.config.mjs: esposto NEXT_PUBLIC_TEST_MODE environment variable per client-side detection',
      'E2E-TESTING.md: aggiornata documentazione con nuova suite UI/UX Playwright (12 progetti test)',
      'File test: e2e/visual-inspection.spec.js con 5 categorie test complete',
    ],
  },
  {
    version: '1.16.0',
    date: '2025-11-18',
    type: 'minor',
    changes: [
      'Sandbox Mode: aggiunto supporto variabile d\'ambiente SANDBOX_MODE per attivazione automatica',
      'Test E2E automatici: sandbox ora attivabile tramite SANDBOX_MODE=true senza toggle UI manuale',
      'Environment variable: isSandboxEnabled() ora verifica process.env.SANDBOX_MODE oltre a Firebase toggle',
      'PrioritÃ  env var: variabile d\'ambiente ha prioritÃ  su Firebase toggle per automazione test',
      'Workflow migliorato: test Playwright possono ora eseguire con sandbox pre-attivato',
      'Documentazione aggiornata: docs/sandbox.md include Metodo A (env var) e Metodo B (UI toggle)',
      'Test coverage: aggiunti unit test per verifica funzionalitÃ  environment variable',
      'Backward compatible: UI toggle continua a funzionare normalmente per sviluppo manuale',
    ],
  },
  {
    version: '1.15.1',
    date: '2025-11-18',
    type: 'patch',
    changes: [
      'Playwright E2E Cleanup Automatico: script run-e2e-clean.sh per pulizia automatica test artifacts',
      'Auto-cleanup report: playwright-report/, test-results/, playwright/.cache/ rimossi dopo test',
      'Scripts npm aggiornati: test:e2e e test:e2e:headed ora eseguono cleanup automatico',
      'Test summary: statistiche file generati (size, count) mostrate prima della pulizia',
      'Gitignore esteso: aggiunte directory Playwright per evitare commit artifacts',
      'Script eseguibile: run-e2e-clean.sh con chmod +x per esecuzione diretta',
      'Exit code preservato: script mantiene exit code test per CI/CD integration',
      'Developer experience migliorata: progetto sempre pulito dopo test E2E',
    ],
  },
  {
    version: '1.15.0',
    date: '2025-11-17',
    type: 'minor',
    changes: [
      'E2E Testing Suite Playwright: implementato sistema completo test automatici UI/UX con 10 test end-to-end',
      'Test Completo: copertura homepage, scheduler, maintenance, log, changelog con dark/light mode per ogni pagina',
      'Modal Handling: dismissal automatico modal changelog durante test per esecuzione fluida',
      'Responsive Testing: test mobile (375x812) e desktop (1920x1080) per verifica UI cross-device',
      'Performance Metrics: monitoraggio automatico tempi caricamento (DOM Interactive < 2s target)',
      'Screenshot Auto-Cleanup: generazione screenshot durante test con cancellazione automatica al termine',
      'TEST_MODE: bypass Auth0 in middleware per testing automatico (solo localhost, safety-first)',
      'Scripts npm: test:e2e (suite completa) e test:playwright (base) per workflow testing',
      'Documentazione E2E-TESTING.md: guida completa setup, esecuzione, troubleshooting, best practices',
      'Theme Testing: verifica light/dark mode via localStorage senza autenticazione theme settings page',
      'Sicurezza: TEST_MODE disabled by default (.env.local), warning documentation per production safety',
    ],
  },
  {
    version: '1.14.1',
    date: '2025-11-15',
    type: 'patch',
    changes: [
      'UI Uniformata: tutte le pagine (scheduler, maintenance, changelog, log, theme settings) ora usano liquidPro invece di liquid',
      'Dark Mode Completo: applicato dark mode consistente su TUTTE le pagine (headers, descriptions, borders, inputs, colored boxes)',
      'Contrasto Ottimizzato: Button liquid variants migliorati per WCAG AA compliance (4.5:1 contrast ratio)',
      'Contrasto Banner: Banner liquid variants ottimizzati da ~2:1 a ~6:1 (text-color scuriti da 700 a 800/900)',
      'Background Opacity: aumentata da 10% a 15% su button/banner per migliore leggibilitÃ ',
      'Ring Borders: rafforzati da 20% a 25% per bordi piÃ¹ definiti',
      'AccessibilitÃ : 100% WCAG AA compliance per testo su tutti i componenti (light e dark mode)',
      'Device Cards: ThermostatCard e LightsCard uniformati al pattern StoveCard (liquidPro, separatori styled, dark mode)',
      'Pattern Architetturale: self-contained pattern applicato uniformemente (banner, status, controls dentro card principale)',
    ],
  },
  {
    version: '1.14.0',
    date: '2025-11-14',
    type: 'minor',
    changes: [
      'Dark Mode: implementato tema scuro/chiaro completo con glass effect ottimizzato',
      'Settings Tema: nuova pagina /settings/theme con toggle e preview live',
      'Sync Multi-Device: preferenza tema salvata su Firebase e sincronizzata su tutti i dispositivi',
      'Zero Flash: script anti-FOUC garantisce applicazione tema istantanea al caricamento',
      'UI Uniforme: tutti i componenti (Card, Button, Input, Select, Navbar, Footer) supportano dark mode',
      'Pattern Coerente: palette colori dark ottimizzata per glass effect scuro (bg-white/[0.05])',
      'Documentazione: aggiornata docs/ui-components.md con sezione Dark Mode',
    ],
  },
  {
    version: '1.13.0',
    date: '2025-11-14',
    type: 'minor',
    changes: [
      'Environment Separation: API tokens (Netatmo, Hue) ora separati tra dev e production',
      'Development namespace: localhost usa dev/ in Firebase, production usa root paths',
      'Vantaggi: token produzione protetti, test OAuth sicuri, zero conflitti tra ambienti',
      'Fix Netatmo OAuth: corretti redirect callback /thermostat/authorized (era /netatmo/authorized)',
      'Fix authorized page: redirect corretto a /thermostat (era /netatmo)',
      'Aggiornati lib/netatmoTokenHelper, netatmoService, hueTokenHelper, hueLocalHelper',
      'Nuova utility: lib/environmentHelper.js per detection automatica ambiente',
      'Tests: aggiunti test per environment path handling',
      'Docs: documentato pattern environment separation in docs/firebase.md',
    ],
  },
  {
    version: '1.12.1',
    date: '2025-11-04',
    type: 'patch',
    changes: [
      'GlassEffect ottimizzato: componente completamente riscritto per massima trasparenza e performance',
      'Shader semplificato: rimossi layer complessi, solo pattern frost animato leggero (3 ottave noise)',
      'Uniformi ridotte: da 9 a 2 (solo resolution e time) per performance ottimali',
      'Props semplificate: rimossi bgColor/opacity dalle uniformi, solo texture bianca trasparente',
      'Alpha ultra-ridotta: 3% frost pattern, mix-blend-mode overlay per trasparenza totale',
      'Box StoveCard trasparenti: bg-white/[0.01] con backdrop-blur-md per vedere icona stato sotto',
      'Bundle size ridotto: homepage da 18.6 kB a 17.2 kB (-7.5%)',
      'WebGL context ottimizzato: antialias/depth/stencil disabilitati per GPU performance',
    ],
  },
  {
    version: '1.12.0',
    date: '2025-11-04',
    type: 'minor',
    changes: [
      'GlassEffect avanzato: implementazione liquid glass Apple WWDC 2025 inspired con WebGL shader migliorati',
      'Signed Distance Functions (SDF): rounded box dinamico con corner radius personalizzabile per forme fluide',
      'Normal mapping 3D: calcolo normali real-time da height field con gradients per profonditÃ  realistica',
      'Rifrazione background: doppia rifrazione (entry/exit) con IOR configurabile per effetto vetro autentico',
      'Frosted blur multisampling: blur 3x3 box con frost pattern multi-scala per effetto smerigliato',
      'Edge highlights realistici: rim light basato su orientazione normali + edge detection distance-based',
      'Props configurabili: ior (0.8-1.5), thickness, blurRadius, cornerRadius per massima flessibilitÃ ',
      'Codice repository: rxing365/html-liquid-glass-effect-webgl integrato con ottimizzazioni performance',
    ],
  },
  {
    version: '1.11.1',
    date: '2025-11-04',
    type: 'patch',
    changes: [
      'UI cleanup StoveCard: rimosso bordo bianco dalla card principale (liquidPro ring rimosso)',
      'Rimosso layer wrapper intermedio bianco trasparente per design piÃ¹ pulito',
      'Skeleton uniformato: allineata struttura DOM con componente reale per consistenza',
    ],
  },
  {
    version: '1.11.0',
    date: '2025-11-03',
    type: 'minor',
    changes: [
      'StoveCard UI redesign: nuovo layout Frame 3 style con icona centrale grande e box glassmorphism sovrapposti',
      'GlassEffect component: effetto vetro trasparente WebGL2 con frosted glass pattern, distortion refraction e edge highlights',
      'Rimosse animazioni WebGL 3D complesse: eliminato StoveWebGLAnimation.js con shader Three.js per fiamme e fiocchi di neve',
      'Mapping stato/icona/colore: sistema chiaro con gradiente azzurro (OFF), verde (WORK), rosso (ERROR), arancio (WAIT)',
      'Layout card bianca: card principale rimane bianca (liquid glass), solo riquadro interno colorato per stato stufa',
      'Skeleton aggiornato: allineato perfettamente con nuova struttura UI Frame 3 (icona sovrapposta + box trasparenti)',
      'Performance ottimizzata: effetto WebGL solo per trasparenza box dati (non piÃ¹ rendering 3D complesso)',
      'Documentazione: aggiunto stove-status-mapping.md con reference table completo statoâ†’iconaâ†’colore',
    ],
  },
  {
    version: '1.10.1',
    date: '2025-11-03',
    type: 'patch',
    changes: [
      'Fix navigazione mobile: middleware ora preserva URL destinazione con returnTo parameter per evitare redirect a homepage',
      'Service Worker ottimizzato: aggiunta strategia NetworkFirst per navigation requests HTML per evitare caching redirect',
      'PWA shortcuts corretti: URL aggiornati per architettura multi-device (/stove/scheduler, /stove/maintenance, /stove/errors)',
      'PWA iOS ottimizzato: aggiunto display_override e meta tag apple-mobile-web-app-title per esperienza nativa',
      'Quick Actions iOS: 4 shortcuts ottimizzati per long-press su icona home (Stufa, Pianificazione, Manutenzione, Errori)',
    ],
  },
  {
    version: '1.10.0',
    date: '2025-10-27',
    type: 'minor',
    changes: [
      'Toast component: notifiche temporanee con liquid glass style per feedback UX immediato',
      'Transizione automatica Automatic â†’ Semi-Manual: modifica fan/power in modalitÃ  automatica attiva semi-manual immediatamente',
      'Badge informativi preventivi: indicatore blu sopra select quando in modalitÃ  automatica',
      'SandboxPanel scheduler testing: sezione completa per test pianificazione con quick setup intervalli',
      'Scheduler sandbox controls: toggle scheduler, create/clear test intervals, visual mode badges',
      'UX ottimizzata: feedback triplo (preventivo badge â†’ azione â†’ toast conferma) per massima chiarezza',
      'Rimossa condizione nextChange blocking: semi-manual si attiva anche senza prossimi eventi schedulati',
      'API response enriched: setFan/setPower ritornano modeChanged flag per notifica frontend',
      'Real-time state update: aggiornamento UI immediato senza aspettare Firebase polling',
      'Animazione slideDown CSS per toast: transizione fluida from top con opacity fade-in',
    ],
  },
  {
    version: '1.9.0',
    date: '2025-10-22',
    type: 'minor',
    changes: [
      'Sandbox Mode: sistema completo testing locale senza chiamate reali alla stufa (SOLO localhost)',
      'SandboxPanel con controllo completo: stati stufa, potenza, ventola, temperatura, ore manutenzione, errori',
      'Intercettazione API completa: tutti gli endpoint (status, getFan, getPower, ignite, shutdown, setFan, setPower) usano dati sandbox se attivo',
      'Real-time sync Firebase: listener su sandbox/stoveState, sandbox/error, sandbox/maintenance per aggiornamento immediato StoveCard',
      'UI ottimizzata: design purple/pink gradient con contrasto migliorato, sezioni ben strutturate, valori enfatizzati',
      'Badge sandbox: indicatore "ðŸ§ª SANDBOX" viola in StoveCard quando modalitÃ  attiva',
      'Gestione errori simulati: 5 tipi di errori (AL01-AL05) con conversione formato API Thermorossi',
      'Settings avanzati sandbox: auto-progress stati, simulate delay, random errors per stress testing',
      'Storico azioni: tracking ultime 100 azioni sandbox con timestamp per debugging',
      'Documentazione completa: docs/sandbox.md con architettura, API reference, workflows, best practices',
      'Unit tests: sandboxService.test.js e stoveApi.sandbox.test.js per coverage intercettazione API',
    ],
  },
  {
    version: '1.8.2',
    date: '2025-10-22',
    type: 'patch',
    changes: [
      'Ottimizzazione layout StoveCard: container animazione WebGL ridotto da aspect-square a h-48 sm:h-56 per migliore integrazione elementi',
      'Shader fiocco di neve riscritto in stile cartoon Ghibli 2D (sostituito raymarching 3D complesso): dimensioni ridotte 60%, performance migliorate',
      'Tutti shader WebGL ottimizzati con zoom aspect-ratio adaptive per container rettangolare (snowflake, flame, error)',
      'Fiocco Ghibli: centro esagonale, 6 punte decorative, 8 sparkles animati, palette azzurro freddo graduale, breathing animation delicata',
      'Layout compatto: spacing e padding ridotti per armonizzare animazione con parametri Fan/Power e stato stufa',
    ],
  },
  {
    version: '1.8.1',
    date: '2025-10-22',
    type: 'patch',
    changes: [
      'Fix Auth0 redirect loop su mobile: escluse route PWA dal middleware per evitare conflitti con service worker',
      'Middleware matcher aggiornato: exclude offline, icons, manifest.json, sw.js, firebase-messaging-sw.js',
      'Miglioramento animazione fiamma WebGL: lingue piÃ¹ basse e movimento armonioso per stile cartoon fluido',
      'Fiamma Calcifer: heightVar ridotto a 0.25+0.08 (da 0.40+0.22), sway gentile 0.04 (da 0.12+0.06)',
      'Fiamma: solo 3 lingue (da 6) con movimento sincronizzato per aspetto piÃ¹ pulito e compatto',
      'Documentazione: nuova sezione troubleshooting "Authentication (Auth0)" con guida completa redirect loop mobile',
    ],
  },
  {
    version: '1.8.0',
    date: '2025-10-21',
    type: 'minor',
    changes: [
      'Sistema animazioni WebGL 3D: visualizzazione interattiva stati stufa con rendering real-time 60fps',
      'Componente StoveWebGLAnimation.js riutilizzabile con supporto multi-stato (OFF/START/WORK/ERROR)',
      'OFF: Fiocco di neve 3D rotante con particelle fredde orbitanti (effetto ghiacciato)',
      'START: Fiamma arancione animata con turbulenza sinusoidale (effetto ignizione)',
      'WORK: Fiamma rossa intensa con core glow pulsante (effetto combustione)',
      'ERROR/ALARM: Triangolo warning con punto esclamativo lampeggiante (effetto alert)',
      'Installata Three.js (r180): libreria 3D WebGL per rendering grafica interattiva',
      'Canvas WebGL 140x140px con camera perspective, cleanup automatico risorse',
      'Sostituita emoji statica con animazioni 3D per feedback visivo immediato',
      'Homepage bundle size: 142 kB page, 318 kB First Load JS (+132 kB Three.js)',
    ],
  },
  {
    version: '1.7.0',
    date: '2025-10-21',
    type: 'minor',
    changes: [
      'Sistema gestione preferenze dispositivi: abilitazione/disabilitazione device per utente con storage Firebase',
      'Nuova pagina /settings/devices per gestione dispositivi con toggle switches e salvataggio real-time',
      'Preferenze dispositivi per utente salvate in Firebase (devicePreferences/{userId}/{deviceId})',
      'API routes /api/devices/preferences (GET/POST) per lettura e scrittura preferenze',
      'Homepage e navbar ora filtrano dispositivi in base a preferenze utente da Firebase',
      'Service layer devicePreferencesService.js per operazioni Firebase preferences',
      'Tutti i device abilitati in DEVICE_CONFIG: stufa, termostato, luci Hue, Sonos',
      'Menu Impostazioni: aggiunto link "Gestione Dispositivi" con icona ðŸ ',
      'Pattern riutilizzabile: user preferences system estendibile per altre configurazioni',
    ],
  },
  {
    version: '1.6.5',
    date: '2025-10-21',
    type: 'patch',
    changes: [
      'Device Card Self-Contained Pattern: banner e informazioni device-specific ora contenute all\'interno delle rispettive card per coerenza architetturale',
      'StoveCard: banner pulizia manutenzione spostato dentro la card principale',
      'ThermostatCard: banner errore connessione spostato dentro la card',
      'LightsCard: banner errore connessione spostato dentro la card',
      'Migliorata organizzazione UI: ogni device card Ã¨ auto-contenuta con tutte le sue informazioni',
    ],
  },
  {
    version: '1.6.4',
    date: '2025-10-21',
    type: 'minor',
    changes: [
      'Nuova variante liquidPro: effetto liquid glass iOS 26 enhanced con backdrop-saturate-150 e backdrop-contrast-105 per colori piÃ¹ vividi e contrasto migliorato',
      'Aggiunti backdrop filters a Tailwind config: backdropSaturate (110, 125, 150, 175, 200) e backdropContrast (102, 105, 110, 115) per massima flessibilitÃ ',
      'StoveCard aggiornata con liquidPro per esperienza visiva premium',
      'Variante opzionale: liquid classico rimane disponibile, liquidPro da usare per componenti hero',
    ],
  },
  {
    version: '1.6.3',
    date: '2025-10-21',
    type: 'patch',
    changes: [
      'Uniformato stile liquid glass iOS 26 su tutti i componenti: MaintenanceBar, CronHealthBanner, TimeBar, WhatsNewModal aggiornati con bg-white/[0.08], backdrop-blur-3xl, shadow-liquid, ring-1 ring-white/[0.15]',
      'Migliorati componenti pagine: Maintenance (inner cards liquid), Errors (filter tabs liquid), Log (filter buttons liquid), Settings/Notifications (device items liquid)',
      'Applicato gradient overlay consistente (before:bg-gradient-to-br before:from-white/[0.12]) su tutti i componenti per profonditÃ  visiva uniforme',
      'Ottimizzati z-index su tutti i componenti aggiornati per corretta sovrapposizione elementi (z-10 su contenuti, gradient su layer inferiore)',
    ],
  },
  {
    version: '1.6.2',
    date: '2025-10-21',
    type: 'patch',
    changes: [
      'Fix Card liquid overflow: rimosso overflow-hidden per permettere ai dropdown Select di fuoriuscire correttamente dalle card',
      'Risolto problema homepage: dropdown nelle device cards non vengono piÃ¹ clippati dai bordi della card',
    ],
  },
  {
    version: '1.6.1',
    date: '2025-10-21',
    type: 'patch',
    changes: [
      'Fix z-index hierarchy: WhatsNewModal corretto da z-50 a z-[1000]/z-[1001] per evitare overlap con dropdown su mobile',
      'Fix z-index TimeBar tooltip: corretto da z-50 a z-[100] per consistenza con design system documentato',
      'Risolto problema mobile: dropdown non vanno piÃ¹ sotto altri elementi grafici',
    ],
  },
  {
    version: '1.6.0',
    date: '2025-10-21',
    type: 'minor',
    changes: [
      'Documentazione modulare: CLAUDE.md trasformato in indice leggero (da 906 a 382 righe, -58% token usage)',
      'Struttura docs/ organizzata: 17 file tematici auto-conclusivi in docs/ con sottodirectory systems/ e setup/',
      'File core: quick-start.md, architecture.md, api-routes.md, firebase.md, ui-components.md, design-system.md, patterns.md, data-flow.md, versioning.md, testing.md, troubleshooting.md, deployment.md',
      'Sistemi: docs/systems/maintenance.md, monitoring.md, errors.md, notifications.md',
      'Setup: docs/setup/netatmo-setup.md, hue-setup.md',
      'CLAUDE.md ora Ã¨ indice navigabile con Quick Links, Documentation Map, Critical Concepts',
      'File esistenti organizzati: ERRORS-DETECTION.md â†’ systems/errors.md, NOTIFICATIONS-SETUP.md â†’ systems/notifications.md, README-TESTING.md â†’ testing.md, DEPLOY.md â†’ deployment.md',
      'Migliorata riusabilitÃ : ogni file Ã¨ auto-conclusivo con cross-references ad altri file tematici',
      'Ottimizzazione token consumption: documentazione parzializzabile permette AI di caricare solo sezioni necessarie',
    ],
  },
  {
    version: '1.5.15',
    date: '2025-10-21',
    type: 'minor',
    changes: [
      'Sistema notifiche push completo: Firebase Cloud Messaging con supporto iOS PWA (iOS 16.4+)',
      'Gestione preferenze notifiche: toggle switches per errori (per severitÃ ), scheduler, manutenzione',
      'Menu Impostazioni navbar: dropdown con Gestione Notifiche, Storico, Changelog',
      'Service worker per notifiche background quando app chiusa',
      'Notifiche automatiche: errori stufa, azioni scheduler, soglie manutenzione (80%, 90%, 100%)',
      'Pattern fail-safe: se check preferenze fallisce, notifica inviata comunque (safety-first)',
      'NOTIFICATIONS-SETUP.md: guida completa configurazione Firebase, iOS PWA, testing',
    ],
  },
  {
    version: '1.5.14',
    date: '2025-10-20',
    type: 'patch',
    changes: [
      'Uniformazione completa UI con liquid glass style iOS 18 in tutta l\'applicazione',
      'Componenti base aggiornati: Card, Button, Select, Banner, Input con supporto prop liquid={true}',
      'Navbar e menu mobile completamente ridisegnati con liquid glass style',
      'Tutte le pagine (scheduler, maintenance, errors, changelog) aggiornate con liquid glass',
      'Design system unificato: bg-white/[0.08] + backdrop-blur-3xl + shadow-liquid + ring-white/20',
      'CLAUDE.md: documentato pattern liquid glass per sviluppi futuri',
    ],
  },
  {
    version: '1.5.13',
    date: '2025-10-18',
    type: 'patch',
    changes: [
      'Fix bug tracking manutenzione: lastUpdatedAt ora aggiornato SOLO durante tracking WORK effettivo',
      'lastUpdatedAt inizializzato a null e settato solo al primo tracking WORK (no timestamp fantasma)',
      'updateTargetHours() non aggiorna piÃ¹ lastUpdatedAt (evita conteggio ore da modifiche configurazione)',
      'Risolto problema conteggio ore superiori a quelle effettive di funzionamento stufa',
      'Test suite: 30 test maintenanceService aggiornati con pattern fake timers per Date mocking affidabile',
    ],
  },
  {
    version: '1.5.12',
    date: '2025-10-17',
    type: 'patch',
    changes: [
      'Navbar mobile completamente riscritta: architettura separata mobile/desktop per maggiore affidabilitÃ ',
      'Menu hamburger fixed overlay: backdrop cliccabile per chiusura + z-index hierarchy ottimizzata',
      'Gestione stati indipendenti: mobileMenuOpen, desktopDeviceDropdown, mobileDeviceDropdown per zero interferenze',
      'UX migliorata: body scroll lock quando menu aperto, chiusura automatica su route change, supporto ESC key',
      'Fix posizionamento: backdrop e menu panel iniziano sotto header (navbar sempre visibile)',
    ],
  },
  {
    version: '1.5.11',
    date: '2025-10-17',
    type: 'patch',
    changes: [
      'Homepage layout responsive: grid 2 colonne su desktop (â‰¥1024px), stack verticale su mobile',
      'Multi-device architecture: device registry in lib/devices/ per gestione scalabile dispositivi',
      'Device cards pattern: StoveCard, ThermostatCard in app/components/devices/ per organizzazione modulare',
      'Future development: Philips Hue (Local API) e Spotify+Sonos preparati ma disabilitati (enabled: false)',
      'Log service: supporto completo device filtering per filtrare azioni per tipo dispositivo',
    ],
  },
  {
    version: '1.5.10',
    date: '2025-10-16',
    type: 'patch',
    changes: [
      'CLAUDE.md ottimizzato: ridotto da 1538 a 647 righe (-58% context usage)',
      'Eliminata sezione Testing duplicata: riferimento completo a README-TESTING.md',
      'Pattern codice sintetizzati: riferimenti a file reali invece di esempi lunghi',
      'Sezioni ottimizzate: Sistema Manutenzione, Monitoring Cronjob, Errori con link documentazione',
      'Pattern UI compattati: Dropdown, Modal, Collapse con riferimenti implementazioni reali',
      'Mantenute tutte le info critiche: architettura, API routes, Firebase schema, versioning',
    ],
  },
  {
    version: '1.5.9',
    date: '2025-10-16',
    type: 'patch',
    changes: [
      'Netatmo UI: report temperature compatto in home page con polling automatico 30s',
      'Badge tipo dispositivo: termostato/valvola visualizzati in home e pagina dettagli',
      'Ordinamento intelligente: termostati sempre per primi, poi valvole, poi stanze con temperatura',
      'Fix Firebase: filtro automatico valori undefined per prevenire errori write operations',
      'Filtro relÃ¨: dispositivi NAPlug rimossi da visualizzazione (non utili per temperature)',
      'Pattern Firebase undefined handling: documentato in CLAUDE.md per riutilizzo future integrazioni',
    ],
  },
  {
    version: '1.5.8',
    date: '2025-10-16',
    type: 'patch',
    changes: [
      'Integrazione Netatmo: OAuth 2.0 flow completo con sessione persistente',
      'Token helper centralizzato: auto-refresh automatico refresh token, gestione errori intelligente',
      'Sessione permanente: token si auto-rinnova ad ogni chiamata API, nessun re-login necessario',
      'UI feedback errori: banner dismissibili con flag reconnect per riconnessione guidata',
      '8 endpoint API Netatmo: topology, status, controls (temperature, modalitÃ , setpoint stanze)',
      'CLAUDE.md ottimizzato: pattern generici OAuth riutilizzabili, rimossi dettagli specifici implementazione',
    ],
  },
  {
    version: '1.5.7',
    date: '2025-10-15',
    type: 'patch',
    changes: [
      'Sistema rilevamento errori esteso: database 23 codici errore Thermorossi con severitÃ  (INFO/WARNING/ERROR/CRITICAL)',
      'Suggerimenti risoluzione automatici per ogni codice errore nel database ERROR_CODES',
      'Badge errore pulsante nel display status: animazione pulse rosso con blur effect per massima visibilitÃ ',
      'ErrorAlert migliorato: box suggerimenti glassmorphism + pulsante "Vedi Storico Errori"',
      'Pagina debug (/debug): monitoraggio real-time API con auto-refresh 3s, visualizzazione parametri completi',
      'Documentazione ERRORS-DETECTION.md: guida completa 23 codici errore, troubleshooting, best practices',
    ],
  },
  {
    version: '1.5.6',
    date: '2025-10-15',
    type: 'patch',
    changes: [
      'Test suite completa: 288 test (+169 nuovi) per services critici (schedulerService, maintenanceService, changelogService, errorMonitor, logService, stoveApi)',
      'Coverage migliorato: 4 services con 100% coverage (stoveApi, logService, errorMonitor 97%, changelogService 92%)',
      'Jest configurato con @testing-library/react 16.3 per unit test componenti UI e services',
      'README-TESTING.md: documentazione completa testing workflow, best practices, troubleshooting',
      'CLAUDE.md aggiornato: sezione Testing & Quality Assurance con pattern generali riutilizzabili',
    ],
  },
  {
    version: '1.5.5',
    date: '2025-10-10',
    type: 'patch',
    changes: [
      'UI consolidata: CronHealthBanner integrato dentro card "Stato Stufa" con variante inline compatta',
      'Nuovo pattern componenti: supporto varianti multiple (banner/inline) per flessibilitÃ  layout',
      'Layout home ottimizzato: tutte le info stufa (status, modalitÃ , cron health, manutenzione) in unica card',
      'Design coerente: styling inline warning simile a Mode Indicator per consistenza visiva',
      'CLAUDE.md aggiornato: documentazione Sistema Monitoring Cronjob riflette nuova integrazione UI',
    ],
  },
  {
    version: '1.5.4',
    date: '2025-10-10',
    type: 'patch',
    changes: [
      'CLAUDE.md aggiornato: Stack tecnologico corretto (React 18 â†’ React 19.2, Next.js 15 â†’ 15.5.4)',
      'Documentazione allineata con librerie installate effettivamente',
      'Verificato che app giÃ  ottimizzata per React 19 e Next.js 15 (no modifiche codice necessarie)',
      'Package.json: versioni React esplicitate correttamente (^19.2.0)',
    ],
  },
  {
    version: '1.5.3',
    date: '2025-10-10',
    type: 'patch',
    changes: [
      'Aggiornamento dipendenze npm: React 19.1.1 â†’ 19.2.0, Firebase 11.10.0 â†’ 12.4.0, ESLint 9.36.0 â†’ 9.37.0',
      'Aggiornate dipendenze dev: autoprefixer, postcss',
      'Auth0 mantenuto a 3.8.0 (v4.x ha breaking changes estesi, upgrade rimandato)',
      'Build production verificato con successo dopo tutti gli aggiornamenti',
      'Nessuna vulnerabilitÃ  di sicurezza (npm audit clean)',
    ],
  },
  {
    version: '1.5.2',
    date: '2025-10-10',
    type: 'patch',
    changes: [
      'UI consolidata: MaintenanceBar integrato dentro card "Stato Stufa" per ridurre frammentazione UI',
      'Separator "Stato Manutenzione" tra sezione ModalitÃ  Controllo e MaintenanceBar',
      'Styling ottimizzato: background piÃ¹ leggero (bg-white/40) per integrazione visiva con card principale',
      'Rimosso link "Vai alle Impostazioni" ridondante (giÃ  accessibile da Navbar)',
      'Ridotto max-height collapse animation (200px â†’ 150px) dopo rimozione link',
      'Home page piÃ¹ pulita con tutte le info stufa consolidate in un\'unica card',
    ],
  },
  {
    version: '1.5.1',
    date: '2025-10-10',
    type: 'patch',
    changes: [
      'MaintenanceBar: implementato collapse/expand intelligente con localStorage per risparmio spazio UI',
      'Auto-expand automatico SOLO prima volta quando utilizzo â‰¥80% (warning visivo)',
      'Preferenza utente persistente: chiusura manuale rispettata anche dopo reload',
      'Badge percentuale e info ore nascoste quando banner espanso (eliminata duplicazione dati)',
      'Animazione collapse smooth con transizione max-height + opacity (300ms)',
      'Fix: auto-expand non piÃ¹ ignora chiusura manuale utente durante polling 5s',
    ],
  },
  {
    version: '1.5.0',
    date: '2025-10-10',
    type: 'minor',
    changes: [
      'Design System completo: palette colori estese 50-900 per tutti i colori semantici (success, warning, info, danger)',
      'Nomenclatura colori uniformata: gray-* â†’ neutral-* in tutta l\'applicazione',
      'Background globale consistente: rimossi override custom arancioni dalle pagine maintenance e not-found',
      'Card styling standardizzato: p-6 default, p-8 per hero sections, glass effect per header importanti',
      'Info card con palette semantiche corrette: bg-info-50 border-info-200 (non piÃ¹ bg-blue-50)',
      'Alias "danger" aggiunto a tailwind.config.js per compatibilitÃ  componenti',
      'Migliorata consistenza UI/UX tra tutte le pagine dell\'applicazione',
    ],
  },
  {
    version: '1.4.9',
    date: '2025-10-10',
    type: 'patch',
    changes: [
      'Formato orario HH:MM per ore manutenzione: visualizzazione ore utilizzo/target/rimanenti ora in formato ore:minuti',
      'Utility formatHoursToHHMM() in lib/formatUtils.js per conversione ore decimali â†’ HH:MM',
      'MaintenanceBar e pagina /maintenance aggiornate con nuovo formato (es. 47.5h â†’ 47:30)',
      'Pagina 404 personalizzata (app/not-found.js) richiesta da Next.js 15',
    ],
  },
  {
    version: '1.4.8',
    date: '2025-10-09',
    type: 'patch',
    changes: [
      'Pagina manutenzione: aggiunto pulsante reset contatore con modal di conferma',
      'Modal conferma reset: backdrop blur con escape key e dettaglio effetti operazione',
      'Reset manutenzione disponibile anche da /maintenance oltre che da banner home',
    ],
  },
  {
    version: '1.4.7',
    date: '2025-10-09',
    type: 'patch',
    changes: [
      'Sistema monitoring cronjob: salvataggio timestamp su Firebase ad ogni chiamata (cronHealth/lastCall)',
      'Banner component riutilizzabile con 4 varianti (info, warning, error, success)',
      'CronHealthBanner: alert automatico se cron inattivo >5min con link diretto per riavvio',
      'Refactoring completo banner: ErrorAlert, banner pulizia, CronHealthBanner ora uniformi',
      'Banner dismissibile con supporto icone custom, azioni e contenuto personalizzato',
      'Schema Firebase esteso con cronHealth per monitoring affidabilitÃ  scheduler',
    ],
  },
  {
    version: '1.4.6',
    date: '2025-10-08',
    type: 'patch',
    changes: [
      'CSS Modules: modularizzazione globals.css per ridurre bundle size',
      'Creato MaintenanceBar.module.css con animazione shimmer (prima in globals.css)',
      'globals.css ridotto da 27 a 13 righe (-52%) rimuovendo CSS non globale',
      'Animazione shimmer caricata solo quando MaintenanceBar Ã¨ renderizzato',
      'Best practice: CSS specifico di componente ora in CSS Modules, non in globals.css',
    ],
  },
  {
    version: '1.4.5',
    date: '2025-10-08',
    type: 'minor',
    changes: [
      'Sistema manutenzione stufa: tracking automatico ore utilizzo H24 (anche app chiusa)',
      'Pagina /maintenance per configurazione ore target pulizia (default 50h)',
      'Barra progresso visiva con colori dinamici e animazione shimmer â‰¥80%',
      'Banner bloccante quando manutenzione richiesta con conferma pulizia',
      'Blocco automatico accensione (manuale e scheduler) quando pulizia necessaria',
      'Tracking server-side via cron job: calcolo tempo reale da lastUpdatedAt Firebase',
      'Log automatico pulizia stufa con ore totali nel Firebase log',
      'MaintenanceBar component sempre visibile in home con link a configurazione',
      'UserProvider Auth0 aggiunto a ClientProviders per supporto useUser hook',
    ],
  },
  {
    version: '1.4.4',
    date: '2025-10-07',
    type: 'patch',
    changes: [
      'Changelog: aggiunto ordinamento semantico per versione (MAJOR.MINOR.PATCH)',
      'Risolto problema ordinamento quando piÃ¹ versioni hanno stessa data',
      'Funzione sortVersions() nella pagina changelog per corretto ordinamento decrescente',
    ],
  },
  {
    version: '1.4.3',
    date: '2025-10-07',
    type: 'patch',
    changes: [
      'Version enforcement: disabilitata modal bloccante in ambiente locale (dev)',
      'Version enforcement: modal bloccante solo se versione locale < Firebase (semantic comparison)',
      'Funzione compareVersions() per confronto semantico MAJOR.MINOR.PATCH',
      'Funzione isLocalEnvironment() per detection ambiente sviluppo',
      'Migliorata UX sviluppatori: no interruzioni durante development',
    ],
  },
  {
    version: '1.4.2',
    date: '2025-10-07',
    type: 'patch',
    changes: [
      'Navbar: aggiunto dropdown utente per miglior gestione viewport intermedi',
      'Navbar: logout spostato nel menu dropdown utente con info complete (nome + email)',
      'Navbar: ottimizzazione spazio header con responsive text truncation',
      'Navbar: gestione click outside, escape key e chiusura automatica al cambio route per dropdown',
    ],
  },
  {
    version: '1.4.1',
    date: '2025-10-07',
    type: 'patch',
    changes: [
      'Fix build error: aggiunto dynamic rendering a /api/admin/sync-changelog route',
      'Risolto "Cannot find module for page" error durante build production',
      'Migliorata compatibilitÃ  Firebase Client SDK con Next.js build process',
    ],
  },
  {
    version: '1.4.0',
    date: '2025-10-06',
    type: 'minor',
    changes: [
      'VersionContext per gestione globale stato versioning con check on-demand',
      'Check versione integrato nel polling status stufa (ogni 5s invece di 60s)',
      'ClientProviders wrapper per context React in layout Server Component',
      'Rimosso useVersionEnforcement hook autonomo (ora VersionContext + useVersion)',
      'Performance: un solo Firebase read invece di due polling separati',
      'UX: rilevamento aggiornamenti 12x piÃ¹ veloce (5s vs 60s)',
    ],
  },
  {
    version: '1.3.4',
    date: '2025-10-06',
    type: 'patch',
    changes: [
      'Card regolazioni (ventola e potenza) ora nascosta quando stufa spenta',
      'Layout home piÃ¹ pulito con grid adattivo a singola colonna quando necessario',
      'Rimosso alert e controlli disabilitati per esperienza utente migliorata',
    ],
  },
  {
    version: '1.3.3',
    date: '2025-10-06',
    type: 'patch',
    changes: [
      'Design glassmorphism moderno stile iOS 18 per UI ancora piÃ¹ moderna',
      'Card: nuova prop glass per effetto vetro smerigliato',
      'Button: nuova variante glass con trasparenza e blur',
      'Select: dropdown automaticamente con effetto glassmorphism',
      'Tailwind: aggiunte shadow-glass, shadow-glass-lg, shadow-inner-glow, backdrop-blur-xs',
    ],
  },
  {
    version: '1.3.2',
    date: '2025-10-06',
    type: 'patch',
    changes: [
      'Corretto z-index dropdown componente Select (z-50 â†’ z-[100])',
      'Risolto problema tendine select coperte da card successive',
    ],
  },
  {
    version: '1.3.1',
    date: '2025-10-06',
    type: 'patch',
    changes: [
      'ModalitÃ  semi-manuale ora si attiva SOLO da comandi manuali homepage (ignite, shutdown, setPower, setFan)',
      'Parametro source="manual"|"scheduler" nelle API routes per distinguere origine comando',
      'Verifica stufa accesa prima di attivare semi-manual con setPower/setFan',
      'Gestione fusi orari standardizzata con helper createDateInRomeTimezone()',
      'Tutti gli orari scheduler ora gestiti con timezone Europe/Rome e salvataggio UTC consistente',
      'Risolto problema orari incorretti quando server in timezone diverso da Europe/Rome',
    ],
  },
  {
    version: '1.3.0',
    date: '2025-10-04',
    type: 'minor',
    changes: [
      'Sistema controllo versione bloccante con modal forzato aggiornamento',
      'Hook useVersionEnforcement per polling periodico versione Firebase (ogni 60s)',
      'Componente ForceUpdateModal bloccante quando versione locale â‰  Firebase',
      'Integrazione VersionEnforcer in layout.js per controllo globale',
      'Prevenzione uso applicazione con versione obsoleta',
    ],
  },
  {
    version: '1.2.1',
    date: '2025-10-04',
    type: 'patch',
    changes: [
      'Risolto warning ESLint per export anonimo in lib/version.js',
      'Aggiunta direttiva \'use client\' mancante in 4 componenti con React hooks',
      'Corretti componenti scheduler: DayAccordionItem, DayScheduleCard, TimeBar',
      'Corretto hook useVersionCheck con direttiva client',
    ],
  },
  {
    version: '1.2.0',
    date: '2025-10-04',
    type: 'minor',
    changes: [
      'Sistema notifiche nuove versioni con badge "NEW" nel footer',
      'Modal "What\'s New" automatico al primo accesso post-update',
      'Hook useVersionCheck per confronto versioni e gestione localStorage',
      'Badge animato con pulse quando disponibile nuova versione',
      'Opzione "Non mostrare piÃ¹" per versioni specifiche',
      'Chiusura modal con tasto ESC',
    ],
  },
  {
    version: '1.1.0',
    date: '2025-10-04',
    type: 'minor',
    changes: [
      'Aggiunta visualizzazione prossimo cambio scheduler in modalitÃ  automatica (azione, orario, potenza, ventola)',
      'Aggiunto pulsante "Torna in Automatico" in modalitÃ  semi-manuale (StovePanel e Scheduler page)',
      'Nuova funzione getNextScheduledAction() in schedulerService.js per dettagli cambio scheduler',
      'Formato orari unificato: "HH:MM del DD/MM"',
      'Migliorato layout sezione ModalitÃ  Controllo con design responsive',
      'Sistema changelog centralizzato con sincronizzazione Firebase',
      'Pagina dedicata /changelog per visualizzare storico versioni',
    ],
  },
  {
    version: '1.0.0',
    date: '2025-10-01',
    type: 'major',
    changes: [
      'Sistema di controllo completo stufa Thermorossi',
      'Schedulazione settimanale automatica',
      'Integrazione Auth0 per autenticazione',
      'Logging azioni utente su Firebase',
      'Sistema monitoraggio errori e allarmi',
      'Integrazione Netatmo per temperatura',
      'PWA con supporto offline',
      'Sistema di versioning implementato',
    ],
  },
];

const versionInfo = {
  version: APP_VERSION,
  author: APP_AUTHOR,
  lastUpdate: LAST_UPDATE,
  history: VERSION_HISTORY,
};

export default versionInfo;
